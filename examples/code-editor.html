<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>LexGUI Code Editor Demo</title>
    <link rel="stylesheet" href="../build/lexgui.css">
    <link rel="icon" href="../images/favicon.png">
    <script type="importmap">
        {
          "imports": {
            "lexgui": "../build/lexgui.module.js",
            "lexgui/extensions/": "../build/extensions/"
          }
        }
    </script>
</head>

<body></body>
<script type="module">

    import { LX } from 'lexgui';
    import 'lexgui/extensions/codeeditor.js';

    LX.CodeEditor.debugScopes = false;
    LX.CodeEditor.debugSymbols = false;
    LX.CodeEditor.debugProcessedLines = false;

    // init library and get main area
    let area = await LX.init();

    const fileExplorer = true;

    if( !fileExplorer )
    {
        var [ leftArea, rightArea ] = area.split({ sizes: ["55%", "45%"] });

        var canvas = document.createElement('canvas');
        canvas.id = "mycanvas";
        canvas.width = leftArea.root.clientWidth;
        canvas.height = leftArea.root.clientHeight;
        canvas.style.width = "100%";
        canvas.style.height = "100%";
        leftArea.attach(canvas);

        leftArea.onresize = function (bounding) {
            canvas.width = bounding.width;
            canvas.height = bounding.height;
        };

        area = rightArea;
    }

    let editor = new LX.CodeEditor(area, {
        // allowAddScripts: false,
        // autocomplete: false,
        // disableEdition: true,
        // skipInfo: true,
        fileExplorer: fileExplorer,
        explorerName: "EXPLORER",
        // statusShowFontSizeZoom: false,
        // skipTabs: true,
        files: [
            "../data/js_sample.js",
            "../data/ts_sample.ts",
            "../data/json_sample.json",
            "../data/css_sample.css",
            "../data/cpp_sample.cpp",
            "../data/cpp_header_sample.hpp",
            "../data/c_sample.c",
            "../data/xml_sample.xml",
            "../data/python_sample.py",
            "../data/rust_sample.rs",
            "../data/php_sample.php",
            "../data/localhost.bat",
            "../data/frag.wgsl",
            "../changelog.md",
            "../index.html",
        ],
        onFilesLoaded: ( instance, numFilesLoaded ) => {
            console.log( `CodeEditor: ${ numFilesLoaded } files loaded!` );
            instance.loadTab("js_sample.js");
        },
        xonCreateFile: ( instance ) => {
            return { name: "new_shader.wgsl", language: "WGSL" }
        }
    });

    // editor.loadFile("../data/animation.bml", { language: "JSON" });
    // editor.loadFile("../data/CMakeLists.txt", { language: "CMake" });

    if( !fileExplorer )
    {
        var ctx = canvas.getContext("2d");
        ctx.fillStyle = "#b7a9b1";
        ctx.font = "48px Monospace";
        ctx.strokeStyle = "#ff1999";

        function loop(dt) {

            var ctx = canvas.getContext("2d");

            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.strokeText("Lexgui.js @jxarco", 200, 300);

            requestAnimationFrame(loop);
        }

        requestAnimationFrame(loop);
    }

</script>

</html>