{"version":3,"file":"AssetView.js","sources":["../../src/extensions/AssetView.ts"],"sourcesContent":["// AssetView.ts @jxarco\r\n\r\nimport { LX } from '../core/Namespace';\r\nimport { Pagination } from '../components/Pagination';\r\n\r\nif( !LX )\r\n{\r\n    throw( \"Missing LX namespace!\" );\r\n}\r\n\r\nLX.extensions.push( 'AssetView' );\r\n\r\nconst Area = LX.Area;\r\nconst Panel = LX.Panel;\r\nconst NodeTree = LX.NodeTree;\r\nconst TreeEvent = LX.TreeEvent;\r\nconst ContextMenu = LX.ContextMenu;\r\n\r\nexport class AssetViewEvent\r\n{\r\n    static NONE             = 0;\r\n    static ASSET_SELECTED   = 1;\r\n    static ASSET_DELETED    = 2;\r\n    static ASSET_RENAMED    = 3;\r\n    static ASSET_CLONED     = 4;\r\n    static ASSET_DBLCLICKED = 5;\r\n    static ASSET_CHECKED    = 6;\r\n    static ENTER_FOLDER     = 7;\r\n\r\n    type: number;\r\n    item: any;\r\n    value: any;\r\n    multiple: boolean = false; // Multiple selection\r\n\r\n    constructor( type: number, item: any, value?: any )\r\n    {\r\n        this.type = type || LX.TreeEvent.NONE;\r\n        this.item = item;\r\n        this.value = value;\r\n    }\r\n\r\n    string()\r\n    {\r\n        switch( this.type )\r\n        {\r\n            case AssetViewEvent.NONE: return \"assetview_event_none\";\r\n            case AssetViewEvent.ASSET_SELECTED: return \"assetview_event_selected\";\r\n            case AssetViewEvent.ASSET_DELETED: return \"assetview_event_deleted\";\r\n            case AssetViewEvent.ASSET_RENAMED: return \"assetview_event_renamed\";\r\n            case AssetViewEvent.ASSET_CLONED: return \"assetview_event_cloned\";\r\n            case AssetViewEvent.ASSET_DBLCLICKED: return \"assetview_event_dblclicked\";\r\n            case AssetViewEvent.ASSET_CHECKED: return \"assetview_event_checked\";\r\n            case AssetViewEvent.ENTER_FOLDER: return \"assetview_event_enter_folder\";\r\n        }\r\n    }\r\n};\r\n\r\nLX.AssetViewEvent = AssetViewEvent;\r\n\r\n/**\r\n * @class AssetView\r\n * @description Asset container with Tree for file system\r\n */\r\n\r\nexport class AssetView\r\n{\r\n    static LAYOUT_GRID          = 0;\r\n    static LAYOUT_COMPACT       = 1;\r\n    static LAYOUT_LIST          = 2;\r\n\r\n    static CONTENT_SORT_ASC     = 0;\r\n    static CONTENT_SORT_DESC    = 1;\r\n\r\n    root: HTMLElement;\r\n    area: typeof Area | null = null;\r\n    content!: HTMLElement; // \"!\" to avoid TS strict property initialization error\r\n    leftPanel: typeof Panel | null = null;\r\n    toolsPanel: any;\r\n    contentPanel: any;\r\n    previewPanel: any;\r\n    tree: typeof NodeTree | null = null;\r\n\r\n    prevData: any[] = [];\r\n    nextData: any[] = [];\r\n    data: any[] = [];\r\n    currentData: any[] = [];\r\n    currentFolder: any;\r\n    path: string[] = [];\r\n    rootPath: string = \"\";\r\n    selectedItem: any = null;\r\n    allowedTypes: any;\r\n    searchValue: string = \"\";\r\n    filter: string = \"None\";\r\n    gridScale: number = 1.0;\r\n\r\n    // Options\r\n    layout: number = AssetView.LAYOUT_GRID;\r\n    sortMode: number = AssetView.CONTENT_SORT_ASC;\r\n    skipBrowser: boolean = false;\r\n    skipPreview: boolean = false;\r\n    useNativeTitle: boolean = false;\r\n    onlyFolders: boolean = true;\r\n    allowMultipleSelection: boolean = false;\r\n    previewActions: any[] = [];\r\n    contextMenu: any[] = [];\r\n    onRefreshContent: any = null;\r\n    itemContextMenuOptions: any = null;\r\n    onItemDragged: any = null;\r\n    onevent: any = null;\r\n\r\n    private _assetsPerPage: number = 24;\r\n    get assetsPerPage(): any { return this._assetsPerPage; }\r\n    set assetsPerPage( v: any ) { this._setAssetsPerPage( v ); }\r\n\r\n    _lastSortBy: string = \"\";\r\n    _paginator: Pagination | undefined;\r\n\r\n    constructor( options: any = {} )\r\n    {\r\n        this.rootPath = \"https://raw.githubusercontent.com/jxarco/lexgui.js/master/\";\r\n        this.layout = options.layout ?? this.layout;\r\n        this.sortMode = options.sortMode ?? this.sortMode;\r\n\r\n        if( options.rootPath )\r\n        {\r\n            if( options.rootPath.constructor !== String )\r\n            {\r\n                console.warn( `Asset Root Path must be a String (now is a ${ options.rootPath.constructor.name })` );\r\n            }\r\n            else\r\n            {\r\n                this.rootPath = options.rootPath;\r\n            }\r\n        }\r\n\r\n        let div = document.createElement('div');\r\n        div.className = 'lexassetbrowser';\r\n        this.root = div;\r\n\r\n        let area = new Area( { width: \"100%\", height: \"100%\" } );\r\n        div.appendChild( area.root );\r\n\r\n        let left, right, contentArea = area;\r\n\r\n        this.skipBrowser = options.skipBrowser ?? this.skipBrowser;\r\n        this.skipPreview = options.skipPreview ?? this.skipPreview;\r\n        this.useNativeTitle = options.useNativeTitle ?? this.useNativeTitle;\r\n        this.onlyFolders = options.onlyFolders ?? this.onlyFolders;\r\n        this.allowMultipleSelection = options.allowMultipleSelection ?? this.allowMultipleSelection;\r\n        this.previewActions = options.previewActions ?? [];\r\n        this.itemContextMenuOptions = options.itemContextMenuOptions;\r\n        this.onRefreshContent = options.onRefreshContent;\r\n        this.onItemDragged = options.onItemDragged;\r\n        this.gridScale = options.gridScale ?? this.gridScale;\r\n\r\n        if( this.gridScale !== 1.0 )\r\n        {\r\n            const r: any = document.querySelector( ':root' );\r\n            r.style.setProperty( '--av-grid-scale', this.gridScale );\r\n        }\r\n\r\n        // Append temporarily to the dom\r\n        document.body.appendChild( this.root );\r\n\r\n        if( !this.skipBrowser )\r\n        {\r\n            [ left, right ] = area.split({ type: \"horizontal\", sizes: [\"15%\", \"85%\"]});\r\n            contentArea = right;\r\n\r\n            left.setLimitBox( 210, 0 );\r\n            right.setLimitBox( 512, 0 );\r\n        }\r\n\r\n        if( !this.skipPreview )\r\n        {\r\n            [ contentArea, right ] = contentArea.split({ type: \"horizontal\", sizes: [\"80%\", \"20%\"]});\r\n        }\r\n\r\n        this.allowedTypes = {\r\n            \"None\": {},\r\n            \"Image\": { color: \"yellow-500\" },\r\n            \"JSON\": { color: \"sky-200\" },\r\n            \"Video\": { color: \"indigo-400\" },\r\n            ...( options.allowedTypes ?? {} )\r\n        };\r\n\r\n        this._processData( this.data, null );\r\n\r\n        this.currentFolder = null;\r\n        this.currentData = this.data;\r\n        this.path = ['@'];\r\n\r\n        if( !this.skipBrowser )\r\n        {\r\n            this._createTreePanel( left );\r\n        }\r\n\r\n        this._createContentPanel( contentArea );\r\n\r\n        // Create resource preview panel\r\n        if( !this.skipPreview )\r\n        {\r\n            this.previewPanel = right.addPanel( {className: 'lexassetcontentpanel', style: { overflow: 'scroll' }} );\r\n        }\r\n\r\n        // Clean up\r\n        document.body.removeChild( this.root );\r\n    }\r\n\r\n    /**\r\n    * @method load\r\n    */\r\n\r\n    load( data: any, onevent: any )\r\n    {\r\n        this.prevData.length = 0;\r\n        this.nextData.length = 0;\r\n\r\n        this.data = data;\r\n\r\n        this._processData( this.data, null );\r\n        this.currentData = this.data;\r\n        this.path = [ '@' ];\r\n\r\n        if( !this.skipBrowser )\r\n        {\r\n            this.tree.refresh( {\r\n                id: '/',\r\n                children: this.data\r\n            } );\r\n        }\r\n\r\n        this._refreshContent();\r\n\r\n        this.onevent = onevent;\r\n    }\r\n\r\n    /**\r\n    * @method addItem\r\n    */\r\n\r\n    addItem( item: any, childIndex: number | undefined, updateTree: boolean = true )\r\n    {\r\n        const isListLayout = ( this.layout == AssetView.LAYOUT_LIST );\r\n        const isGridLayout = ( this.layout == AssetView.LAYOUT_GRID ); // default\r\n        const type = item.type.charAt( 0 ).toUpperCase() + item.type.slice( 1 );\r\n        const extension = LX.getExtension( item.id );\r\n        const isFolder = type === \"Folder\";\r\n        const that = this;\r\n\r\n        let itemEl = document.createElement('li');\r\n        itemEl.className = \"lexassetitem \" + item.type.toLowerCase();\r\n        itemEl.tabIndex = -1;\r\n        LX.insertChildAtIndex( this.content, itemEl, childIndex );\r\n\r\n        const typeColor = this.allowedTypes[ type ]?.color;\r\n        if( typeColor )\r\n        {\r\n            // Add type tag\r\n            LX.makeElement( 'span', `rounded-full w-2 h-2 z-100 flex absolute ml-2 mt-2 bg-${ typeColor }`, \"\", itemEl );\r\n        }\r\n\r\n        if( !item.uid )\r\n        {\r\n            item.uid = LX.guidGenerator();\r\n        }\r\n\r\n        if( item.lastModified && !item.lastModifiedDate )\r\n        {\r\n            item.lastModifiedDate = this._lastModifiedToStringDate( item.lastModified );\r\n        }\r\n\r\n        if( !this.useNativeTitle )\r\n        {\r\n            let desc = document.createElement( 'span' );\r\n            desc.className = 'lexitemdesc';\r\n            desc.id = `floatingTitle_${ item.uid }`;\r\n            desc.innerHTML = `File: ${ item.id }<br>Type: ${ type }`;\r\n            LX.insertChildAtIndex( this.content, desc, childIndex ? childIndex + 1 : undefined );\r\n\r\n            itemEl.addEventListener( \"mousemove\", ( e: MouseEvent ) => {\r\n\r\n                if( !isGridLayout )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                const target: any = e.target;\r\n                const dialog = itemEl.closest('dialog');\r\n                const rect = itemEl.getBoundingClientRect();\r\n                const targetRect = target.getBoundingClientRect();\r\n\r\n                let localOffsetX = rect.x + e.offsetX;\r\n                let localOffsetY = rect.y + e.offsetY;\r\n\r\n                if( dialog )\r\n                {\r\n                    const dialogRect = dialog.getBoundingClientRect();\r\n                    localOffsetX -= dialogRect.x;\r\n                    localOffsetY -= dialogRect.y;\r\n                }\r\n\r\n                if( target.classList.contains( \"lexassettitle\" ) )\r\n                {\r\n                    localOffsetY += ( targetRect.y - rect.y );\r\n                }\r\n\r\n                desc.style.left = ( localOffsetX ) + \"px\";\r\n                desc.style.top = ( localOffsetY - 36 ) + \"px\";\r\n            } );\r\n        }\r\n        else\r\n        {\r\n            itemEl.title = type + \": \" + item.id;\r\n        }\r\n\r\n        if( this.allowMultipleSelection )\r\n        {\r\n            let checkbox = document.createElement( 'input' );\r\n            checkbox.type = \"checkbox\";\r\n            checkbox.className = \"lexcheckbox\";\r\n            checkbox.checked = item.selected;\r\n            checkbox.addEventListener('change', ( e: any ) => {\r\n                item.selected = !item.selected;\r\n                if( this.onevent )\r\n                {\r\n                    const event = new AssetViewEvent(AssetViewEvent.ASSET_CHECKED, e.shiftKey ? [item] : item );\r\n                    event.multiple = !!e.shiftKey;\r\n                    this.onevent( event );\r\n                }\r\n                e.stopPropagation();\r\n                e.stopImmediatePropagation();\r\n            });\r\n\r\n            itemEl.appendChild( checkbox );\r\n        }\r\n\r\n        let title = document.createElement('span');\r\n        title.className = \"lexassettitle\";\r\n        title.innerText = item.id;\r\n        itemEl.appendChild( title );\r\n\r\n        if( !this.skipPreview )\r\n        {\r\n            if( item.type === 'video' )\r\n            {\r\n                const itemVideo = LX.makeElement( 'video', 'absolute left-0 top-0 w-full border-none pointer-events-none', '', itemEl );\r\n                itemVideo.setAttribute( 'disablePictureInPicture', false );\r\n                itemVideo.setAttribute( 'disableRemotePlayback', false );\r\n                itemVideo.setAttribute( 'loop', true );\r\n                itemVideo.setAttribute( 'async', true );\r\n                itemVideo.style.transition = 'opacity 0.2s ease-out';\r\n                itemVideo.style.opacity = item.preview ? '0' : '1';\r\n                itemVideo.src = item.src;\r\n                itemVideo.volume = item.videoVolume ?? 0.4;\r\n            }\r\n\r\n            let preview = null;\r\n\r\n            const previewSrc    = item.preview ?? item.src;\r\n            const hasImage = previewSrc && (\r\n                (() => {\r\n                    const ext = LX.getExtension( previewSrc.split( '?' )[ 0 ].split( '#' )[ 0 ]); // get final source without url parameters/anchors\r\n                    return ext ? ['png', 'jpg', 'jpeg', 'gif', 'bmp', 'avif'].includes( ext.toLowerCase() ) : false;\r\n                })()\r\n                || previewSrc.startsWith( 'data:image/' )\r\n            );\r\n\r\n            if( hasImage || isFolder || !isGridLayout )\r\n            {\r\n                const defaultPreviewPath    = `${ this.rootPath }images/file.png`;\r\n                const defaultFolderPath     = `${ this.rootPath }images/folder.png`;\r\n\r\n                preview = document.createElement('img');\r\n                let realSrc = item.unknownExtension ? defaultPreviewPath : ( isFolder ? defaultFolderPath : previewSrc );\r\n                preview.src = ( isGridLayout || isFolder ? realSrc : defaultPreviewPath );\r\n                itemEl.appendChild( preview );\r\n            }\r\n            else\r\n            {\r\n                preview = document.createElement( 'svg' );\r\n                preview.className = 'asset-file-preview';\r\n                itemEl.appendChild( preview );\r\n\r\n                let textEl = document.createElement( 'text' );\r\n                textEl.innerText = ( !extension || extension == item.id ) ? item.type.toUpperCase() : ( `${ extension.toUpperCase() }` ); // If no extension, e.g. Clip, use the type...\r\n                preview.appendChild( textEl );\r\n\r\n                var newLength = textEl.innerText.length;\r\n                var charsPerLine = 2.5;\r\n                var newEmSize = charsPerLine / newLength;\r\n                var textBaseSize = 64;\r\n\r\n                if( newEmSize < 1 )\r\n                {\r\n                    var newFontSize = newEmSize * textBaseSize;\r\n                    textEl.style.fontSize = newFontSize + 'px';\r\n                    preview.style.paddingTop = `calc(50% - ${ ( textEl.offsetHeight * 0.5 + 10 ) }px)`;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Add item type info\r\n        let itemInfoHtml = type;\r\n\r\n        if( isListLayout )\r\n        {\r\n            if( item.bytesize ) itemInfoHtml += ` | ${ LX.formatBytes( item.bytesize ) }`;\r\n            if( item.lastModifiedDate ) itemInfoHtml += ` | ${ item.lastModifiedDate }`;\r\n        }\r\n\r\n        LX.makeContainer( [ 'auto', 'auto' ], 'lexassetinfo', itemInfoHtml, itemEl );\r\n\r\n        itemEl.addEventListener('click', function( e )\r\n        {\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n\r\n            const isDoubleClick = ( e.detail == LX.MOUSE_DOUBLE_CLICK );\r\n\r\n            if( !isDoubleClick )\r\n            {\r\n                if( !e.shiftKey )\r\n                {\r\n                    that.content.querySelectorAll( '.lexassetitem').forEach( i => i.classList.remove( 'selected' ) );\r\n                }\r\n\r\n                this.classList.add( 'selected' );\r\n                that.selectedItem = item;\r\n\r\n                if( !that.skipPreview )\r\n                {\r\n                    that._previewAsset( item );\r\n                }\r\n            }\r\n            else if( isFolder )\r\n            {\r\n                that._enterFolder( item );\r\n                return;\r\n            }\r\n\r\n            if( that.onevent )\r\n            {\r\n                const event = new AssetViewEvent(isDoubleClick ? AssetViewEvent.ASSET_DBLCLICKED : AssetViewEvent.ASSET_SELECTED, e.shiftKey ? [item] : item );\r\n                event.multiple = !!e.shiftKey;\r\n                that.onevent( event );\r\n            }\r\n        });\r\n\r\n        itemEl.addEventListener('contextmenu', function( e )\r\n        {\r\n            e.preventDefault();\r\n\r\n            const multiple = that.content.querySelectorAll('.selected').length;\r\n\r\n            LX.addContextMenu( multiple > 1 ? ( multiple + \" selected\" ) : isFolder ? item.id : item.type, e, ( m: typeof ContextMenu ) =>\r\n            {\r\n                if( multiple <= 1 )\r\n                {\r\n                    m.add(\"Rename\", that._renameItem.bind( that, item ));\r\n                }\r\n\r\n                if( !isFolder )\r\n                {\r\n                    m.add(\"Clone\", that._cloneItem.bind( that, item ));\r\n                }\r\n\r\n                m.add(\"Delete\", that._deleteItem.bind( that, item ));\r\n\r\n                if( that.itemContextMenuOptions )\r\n                {\r\n                    m.add(\"\");\r\n\r\n                    for( let o of that.itemContextMenuOptions )\r\n                    {\r\n                        if( !o.name || !o.callback ) continue;\r\n                        m.add( o.name, o.callback?.bind( that, item ) );\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        itemEl.addEventListener(\"dragstart\", function( e ) {\r\n            e.preventDefault();\r\n        }, false );\r\n\r\n        itemEl.addEventListener( \"mouseenter\", ( e: MouseEvent ) =>\r\n        {\r\n            if( !that.useNativeTitle && isGridLayout )\r\n            {\r\n                const desc: HTMLElement | null = that.content.querySelector( `#floatingTitle_${ item.uid }` );\r\n                if( desc ) desc.style.display = \"unset\";\r\n            }\r\n\r\n            if( item.type !== \"video\" ) return;\r\n            e.preventDefault();\r\n            const video: any = itemEl.querySelector( \"video\" );\r\n            video.style.opacity = \"1\";\r\n            video.play();\r\n        } );\r\n\r\n        itemEl.addEventListener( \"mouseleave\", ( e: MouseEvent ) =>\r\n        {\r\n            if( !that.useNativeTitle && isGridLayout )\r\n            {\r\n                setTimeout( () => {\r\n                    const desc: HTMLElement | null = that.content.querySelector( `#floatingTitle_${ item.uid }` );\r\n                    if( desc ) desc.style.display = \"none\";\r\n                }, 100 );\r\n            }\r\n\r\n            if( item.type !== \"video\" ) return;\r\n            e.preventDefault();\r\n            const video: any = itemEl.querySelector( \"video\" );\r\n            video.pause();\r\n            video.currentTime = 0;\r\n            if( item.preview )\r\n            {\r\n                video.style.opacity = \"0\";\r\n            }\r\n        } );\r\n\r\n        if( !this.skipBrowser && updateTree )\r\n        {\r\n            this.tree.refresh();\r\n        }\r\n\r\n        return itemEl;\r\n    }\r\n\r\n    /**\r\n    * @method clear\r\n    */\r\n    clear()\r\n    {\r\n        if( this.previewPanel )\r\n        {\r\n            this.previewPanel.clear();\r\n        }\r\n\r\n        if( this.leftPanel )\r\n        {\r\n            this.leftPanel.clear();\r\n        }\r\n\r\n        if( this.toolsPanel )\r\n        {\r\n            this.toolsPanel.clear()\r\n        }\r\n    }\r\n\r\n    /**\r\n    * @method _processData\r\n    */\r\n\r\n    _processData( data: any, parent?: any )\r\n    {\r\n        if( data.constructor !== Array )\r\n        {\r\n            data[ 'folder' ] = parent;\r\n            data.children = data.children ?? [];\r\n        }\r\n\r\n        let list = data.constructor === Array ? data : data.children;\r\n\r\n        for( var i = 0; i < list.length; ++i )\r\n        {\r\n            this._processData( list[ i ], data );\r\n        }\r\n    }\r\n\r\n    /**\r\n    * @method _updatePath\r\n    */\r\n\r\n    _updatePath()\r\n    {\r\n        this.path.length = 0;\r\n\r\n        if( this.currentFolder && this.currentFolder.parent )\r\n        {\r\n            this.path.push( this.currentFolder.id );\r\n\r\n            const _pushParentsId = ( i: any ) => {\r\n                if( !i ) return;\r\n                this.path.push( i.parent ? i.id : '@' );\r\n                _pushParentsId( i.parent );\r\n            };\r\n\r\n            _pushParentsId( this.currentFolder.parent );\r\n        }\r\n        else\r\n        {\r\n            this.path.push( '@' );\r\n        }\r\n\r\n        LX.emitSignal( \"@on_folder_change\", this.path.reverse().join('/') );\r\n    }\r\n\r\n    /**\r\n    * @method _createTreePanel\r\n    */\r\n\r\n    _createTreePanel( area: typeof Area )\r\n    {\r\n        if( this.leftPanel )\r\n        {\r\n            this.leftPanel.clear();\r\n        }\r\n        else\r\n        {\r\n            this.leftPanel = area.addPanel({ className: 'lexassetbrowserpanel' });\r\n        }\r\n\r\n        // Process data to show in tree\r\n        let tree_data = {\r\n            id: '/',\r\n            children: this.data\r\n        }\r\n\r\n        this.leftPanel.sameLine( 2, \"justify-center\" );\r\n        this.leftPanel.addButton( null, \"GoBackButton\", () => {\r\n            if( !this.prevData.length || !this.currentFolder ) return;\r\n            this.nextData.push( this.currentFolder );\r\n            this._enterFolder( this.prevData.pop(), false )\r\n        }, { buttonClass: \"bg-none\", title: \"Go Back\", tooltip: true, icon: \"ArrowLeft\" } );\r\n\r\n        this.leftPanel.addButton( null, \"GoForwardButton\", () => {\r\n            if( !this.nextData.length || !this.currentFolder ) return;\r\n            this._enterFolder( this.nextData.pop() );\r\n        }, { buttonClass: \"bg-none\", title: \"Go Forward\", tooltip: true, icon: \"ArrowRight\" } );\r\n\r\n        const tree = this.leftPanel.addTree( \"Content Browser\", tree_data, {\r\n            // icons: tree_icons,\r\n            filter: false,\r\n            onlyFolders: this.onlyFolders,\r\n            onevent: ( event: typeof TreeEvent ) => {\r\n\r\n                let node = event.node;\r\n                let value = event.value;\r\n\r\n                switch( event.type )\r\n                {\r\n                    case LX.TreeEvent.NODE_SELECTED:\r\n                    {\r\n                        if( event.multiple )\r\n                        {\r\n                            return;\r\n                        }\r\n                        if( !node.parent )\r\n                        {\r\n                            if( this.currentFolder )\r\n                            {\r\n                                this.prevData.push( this.currentFolder );\r\n                            }\r\n\r\n                            this.currentFolder = null;\r\n                            this.currentData = this.data;\r\n                            this._refreshContent();\r\n                            this._updatePath();\r\n                        }\r\n                        else\r\n                        {\r\n                            this._enterFolder( node.type === \"folder\" ? node : node.parent );\r\n\r\n                            this._previewAsset( node );\r\n\r\n                            if( node.type !== \"folder\" )\r\n                            {\r\n                                this.content.querySelectorAll( '.lexassetitem').forEach( i => i.classList.remove( 'selected' ) );\r\n                                const dom = node.domEl;\r\n                                dom?.classList.add( 'selected' );\r\n                            }\r\n\r\n                            this.selectedItem = node;\r\n                        }\r\n                        break;\r\n                    }\r\n                    case LX.TreeEvent.NODE_DRAGGED:\r\n                    {\r\n                        if( node.parent )\r\n                        {\r\n                            const idx = node.parent.children.indexOf( node );\r\n                            node.parent.children.splice( idx, 1 );\r\n                        }\r\n\r\n                        node.folder = node.parent = value;\r\n\r\n                        if( !value.children ) value.children = [];\r\n\r\n                        value.children.push( node );\r\n\r\n                        if( this.onItemDragged )\r\n                        {\r\n                            this.onItemDragged( node, value );\r\n                        }\r\n\r\n                        this._refreshContent();\r\n                        break;\r\n                    }\r\n                }\r\n            },\r\n        });\r\n\r\n        this.tree = tree.innerTree;\r\n    }\r\n\r\n    /**\r\n    * @method _setContentLayout\r\n    */\r\n\r\n    _setContentLayout( layoutMode: number )\r\n    {\r\n        this.layout = layoutMode;\r\n        this.toolsPanel.refresh();\r\n        this._refreshContent();\r\n    }\r\n\r\n    /**\r\n    * @method _createContentPanel\r\n    */\r\n\r\n    _createContentPanel( area: typeof Area )\r\n    {\r\n        if( this.toolsPanel )\r\n        {\r\n            this.contentPanel.clear();\r\n        }\r\n        else\r\n        {\r\n            this.toolsPanel = area.addPanel({ className: 'overflow-hidden', height: \"auto\" });\r\n            this.contentPanel = area.addPanel({\r\n                className: 'lexassetcontentpanel flex flex-col content-center overflow-hidden',\r\n                height: \"calc(100%)\"\r\n            });\r\n\r\n            this._paginator = new Pagination( {\r\n                className: \"ml-auto\",\r\n                pages: Math.max( Math.ceil( this.data.length / this.assetsPerPage ), 1 ),\r\n                onChange: () => this._refreshContent()\r\n            } );\r\n\r\n            const resizeObserver = new ResizeObserver( entries => {\r\n                const e = entries[ 0 ];\r\n                if( e )\r\n                {\r\n                    this.contentPanel.root.style.height = `calc(100% - ${ ( e.contentRect.height + 8 ) }px )`;\r\n                }\r\n            });\r\n\r\n            resizeObserver.observe( this.toolsPanel.root );\r\n\r\n            this.contentPanel.root.addEventListener( 'wheel', ( e: WheelEvent ) =>\r\n            {\r\n                if( !e.ctrlKey ) return;\r\n                e.preventDefault();\r\n                this.gridScale *= ( e.deltaY < 0 ? 1.05 : 0.95 );\r\n                this.gridScale = LX.clamp( this.gridScale, 0.5, 2.0 );\r\n                const r: any = document.querySelector( ':root' );\r\n                r.style.setProperty( '--av-grid-scale', this.gridScale );\r\n            });\r\n        }\r\n\r\n        const _onSort = ( value: any, event: any ) =>\r\n        {\r\n            new LX.DropdownMenu( event.target, [\r\n                { name: \"Name\", icon: \"ALargeSmall\", callback: () => this._sortData( \"id\" ) },\r\n                { name: \"Type\", icon: \"Type\", callback: () => this._sortData( \"type\" ) },\r\n                null,\r\n                { name: \"Ascending\", icon: \"SortAsc\", callback: () => this._sortData( undefined, AssetView.CONTENT_SORT_ASC ) },\r\n                { name: \"Descending\", icon: \"SortDesc\", callback: () => this._sortData( undefined, AssetView.CONTENT_SORT_DESC ) }\r\n            ], { side: \"bottom\", align: \"start\" });\r\n        };\r\n\r\n        const _onChangeView = ( value: any, event: any ) =>\r\n        {\r\n            new LX.DropdownMenu( event.target, [\r\n                { name: \"Grid\", icon: \"LayoutGrid\", callback: () => this._setContentLayout( AssetView.LAYOUT_GRID ) },\r\n                { name: \"Compact\", icon: \"LayoutList\", callback: () => this._setContentLayout( AssetView.LAYOUT_COMPACT ) },\r\n                { name: \"List\", icon: \"List\", callback: () => this._setContentLayout( AssetView.LAYOUT_LIST ) }\r\n            ], { side: \"bottom\", align: \"start\" });\r\n        };\r\n\r\n        this.toolsPanel.refresh = () =>\r\n        {\r\n            this.toolsPanel.clear();\r\n\r\n            const typeEntries = Object.keys( this.allowedTypes );\r\n\r\n            this.toolsPanel.sameLine();\r\n            this.toolsPanel.addText( null, this.searchValue ?? \"\", ( v: string ) => this._refreshContent.call( this, v, undefined ), { width: \"100%\", placeholder: \"Search assets..\" } );\r\n            this.toolsPanel.endLine();\r\n\r\n            this.toolsPanel.sameLine();\r\n            const refreshButton = this.toolsPanel.addButton( null, \"\", this._refreshContent.bind( this ), { title: \"Refresh\", tooltip: true, icon: \"Refresh\" } );\r\n            this.toolsPanel.addButton( null, \"\", _onSort.bind( this ), { title: \"Sort\", tooltip: true, icon: ( this.sortMode === AssetView.CONTENT_SORT_ASC ) ? \"SortAsc\" : \"SortDesc\" } );\r\n            this.toolsPanel.addButton( null, \"\", _onChangeView.bind( this ), { title: \"View\", tooltip: true, icon: ( this.layout === AssetView.LAYOUT_GRID ) ? \"LayoutGrid\" : \"LayoutList\" } );\r\n            this.toolsPanel.addSelect( null, typeEntries, this.filter ?? typeEntries[ 0 ], ( v: any ) => {\r\n                this._refreshContent( undefined, v );\r\n            }, { overflowContainer: null } );\r\n\r\n            // Float to the end\r\n\r\n            this.toolsPanel.endLine();\r\n\r\n            if( this._paginator )\r\n            {\r\n                const inlineContainer = refreshButton.root.parentElement;\r\n                inlineContainer.appendChild( this._paginator.root );\r\n            }\r\n        };\r\n\r\n        // Start content panel\r\n\r\n        this.content = document.createElement( 'ul' );\r\n        this.content.className = \"lexassetscontent\";\r\n        this.contentPanel.attach( this.content );\r\n\r\n        if( !this.skipBrowser )\r\n        {\r\n            this.contentPanel.addText( null, this.path.join('/'), null, {\r\n                inputClass: \"bg-none fg-quinary text-end\",\r\n                disabled: true,\r\n                signal: \"@on_folder_change\"\r\n            });\r\n        }\r\n\r\n        this.content.addEventListener( 'dragenter', function( e: DragEvent ) {\r\n            e.preventDefault();\r\n            this.classList.add( 'dragging' );\r\n        });\r\n\r\n        this.content.addEventListener( 'dragleave', function( e: DragEvent ) {\r\n            e.preventDefault();\r\n            this.classList.remove( 'dragging' );\r\n        });\r\n\r\n        this.content.addEventListener( 'drop', ( e: DragEvent ) =>\r\n        {\r\n            e.preventDefault();\r\n            this._processDrop( e );\r\n        });\r\n\r\n        this.content.addEventListener( 'click', function()\r\n        {\r\n            this.querySelectorAll('.lexassetitem').forEach( i => i.classList.remove('selected') );\r\n        });\r\n\r\n        this._refreshContent();\r\n\r\n        // After content to update the size of the content based on the toolbar\r\n        LX.doAsync( () => this.toolsPanel.refresh(), 100 );\r\n    }\r\n\r\n    _refreshContent( searchValue?: string, filter?: string )\r\n    {\r\n        const isCompactLayout = ( this.layout == AssetView.LAYOUT_COMPACT );\r\n        const isListLayout = ( this.layout == AssetView.LAYOUT_LIST );\r\n\r\n        this.filter = filter ?? ( this.filter ?? \"None\" );\r\n        this.searchValue = searchValue ?? ( this.searchValue ?? \"\" );\r\n        this.content.innerHTML = \"\";\r\n        this.content.className = `lexassetscontent${ isCompactLayout ? \" compact\" : ( isListLayout ? \" list\" : \"\" ) }`;\r\n\r\n        if( !this.currentData.length )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const fr = new FileReader();\r\n\r\n        const filteredData = this.currentData.filter( _i => {\r\n            return (this.filter != \"None\" ? _i.type.toLowerCase() == this.filter.toLowerCase() : true) &&\r\n                _i.id.toLowerCase().includes(this.searchValue.toLowerCase())\r\n        } );\r\n\r\n        // if( filter || searchValue )\r\n        // {\r\n        //     this.contentPage = 1;\r\n        // }\r\n\r\n        this._paginator?.setPages( Math.max( Math.ceil( this.data.length / this.assetsPerPage ), 1 ) );\r\n\r\n        // Show all data if using filters\r\n        const start = this._paginator ? ( this._paginator.page - 1 ) * this.assetsPerPage : 0;\r\n        const end = this._paginator ? Math.min( start + this.assetsPerPage, filteredData.length ) : filteredData.length;\r\n\r\n        for( let i = start; i < end; ++i )\r\n        {\r\n            let item = filteredData[ i ];\r\n\r\n            if( item.path )\r\n            {\r\n                LX.request({ url: item.path, dataType: 'blob', success: ( f: File ) => {\r\n                    item.bytesize = f.size;\r\n                    fr.readAsDataURL( f );\r\n                    fr.onload = e => {\r\n                        const target = e.currentTarget as any;\r\n                        item.src = target.result;  // This is a base64 string...\r\n                        item._path = item.path;\r\n                        delete item.path;\r\n                        this._refreshContent( searchValue, filter );\r\n                    };\r\n                } });\r\n            }\r\n            else\r\n            {\r\n                item.domEl = this.addItem( item, undefined, false );\r\n            }\r\n        }\r\n\r\n        // this.allowNextPage = filteredData.length - 1 > AssetView.MAX_PAGE_ELEMENTS;\r\n\r\n        // const textString = \"Page \" + this.contentPage + \" / \" + ((((filteredData.length - 1) / AssetView.MAX_PAGE_ELEMENTS )|0) + 1);\r\n        // LX.emitSignal( \"@on_page_change\", textString );\r\n\r\n        if( this.onRefreshContent )\r\n        {\r\n            this.onRefreshContent( searchValue, filter );\r\n        }\r\n    }\r\n\r\n    /**\r\n    * @method _previewAsset\r\n    */\r\n\r\n    _previewAsset( file: any )\r\n    {\r\n        if( this.skipPreview )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const is_base_64 = file.src && file.src.includes(\"data:image/\");\r\n\r\n        this.previewPanel.clear();\r\n        this.previewPanel.branch(\"Asset\");\r\n\r\n        if( file.type == 'image' || file.src )\r\n        {\r\n            const hasImage = ['png', 'jpg'].indexOf( LX.getExtension( file.src ) ) > -1 || is_base_64;\r\n            if( hasImage )\r\n            {\r\n                this.previewPanel.addImage( null, file.src, { style: { width: \"100%\" } } );\r\n            }\r\n        }\r\n\r\n        if( file.lastModified && !file.lastModifiedDate )\r\n        {\r\n            file.lastModifiedDate = this._lastModifiedToStringDate( file.lastModified );\r\n        }\r\n\r\n        const options = { disabled: true };\r\n\r\n        this.previewPanel.addText(\"Filename\", file.id, null, options);\r\n        if( file.lastModifiedDate ) this.previewPanel.addText(\"Last Modified\", file.lastModifiedDate, null, options);\r\n        if( file._path || file.src ) this.previewPanel.addText(\"URL\", file._path ? file._path : file.src, null, options);\r\n        this.previewPanel.addText(\"Path\", this.path.join('/'), null, options);\r\n        this.previewPanel.addText(\"Type\", file.type, null, options);\r\n        if( file.bytesize ) this.previewPanel.addText(\"Size\", LX.formatBytes( file.bytesize ), null, options);\r\n        if( file.type == \"folder\" ) this.previewPanel.addText(\"Files\", file.children ? file.children.length.toString() : \"0\", null, options);\r\n\r\n        this.previewPanel.addSeparator();\r\n\r\n        const previewActions = [...this.previewActions];\r\n\r\n        if( !previewActions.length && file.type !== \"folder\" )\r\n        {\r\n            // By default\r\n            previewActions.push({\r\n                name: 'Download',\r\n                callback: () => LX.downloadURL(file.src, file.id)\r\n            });\r\n        }\r\n\r\n        for( let action of previewActions )\r\n        {\r\n            if( action.type && action.type !== file.type || action.path && action.path !== this.path.join('/') )\r\n            {\r\n                continue;\r\n            }\r\n            this.previewPanel.addButton( null, action.name, action.callback.bind( this, file ) );\r\n        }\r\n\r\n        this.previewPanel.merge();\r\n    }\r\n\r\n    _processDrop( e: DragEvent )\r\n    {\r\n        if( !e.dataTransfer || !e.dataTransfer.files || e.dataTransfer.files.length == 0 )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const fr = new FileReader();\r\n        const num_files = e.dataTransfer.files.length;\r\n\r\n        for( let i = 0; i < e.dataTransfer.files.length; ++i )\r\n        {\r\n            const file = e.dataTransfer.files[ i ];\r\n\r\n            const result = this.currentData.find( e => e.id === file.name );\r\n            if(result) continue;\r\n\r\n            fr.readAsDataURL( file );\r\n            fr.onload = e => {\r\n\r\n                let ext = file.name.substring( file.name.lastIndexOf('.') + 1 ).toLowerCase();\r\n\r\n                let item: any = {\r\n                    \"id\": file.name,\r\n                    \"src\": ( e.currentTarget as any ).result,\r\n                    \"extension\": ext,\r\n                    \"lastModified\": file.lastModified,\r\n                    \"lastModifiedDate\": this._lastModifiedToStringDate( file.lastModified )\r\n                };\r\n\r\n                switch(ext)\r\n                {\r\n                case 'png':\r\n                case 'jpg':\r\n                    item.type = \"image\"; break;\r\n                case 'js':\r\n                case 'css':\r\n                    item.type = \"script\"; break;\r\n                case 'json':\r\n                    item.type = \"json\"; break;\r\n                case 'obj':\r\n                    item.type = \"mesh\"; break;\r\n                default:\r\n                    item.type = ext;\r\n                    item.unknownExtension = true;\r\n                    break;\r\n                }\r\n\r\n                this.currentData.push( item );\r\n\r\n                if( i == (num_files - 1) )\r\n                {\r\n                    this._refreshContent();\r\n                    this.tree?.refresh(); // Refresh if tree exists\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    _sortData( sortBy?: string, sortMode?: number )\r\n    {\r\n        sortBy = sortBy ?? ( this._lastSortBy ?? 'id' );\r\n        sortMode = sortMode ?? this.sortMode;\r\n        const sortDesc = ( sortMode === AssetView.CONTENT_SORT_DESC );\r\n        this.currentData = this.currentData.sort( ( a, b ) => {\r\n            var r = sortDesc ? b[ sortBy ].localeCompare( a[ sortBy ] ) : a[ sortBy ].localeCompare( b[ sortBy ] );\r\n            if( r == 0 ) r = sortDesc ? b['id'].localeCompare( a['id'] ) : a[ 'id' ].localeCompare( b[ 'id' ] );\r\n            return r;\r\n        } );\r\n\r\n        this._lastSortBy = sortBy;\r\n        this.sortMode = sortMode;\r\n        this.toolsPanel.refresh();\r\n        this._refreshContent();\r\n    }\r\n\r\n    _enterFolder( folderItem: any, storeCurrent: boolean = true )\r\n    {\r\n        const child = this.currentData[ 0 ];\r\n        const sameFolder = child?.parent?.id === folderItem.id;\r\n\r\n        if( storeCurrent )\r\n        {\r\n            this.prevData.push( this.currentFolder ?? { id: \"/\", children: this.data } );\r\n        }\r\n\r\n        this.currentFolder = folderItem;\r\n        this.currentData = this.currentFolder.children;\r\n        // this.contentPage = 1;\r\n\r\n        if( !sameFolder )\r\n        {\r\n            this._refreshContent();\r\n        }\r\n\r\n        // Update path\r\n        this._updatePath();\r\n\r\n        // Trigger event\r\n        if( this.onevent )\r\n        {\r\n            const event = new AssetViewEvent( AssetViewEvent.ENTER_FOLDER, folderItem );\r\n            this.onevent( event );\r\n        }\r\n    }\r\n\r\n    _deleteItem( item: any )\r\n    {\r\n        const idx = this.currentData.indexOf( item );\r\n        if( idx < 0 )\r\n        {\r\n            console.error( \"[AssetView Error] Cannot delete. Item not found.\" );\r\n            return;\r\n        }\r\n\r\n        this.currentData.splice( idx, 1 );\r\n        this._refreshContent( this.searchValue, this.filter );\r\n\r\n        if( this.onevent)\r\n        {\r\n            const event = new AssetViewEvent( AssetViewEvent.ASSET_DELETED, item );\r\n            this.onevent( event );\r\n        }\r\n\r\n        if( !this.skipBrowser )\r\n        {\r\n            this.tree.refresh();\r\n        }\r\n\r\n        if( this.previewPanel )\r\n        {\r\n            this.previewPanel.clear();\r\n        }\r\n\r\n        this._processData( this.data );\r\n    }\r\n\r\n    _cloneItem( item: any )\r\n    {\r\n        const idx = this.currentData.indexOf( item );\r\n        if( idx < 0 )\r\n        {\r\n            return;\r\n        }\r\n\r\n        delete item.domEl;\r\n        delete item.folder;\r\n        const new_item = LX.deepCopy( item );\r\n        this.currentData.splice( idx, 0, new_item );\r\n\r\n        this._refreshContent( this.searchValue, this.filter );\r\n\r\n        if( this.onevent )\r\n        {\r\n            const event = new AssetViewEvent( AssetViewEvent.ASSET_CLONED, item );\r\n            this.onevent( event );\r\n        }\r\n\r\n        this._processData( this.data );\r\n    }\r\n\r\n    _renameItem( item: any )\r\n    {\r\n        const idx = this.currentData.indexOf( item );\r\n        if( idx < 0 )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const oldName = item.id;\r\n        const wasSelected = LX.hasClass( item.domEl, \"selected\" );\r\n\r\n        const onRename = ( value: string ) =>\r\n        {\r\n            p.destroy();\r\n\r\n            const hoverTitle: HTMLElement | null = this.content.querySelector( `#floatingTitle_${ item.id.replace( /\\s/g, '_' ).replaceAll( \".\", \"_\" ) }` );\r\n            if( hoverTitle ) hoverTitle.remove();\r\n            item.domEl.remove();\r\n\r\n            item.id = value;\r\n            item.domEl = this.addItem( item, idx * 2 );\r\n\r\n            if( this.onevent )\r\n            {\r\n                const event = new AssetViewEvent( AssetViewEvent.ASSET_RENAMED, item, oldName );\r\n                this.onevent( event );\r\n            }\r\n\r\n            if( wasSelected )\r\n            {\r\n                this._previewAsset( item );\r\n            }\r\n\r\n            if( !this.skipBrowser )\r\n            {\r\n                this.tree.refresh();\r\n            }\r\n\r\n            this._processData( this.data );\r\n        }\r\n\r\n        let newName = item.id;\r\n        const panel = new LX.Panel();\r\n        panel.addText( null, item.id, ( v: string, e: any ) => {\r\n            newName = v;\r\n            if( e.constructor === KeyboardEvent ) onRename( v );\r\n        });\r\n        panel.addButton( null, \"Save\", () => {\r\n            onRename( newName );\r\n        }, { buttonClass: \"contrast\" });\r\n\r\n        const p = new LX.Popover( item.domEl, [ panel ], { align: \"center\", side: \"bottom\", sideOffset: -128 });\r\n    }\r\n\r\n    _setAssetsPerPage( n: number )\r\n    {\r\n        this._assetsPerPage = n;\r\n        this._refreshContent();\r\n    }\r\n\r\n    _lastModifiedToStringDate( lm: number ): string\r\n    {\r\n        const d = new Date( lm ).toLocaleString();\r\n        return d.substring( 0, d.indexOf( ',' ) );\r\n    }\r\n}\r\n\r\nLX.AssetView = AssetView;"],"names":[],"mappings":";;;;AAAA;AAKA,IAAI,CAAC,EAAE,EACP;IACI,OAAO,uBAAuB;AAClC;AAEA,EAAE,CAAC,UAAU,CAAC,IAAI,CAAE,WAAW,CAAE;AAEjC,MAAM,IAAI,GAAG,EAAE,CAAC,IAAI;AACN,EAAE,CAAC;AACA,EAAE,CAAC;AACF,EAAE,CAAC;AACD,EAAE,CAAC;MAEV,cAAc,CAAA;AAEvB,IAAA,OAAO,IAAI,GAAe,CAAC;AAC3B,IAAA,OAAO,cAAc,GAAK,CAAC;AAC3B,IAAA,OAAO,aAAa,GAAM,CAAC;AAC3B,IAAA,OAAO,aAAa,GAAM,CAAC;AAC3B,IAAA,OAAO,YAAY,GAAO,CAAC;AAC3B,IAAA,OAAO,gBAAgB,GAAG,CAAC;AAC3B,IAAA,OAAO,aAAa,GAAM,CAAC;AAC3B,IAAA,OAAO,YAAY,GAAO,CAAC;AAE3B,IAAA,IAAI;AACJ,IAAA,IAAI;AACJ,IAAA,KAAK;AACL,IAAA,QAAQ,GAAY,KAAK,CAAC;AAE1B,IAAA,WAAA,CAAa,IAAY,EAAE,IAAS,EAAE,KAAW,EAAA;QAE7C,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,SAAS,CAAC,IAAI;AACrC,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI;AAChB,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK;;IAGtB,MAAM,GAAA;AAEF,QAAA,QAAQ,IAAI,CAAC,IAAI;AAEb,YAAA,KAAK,cAAc,CAAC,IAAI,EAAE,OAAO,sBAAsB;AACvD,YAAA,KAAK,cAAc,CAAC,cAAc,EAAE,OAAO,0BAA0B;AACrE,YAAA,KAAK,cAAc,CAAC,aAAa,EAAE,OAAO,yBAAyB;AACnE,YAAA,KAAK,cAAc,CAAC,aAAa,EAAE,OAAO,yBAAyB;AACnE,YAAA,KAAK,cAAc,CAAC,YAAY,EAAE,OAAO,wBAAwB;AACjE,YAAA,KAAK,cAAc,CAAC,gBAAgB,EAAE,OAAO,4BAA4B;AACzE,YAAA,KAAK,cAAc,CAAC,aAAa,EAAE,OAAO,yBAAyB;AACnE,YAAA,KAAK,cAAc,CAAC,YAAY,EAAE,OAAO,8BAA8B;;;;AAKnF,EAAE,CAAC,cAAc,GAAG,cAAc;AAElC;;;AAGG;MAEU,SAAS,CAAA;AAElB,IAAA,OAAO,WAAW,GAAY,CAAC;AAC/B,IAAA,OAAO,cAAc,GAAS,CAAC;AAC/B,IAAA,OAAO,WAAW,GAAY,CAAC;AAE/B,IAAA,OAAO,gBAAgB,GAAO,CAAC;AAC/B,IAAA,OAAO,iBAAiB,GAAM,CAAC;AAE/B,IAAA,IAAI;IACJ,IAAI,GAAuB,IAAI;IAC/B,OAAO,CAAe;IACtB,SAAS,GAAwB,IAAI;AACrC,IAAA,UAAU;AACV,IAAA,YAAY;AACZ,IAAA,YAAY;IACZ,IAAI,GAA2B,IAAI;IAEnC,QAAQ,GAAU,EAAE;IACpB,QAAQ,GAAU,EAAE;IACpB,IAAI,GAAU,EAAE;IAChB,WAAW,GAAU,EAAE;AACvB,IAAA,aAAa;IACb,IAAI,GAAa,EAAE;IACnB,QAAQ,GAAW,EAAE;IACrB,YAAY,GAAQ,IAAI;AACxB,IAAA,YAAY;IACZ,WAAW,GAAW,EAAE;IACxB,MAAM,GAAW,MAAM;IACvB,SAAS,GAAW,GAAG;;AAGvB,IAAA,MAAM,GAAW,SAAS,CAAC,WAAW;AACtC,IAAA,QAAQ,GAAW,SAAS,CAAC,gBAAgB;IAC7C,WAAW,GAAY,KAAK;IAC5B,WAAW,GAAY,KAAK;IAC5B,cAAc,GAAY,KAAK;IAC/B,WAAW,GAAY,IAAI;IAC3B,sBAAsB,GAAY,KAAK;IACvC,cAAc,GAAU,EAAE;IAC1B,WAAW,GAAU,EAAE;IACvB,gBAAgB,GAAQ,IAAI;IAC5B,sBAAsB,GAAQ,IAAI;IAClC,aAAa,GAAQ,IAAI;IACzB,OAAO,GAAQ,IAAI;IAEX,cAAc,GAAW,EAAE;IACnC,IAAI,aAAa,KAAU,OAAO,IAAI,CAAC,cAAc,CAAC;AACtD,IAAA,IAAI,aAAa,CAAE,CAAM,EAAA,EAAK,IAAI,CAAC,iBAAiB,CAAE,CAAC,CAAE,CAAC;IAE1D,WAAW,GAAW,EAAE;AACxB,IAAA,UAAU;AAEV,IAAA,WAAA,CAAa,UAAe,EAAE,EAAA;AAE1B,QAAA,IAAI,CAAC,QAAQ,GAAG,4DAA4D;QAC5E,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM;QAC3C,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ;AAEjD,QAAA,IAAI,OAAO,CAAC,QAAQ,EACpB;YACI,IAAI,OAAO,CAAC,QAAQ,CAAC,WAAW,KAAK,MAAM,EAC3C;AACI,gBAAA,OAAO,CAAC,IAAI,CAAE,CAAA,2CAAA,EAA+C,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAK,CAAA,CAAA,CAAG,CAAE;;iBAGxG;AACI,gBAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ;;;QAIxC,IAAI,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AACvC,QAAA,GAAG,CAAC,SAAS,GAAG,iBAAiB;AACjC,QAAA,IAAI,CAAC,IAAI,GAAG,GAAG;AAEf,QAAA,IAAI,IAAI,GAAG,IAAI,IAAI,CAAE,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,CAAE;AACxD,QAAA,GAAG,CAAC,WAAW,CAAE,IAAI,CAAC,IAAI,CAAE;AAE5B,QAAA,IAAI,IAAI,EAAE,KAAK,EAAE,WAAW,GAAG,IAAI;QAEnC,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW;QAC1D,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW;QAC1D,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc;QACnE,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW;QAC1D,IAAI,CAAC,sBAAsB,GAAG,OAAO,CAAC,sBAAsB,IAAI,IAAI,CAAC,sBAAsB;QAC3F,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,IAAI,EAAE;AAClD,QAAA,IAAI,CAAC,sBAAsB,GAAG,OAAO,CAAC,sBAAsB;AAC5D,QAAA,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB;AAChD,QAAA,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa;QAC1C,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS;AAEpD,QAAA,IAAI,IAAI,CAAC,SAAS,KAAK,GAAG,EAC1B;YACI,MAAM,CAAC,GAAQ,QAAQ,CAAC,aAAa,CAAE,OAAO,CAAE;YAChD,CAAC,CAAC,KAAK,CAAC,WAAW,CAAE,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAE;;;QAI5D,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAE,IAAI,CAAC,IAAI,CAAE;AAEtC,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EACrB;YACI,CAAE,IAAI,EAAE,KAAK,CAAE,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,EAAC,CAAC;YAC1E,WAAW,GAAG,KAAK;AAEnB,YAAA,IAAI,CAAC,WAAW,CAAE,GAAG,EAAE,CAAC,CAAE;AAC1B,YAAA,KAAK,CAAC,WAAW,CAAE,GAAG,EAAE,CAAC,CAAE;;AAG/B,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EACrB;YACI,CAAE,WAAW,EAAE,KAAK,CAAE,GAAG,WAAW,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,EAAC,CAAC;;QAG5F,IAAI,CAAC,YAAY,GAAG;AAChB,YAAA,MAAM,EAAE,EAAE;AACV,YAAA,OAAO,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE;AAChC,YAAA,MAAM,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE;AAC5B,YAAA,OAAO,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE;AAChC,YAAA,IAAK,OAAO,CAAC,YAAY,IAAI,EAAE;SAClC;QAED,IAAI,CAAC,YAAY,CAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAE;AAEpC,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI;AACzB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI;AAC5B,QAAA,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC;AAEjB,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EACrB;AACI,YAAA,IAAI,CAAC,gBAAgB,CAAE,IAAI,CAAE;;AAGjC,QAAA,IAAI,CAAC,mBAAmB,CAAE,WAAW,CAAE;;AAGvC,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EACrB;YACI,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,QAAQ,CAAE,EAAC,SAAS,EAAE,sBAAsB,EAAE,KAAK,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAC,CAAE;;;QAI5G,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAE,IAAI,CAAC,IAAI,CAAE;;AAG1C;;AAEE;IAEF,IAAI,CAAE,IAAS,EAAE,OAAY,EAAA;AAEzB,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC;AACxB,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC;AAExB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI;QAEhB,IAAI,CAAC,YAAY,CAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAE;AACpC,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI;AAC5B,QAAA,IAAI,CAAC,IAAI,GAAG,CAAE,GAAG,CAAE;AAEnB,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EACrB;AACI,YAAA,IAAI,CAAC,IAAI,CAAC,OAAO,CAAE;AACf,gBAAA,EAAE,EAAE,GAAG;gBACP,QAAQ,EAAE,IAAI,CAAC;AAClB,aAAA,CAAE;;QAGP,IAAI,CAAC,eAAe,EAAE;AAEtB,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO;;AAG1B;;AAEE;AAEF,IAAA,OAAO,CAAE,IAAS,EAAE,UAA8B,EAAE,aAAsB,IAAI,EAAA;QAE1E,MAAM,YAAY,IAAK,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC,WAAW,CAAE;AAC7D,QAAA,MAAM,YAAY,IAAK,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC,WAAW,CAAE,CAAC;QAC9D,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAE,CAAC,CAAE,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAE,CAAC,CAAE;QACvE,MAAM,SAAS,GAAG,EAAE,CAAC,YAAY,CAAE,IAAI,CAAC,EAAE,CAAE;AAC5C,QAAA,MAAM,QAAQ,GAAG,IAAI,KAAK,QAAQ;QAClC,MAAM,IAAI,GAAG,IAAI;QAEjB,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC;QACzC,MAAM,CAAC,SAAS,GAAG,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;AAC5D,QAAA,MAAM,CAAC,QAAQ,GAAG,EAAE;QACpB,EAAE,CAAC,kBAAkB,CAAE,IAAI,CAAC,OAAO,EAAE,MAAM,EAAE,UAAU,CAAE;QAEzD,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAE,IAAI,CAAE,EAAE,KAAK;QAClD,IAAI,SAAS,EACb;;AAEI,YAAA,EAAE,CAAC,WAAW,CAAE,MAAM,EAAE,CAAA,sDAAA,EAA0D,SAAU,CAAA,CAAE,EAAE,EAAE,EAAE,MAAM,CAAE;;AAGhH,QAAA,IAAI,CAAC,IAAI,CAAC,GAAG,EACb;AACI,YAAA,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,EAAE;;QAGjC,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAC/C;YACI,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,yBAAyB,CAAE,IAAI,CAAC,YAAY,CAAE;;AAG/E,QAAA,IAAI,CAAC,IAAI,CAAC,cAAc,EACxB;YACI,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAE,MAAM,CAAE;AAC3C,YAAA,IAAI,CAAC,SAAS,GAAG,aAAa;YAC9B,IAAI,CAAC,EAAE,GAAG,CAAA,cAAA,EAAkB,IAAI,CAAC,GAAI,EAAE;YACvC,IAAI,CAAC,SAAS,GAAG,CAAU,MAAA,EAAA,IAAI,CAAC,EAAG,CAAA,UAAA,EAAc,IAAK,CAAA,CAAE;YACxD,EAAE,CAAC,kBAAkB,CAAE,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,UAAU,GAAG,UAAU,GAAG,CAAC,GAAG,SAAS,CAAE;YAEpF,MAAM,CAAC,gBAAgB,CAAE,WAAW,EAAE,CAAE,CAAa,KAAK;gBAEtD,IAAI,CAAC,YAAY,EACjB;oBACI;;AAGJ,gBAAA,MAAM,MAAM,GAAQ,CAAC,CAAC,MAAM;gBAC5B,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;AACvC,gBAAA,MAAM,IAAI,GAAG,MAAM,CAAC,qBAAqB,EAAE;AAC3C,gBAAA,MAAM,UAAU,GAAG,MAAM,CAAC,qBAAqB,EAAE;gBAEjD,IAAI,YAAY,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO;gBACrC,IAAI,YAAY,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO;gBAErC,IAAI,MAAM,EACV;AACI,oBAAA,MAAM,UAAU,GAAG,MAAM,CAAC,qBAAqB,EAAE;AACjD,oBAAA,YAAY,IAAI,UAAU,CAAC,CAAC;AAC5B,oBAAA,YAAY,IAAI,UAAU,CAAC,CAAC;;gBAGhC,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAE,eAAe,CAAE,EAChD;oBACI,YAAY,KAAM,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAE;;gBAG7C,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,CAAE,YAAY,IAAK,IAAI;AACzC,gBAAA,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CAAE,YAAY,GAAG,EAAE,IAAK,IAAI;AACjD,aAAC,CAAE;;aAGP;YACI,MAAM,CAAC,KAAK,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE;;AAGxC,QAAA,IAAI,IAAI,CAAC,sBAAsB,EAC/B;YACI,IAAI,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAE,OAAO,CAAE;AAChD,YAAA,QAAQ,CAAC,IAAI,GAAG,UAAU;AAC1B,YAAA,QAAQ,CAAC,SAAS,GAAG,aAAa;AAClC,YAAA,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ;YAChC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAE,CAAM,KAAK;AAC7C,gBAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,QAAQ;AAC9B,gBAAA,IAAI,IAAI,CAAC,OAAO,EAChB;oBACI,MAAM,KAAK,GAAG,IAAI,cAAc,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAE;oBAC3F,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ;AAC7B,oBAAA,IAAI,CAAC,OAAO,CAAE,KAAK,CAAE;;gBAEzB,CAAC,CAAC,eAAe,EAAE;gBACnB,CAAC,CAAC,wBAAwB,EAAE;AAChC,aAAC,CAAC;AAEF,YAAA,MAAM,CAAC,WAAW,CAAE,QAAQ,CAAE;;QAGlC,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC;AAC1C,QAAA,KAAK,CAAC,SAAS,GAAG,eAAe;AACjC,QAAA,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE;AACzB,QAAA,MAAM,CAAC,WAAW,CAAE,KAAK,CAAE;AAE3B,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EACrB;AACI,YAAA,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EACzB;AACI,gBAAA,MAAM,SAAS,GAAG,EAAE,CAAC,WAAW,CAAE,OAAO,EAAE,8DAA8D,EAAE,EAAE,EAAE,MAAM,CAAE;AACvH,gBAAA,SAAS,CAAC,YAAY,CAAE,yBAAyB,EAAE,KAAK,CAAE;AAC1D,gBAAA,SAAS,CAAC,YAAY,CAAE,uBAAuB,EAAE,KAAK,CAAE;AACxD,gBAAA,SAAS,CAAC,YAAY,CAAE,MAAM,EAAE,IAAI,CAAE;AACtC,gBAAA,SAAS,CAAC,YAAY,CAAE,OAAO,EAAE,IAAI,CAAE;AACvC,gBAAA,SAAS,CAAC,KAAK,CAAC,UAAU,GAAG,uBAAuB;AACpD,gBAAA,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,GAAG,GAAG,GAAG,GAAG;AAClD,gBAAA,SAAS,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG;gBACxB,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,IAAI,GAAG;;YAG9C,IAAI,OAAO,GAAG,IAAI;YAElB,MAAM,UAAU,GAAM,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,GAAG;AAC9C,YAAA,MAAM,QAAQ,GAAG,UAAU,KACvB,CAAC,MAAK;gBACF,MAAM,GAAG,GAAG,EAAE,CAAC,YAAY,CAAE,UAAU,CAAC,KAAK,CAAE,GAAG,CAAE,CAAE,CAAC,CAAE,CAAC,KAAK,CAAE,GAAG,CAAE,CAAE,CAAC,CAAE,CAAC,CAAC;AAC7E,gBAAA,OAAO,GAAG,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAE,GAAG,CAAC,WAAW,EAAE,CAAE,GAAG,KAAK;AACnG,aAAC;AACE,mBAAA,UAAU,CAAC,UAAU,CAAE,aAAa,CAAE,CAC5C;AAED,YAAA,IAAI,QAAQ,IAAI,QAAQ,IAAI,CAAC,YAAY,EACzC;AACI,gBAAA,MAAM,kBAAkB,GAAM,CAAA,EAAI,IAAI,CAAC,QAAS,iBAAiB;AACjE,gBAAA,MAAM,iBAAiB,GAAO,CAAA,EAAI,IAAI,CAAC,QAAS,mBAAmB;AAEnE,gBAAA,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;gBACvC,IAAI,OAAO,GAAG,IAAI,CAAC,gBAAgB,GAAG,kBAAkB,IAAK,QAAQ,GAAG,iBAAiB,GAAG,UAAU,CAAE;AACxG,gBAAA,OAAO,CAAC,GAAG,IAAK,YAAY,IAAI,QAAQ,GAAG,OAAO,GAAG,kBAAkB,CAAE;AACzE,gBAAA,MAAM,CAAC,WAAW,CAAE,OAAO,CAAE;;iBAGjC;AACI,gBAAA,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAE,KAAK,CAAE;AACzC,gBAAA,OAAO,CAAC,SAAS,GAAG,oBAAoB;AACxC,gBAAA,MAAM,CAAC,WAAW,CAAE,OAAO,CAAE;gBAE7B,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAE,MAAM,CAAE;AAC7C,gBAAA,MAAM,CAAC,SAAS,GAAG,CAAE,CAAC,SAAS,IAAI,SAAS,IAAI,IAAI,CAAC,EAAE,IAAK,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAK,CAAA,EAAI,SAAS,CAAC,WAAW,EAAG,CAAA,CAAE,CAAE,CAAC;AACzH,gBAAA,OAAO,CAAC,WAAW,CAAE,MAAM,CAAE;AAE7B,gBAAA,IAAI,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,MAAM;gBACvC,IAAI,YAAY,GAAG,GAAG;AACtB,gBAAA,IAAI,SAAS,GAAG,YAAY,GAAG,SAAS;gBACxC,IAAI,YAAY,GAAG,EAAE;AAErB,gBAAA,IAAI,SAAS,GAAG,CAAC,EACjB;AACI,oBAAA,IAAI,WAAW,GAAG,SAAS,GAAG,YAAY;oBAC1C,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,WAAW,GAAG,IAAI;AAC1C,oBAAA,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,eAAiB,MAAM,CAAC,YAAY,GAAG,GAAG,GAAG,EAAE,MAAQ;;;;;QAM9F,IAAI,YAAY,GAAG,IAAI;QAEvB,IAAI,YAAY,EAChB;YACI,IAAI,IAAI,CAAC,QAAQ;gBAAG,YAAY,IAAI,CAAO,GAAA,EAAA,EAAE,CAAC,WAAW,CAAE,IAAI,CAAC,QAAQ,CAAG,CAAA,CAAE;YAC7E,IAAI,IAAI,CAAC,gBAAgB;AAAG,gBAAA,YAAY,IAAI,CAAO,GAAA,EAAA,IAAI,CAAC,gBAAiB,EAAE;;AAG/E,QAAA,EAAE,CAAC,aAAa,CAAE,CAAE,MAAM,EAAE,MAAM,CAAE,EAAE,cAAc,EAAE,YAAY,EAAE,MAAM,CAAE;AAE5E,QAAA,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,CAAC,EAAA;YAExC,CAAC,CAAC,wBAAwB,EAAE;YAC5B,CAAC,CAAC,eAAe,EAAE;YAEnB,MAAM,aAAa,IAAK,CAAC,CAAC,MAAM,IAAI,EAAE,CAAC,kBAAkB,CAAE;YAE3D,IAAI,CAAC,aAAa,EAClB;AACI,gBAAA,IAAI,CAAC,CAAC,CAAC,QAAQ,EACf;oBACI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAE,eAAe,CAAC,CAAC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,MAAM,CAAE,UAAU,CAAE,CAAE;;AAGpG,gBAAA,IAAI,CAAC,SAAS,CAAC,GAAG,CAAE,UAAU,CAAE;AAChC,gBAAA,IAAI,CAAC,YAAY,GAAG,IAAI;AAExB,gBAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EACrB;AACI,oBAAA,IAAI,CAAC,aAAa,CAAE,IAAI,CAAE;;;iBAG7B,IAAI,QAAQ,EACjB;AACI,gBAAA,IAAI,CAAC,YAAY,CAAE,IAAI,CAAE;gBACzB;;AAGJ,YAAA,IAAI,IAAI,CAAC,OAAO,EAChB;AACI,gBAAA,MAAM,KAAK,GAAG,IAAI,cAAc,CAAC,aAAa,GAAG,cAAc,CAAC,gBAAgB,GAAG,cAAc,CAAC,cAAc,EAAE,CAAC,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAE;gBAC9I,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ;AAC7B,gBAAA,IAAI,CAAC,OAAO,CAAE,KAAK,CAAE;;AAE7B,SAAC,CAAC;AAEF,QAAA,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,UAAU,CAAC,EAAA;YAE9C,CAAC,CAAC,cAAc,EAAE;AAElB,YAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,MAAM;AAElE,YAAA,EAAE,CAAC,cAAc,CAAE,QAAQ,GAAG,CAAC,IAAK,QAAQ,GAAG,WAAW,IAAK,QAAQ,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAE,CAAqB,KAAK;AAE1H,gBAAA,IAAI,QAAQ,IAAI,CAAC,EACjB;AACI,oBAAA,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAC;;gBAGxD,IAAI,CAAC,QAAQ,EACb;AACI,oBAAA,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAC;;AAGtD,gBAAA,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAC;AAEpD,gBAAA,IAAI,IAAI,CAAC,sBAAsB,EAC/B;AACI,oBAAA,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;AAET,oBAAA,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,sBAAsB,EACzC;wBACI,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,QAAQ;4BAAG;AAC7B,wBAAA,CAAC,CAAC,GAAG,CAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,QAAQ,EAAE,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAE;;;AAG3D,aAAC,CAAC;AACN,SAAC,CAAC;AAEF,QAAA,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAU,CAAC,EAAA;YAC5C,CAAC,CAAC,cAAc,EAAE;SACrB,EAAE,KAAK,CAAE;QAEV,MAAM,CAAC,gBAAgB,CAAE,YAAY,EAAE,CAAE,CAAa,KAAK;AAEvD,YAAA,IAAI,CAAC,IAAI,CAAC,cAAc,IAAI,YAAY,EACxC;AACI,gBAAA,MAAM,IAAI,GAAuB,IAAI,CAAC,OAAO,CAAC,aAAa,CAAE,CAAA,eAAA,EAAmB,IAAI,CAAC,GAAI,CAAA,CAAE,CAAE;AAC7F,gBAAA,IAAI,IAAI;AAAG,oBAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO;;AAG3C,YAAA,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO;gBAAG;YAC5B,CAAC,CAAC,cAAc,EAAE;YAClB,MAAM,KAAK,GAAQ,MAAM,CAAC,aAAa,CAAE,OAAO,CAAE;AAClD,YAAA,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG;YACzB,KAAK,CAAC,IAAI,EAAE;AAChB,SAAC,CAAE;QAEH,MAAM,CAAC,gBAAgB,CAAE,YAAY,EAAE,CAAE,CAAa,KAAK;AAEvD,YAAA,IAAI,CAAC,IAAI,CAAC,cAAc,IAAI,YAAY,EACxC;gBACI,UAAU,CAAE,MAAK;AACb,oBAAA,MAAM,IAAI,GAAuB,IAAI,CAAC,OAAO,CAAC,aAAa,CAAE,CAAA,eAAA,EAAmB,IAAI,CAAC,GAAI,CAAA,CAAE,CAAE;AAC7F,oBAAA,IAAI,IAAI;AAAG,wBAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;iBACzC,EAAE,GAAG,CAAE;;AAGZ,YAAA,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO;gBAAG;YAC5B,CAAC,CAAC,cAAc,EAAE;YAClB,MAAM,KAAK,GAAQ,MAAM,CAAC,aAAa,CAAE,OAAO,CAAE;YAClD,KAAK,CAAC,KAAK,EAAE;AACb,YAAA,KAAK,CAAC,WAAW,GAAG,CAAC;AACrB,YAAA,IAAI,IAAI,CAAC,OAAO,EAChB;AACI,gBAAA,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG;;AAEjC,SAAC,CAAE;AAEH,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,UAAU,EACnC;AACI,YAAA,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;;AAGvB,QAAA,OAAO,MAAM;;AAGjB;;AAEE;IACF,KAAK,GAAA;AAED,QAAA,IAAI,IAAI,CAAC,YAAY,EACrB;AACI,YAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;;AAG7B,QAAA,IAAI,IAAI,CAAC,SAAS,EAClB;AACI,YAAA,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE;;AAG1B,QAAA,IAAI,IAAI,CAAC,UAAU,EACnB;AACI,YAAA,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE;;;AAI/B;;AAEE;IAEF,YAAY,CAAE,IAAS,EAAE,MAAY,EAAA;AAEjC,QAAA,IAAI,IAAI,CAAC,WAAW,KAAK,KAAK,EAC9B;AACI,YAAA,IAAI,CAAE,QAAQ,CAAE,GAAG,MAAM;YACzB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAI,EAAE;;AAGvC,QAAA,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,KAAK,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,QAAQ;AAE5D,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,EACpC;YACI,IAAI,CAAC,YAAY,CAAE,IAAI,CAAE,CAAC,CAAE,EAAE,IAAI,CAAE;;;AAI5C;;AAEE;IAEF,WAAW,GAAA;AAEP,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC;QAEpB,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,EACnD;YACI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAE,IAAI,CAAC,aAAa,CAAC,EAAE,CAAE;AAEvC,YAAA,MAAM,cAAc,GAAG,CAAE,CAAM,KAAK;AAChC,gBAAA,IAAI,CAAC,CAAC;oBAAG;AACT,gBAAA,IAAI,CAAC,IAAI,CAAC,IAAI,CAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,GAAG,GAAG,CAAE;AACvC,gBAAA,cAAc,CAAE,CAAC,CAAC,MAAM,CAAE;AAC9B,aAAC;AAED,YAAA,cAAc,CAAE,IAAI,CAAC,aAAa,CAAC,MAAM,CAAE;;aAG/C;AACI,YAAA,IAAI,CAAC,IAAI,CAAC,IAAI,CAAE,GAAG,CAAE;;AAGzB,QAAA,EAAE,CAAC,UAAU,CAAE,mBAAmB,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE;;AAGvE;;AAEE;AAEF,IAAA,gBAAgB,CAAE,IAAiB,EAAA;AAE/B,QAAA,IAAI,IAAI,CAAC,SAAS,EAClB;AACI,YAAA,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE;;aAG1B;AACI,YAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,sBAAsB,EAAE,CAAC;;;AAIzE,QAAA,IAAI,SAAS,GAAG;AACZ,YAAA,EAAE,EAAE,GAAG;YACP,QAAQ,EAAE,IAAI,CAAC;SAClB;QAED,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAE,CAAC,EAAE,gBAAgB,CAAE;QAC9C,IAAI,CAAC,SAAS,CAAC,SAAS,CAAE,IAAI,EAAE,cAAc,EAAE,MAAK;YACjD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,aAAa;gBAAG;YACnD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAE,IAAI,CAAC,aAAa,CAAE;AACxC,YAAA,IAAI,CAAC,YAAY,CAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,KAAK,CAAE;AACnD,SAAC,EAAE,EAAE,WAAW,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,CAAE;QAEnF,IAAI,CAAC,SAAS,CAAC,SAAS,CAAE,IAAI,EAAE,iBAAiB,EAAE,MAAK;YACpD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,aAAa;gBAAG;YACnD,IAAI,CAAC,YAAY,CAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAE;AAC5C,SAAC,EAAE,EAAE,WAAW,EAAE,SAAS,EAAE,KAAK,EAAE,YAAY,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY,EAAE,CAAE;QAEvF,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAE,iBAAiB,EAAE,SAAS,EAAE;;AAE/D,YAAA,MAAM,EAAE,KAAK;YACb,WAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,YAAA,OAAO,EAAE,CAAE,KAAuB,KAAK;AAEnC,gBAAA,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI;AACrB,gBAAA,IAAI,KAAK,GAAG,KAAK,CAAC,KAAK;AAEvB,gBAAA,QAAQ,KAAK,CAAC,IAAI;AAEd,oBAAA,KAAK,EAAE,CAAC,SAAS,CAAC,aAAa;wBAC/B;AACI,4BAAA,IAAI,KAAK,CAAC,QAAQ,EAClB;gCACI;;AAEJ,4BAAA,IAAI,CAAC,IAAI,CAAC,MAAM,EAChB;AACI,gCAAA,IAAI,IAAI,CAAC,aAAa,EACtB;oCACI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAE,IAAI,CAAC,aAAa,CAAE;;AAG5C,gCAAA,IAAI,CAAC,aAAa,GAAG,IAAI;AACzB,gCAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI;gCAC5B,IAAI,CAAC,eAAe,EAAE;gCACtB,IAAI,CAAC,WAAW,EAAE;;iCAGtB;AACI,gCAAA,IAAI,CAAC,YAAY,CAAE,IAAI,CAAC,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC,MAAM,CAAE;AAEhE,gCAAA,IAAI,CAAC,aAAa,CAAE,IAAI,CAAE;AAE1B,gCAAA,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EAC1B;oCACI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAE,eAAe,CAAC,CAAC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,MAAM,CAAE,UAAU,CAAE,CAAE;AAChG,oCAAA,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK;AACtB,oCAAA,GAAG,EAAE,SAAS,CAAC,GAAG,CAAE,UAAU,CAAE;;AAGpC,gCAAA,IAAI,CAAC,YAAY,GAAG,IAAI;;4BAE5B;;AAEJ,oBAAA,KAAK,EAAE,CAAC,SAAS,CAAC,YAAY;wBAC9B;AACI,4BAAA,IAAI,IAAI,CAAC,MAAM,EACf;AACI,gCAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAE,IAAI,CAAE;gCAChD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAE,GAAG,EAAE,CAAC,CAAE;;4BAGzC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,KAAK;4BAEjC,IAAI,CAAC,KAAK,CAAC,QAAQ;AAAG,gCAAA,KAAK,CAAC,QAAQ,GAAG,EAAE;AAEzC,4BAAA,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAE,IAAI,CAAE;AAE3B,4BAAA,IAAI,IAAI,CAAC,aAAa,EACtB;AACI,gCAAA,IAAI,CAAC,aAAa,CAAE,IAAI,EAAE,KAAK,CAAE;;4BAGrC,IAAI,CAAC,eAAe,EAAE;4BACtB;;;aAGX;AACJ,SAAA,CAAC;AAEF,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS;;AAG9B;;AAEE;AAEF,IAAA,iBAAiB,CAAE,UAAkB,EAAA;AAEjC,QAAA,IAAI,CAAC,MAAM,GAAG,UAAU;AACxB,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE;QACzB,IAAI,CAAC,eAAe,EAAE;;AAG1B;;AAEE;AAEF,IAAA,mBAAmB,CAAE,IAAiB,EAAA;AAElC,QAAA,IAAI,IAAI,CAAC,UAAU,EACnB;AACI,YAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;;aAG7B;AACI,YAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,iBAAiB,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;AACjF,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC9B,gBAAA,SAAS,EAAE,mEAAmE;AAC9E,gBAAA,MAAM,EAAE;AACX,aAAA,CAAC;AAEF,YAAA,IAAI,CAAC,UAAU,GAAG,IAAI,UAAU,CAAE;AAC9B,gBAAA,SAAS,EAAE,SAAS;gBACpB,KAAK,EAAE,IAAI,CAAC,GAAG,CAAE,IAAI,CAAC,IAAI,CAAE,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAE,EAAE,CAAC,CAAE;AACxE,gBAAA,QAAQ,EAAE,MAAM,IAAI,CAAC,eAAe;AACvC,aAAA,CAAE;AAEH,YAAA,MAAM,cAAc,GAAG,IAAI,cAAc,CAAE,OAAO,IAAG;AACjD,gBAAA,MAAM,CAAC,GAAG,OAAO,CAAE,CAAC,CAAE;gBACtB,IAAI,CAAC,EACL;oBACI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAA,YAAA,GAAkB,CAAC,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,OAAS;;AAEjG,aAAC,CAAC;YAEF,cAAc,CAAC,OAAO,CAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAE;AAE9C,YAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAE,OAAO,EAAE,CAAE,CAAa,KAAK;gBAElE,IAAI,CAAC,CAAC,CAAC,OAAO;oBAAG;gBACjB,CAAC,CAAC,cAAc,EAAE;AAClB,gBAAA,IAAI,CAAC,SAAS,KAAM,CAAC,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI,CAAE;AAChD,gBAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,KAAK,CAAE,IAAI,CAAC,SAAS,EAAE,GAAG,EAAE,GAAG,CAAE;gBACrD,MAAM,CAAC,GAAQ,QAAQ,CAAC,aAAa,CAAE,OAAO,CAAE;gBAChD,CAAC,CAAC,KAAK,CAAC,WAAW,CAAE,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAE;AAC5D,aAAC,CAAC;;AAGN,QAAA,MAAM,OAAO,GAAG,CAAE,KAAU,EAAE,KAAU,KAAK;AAEzC,YAAA,IAAI,EAAE,CAAC,YAAY,CAAE,KAAK,CAAC,MAAM,EAAE;AAC/B,gBAAA,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,IAAI,CAAC,SAAS,CAAE,IAAI,CAAE,EAAE;AAC7E,gBAAA,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,IAAI,CAAC,SAAS,CAAE,MAAM,CAAE,EAAE;gBACxE,IAAI;gBACJ,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,IAAI,CAAC,SAAS,CAAE,SAAS,EAAE,SAAS,CAAC,gBAAgB,CAAE,EAAE;gBAC/G,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,IAAI,CAAC,SAAS,CAAE,SAAS,EAAE,SAAS,CAAC,iBAAiB,CAAE;aACnH,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC;AAC1C,SAAC;AAED,QAAA,MAAM,aAAa,GAAG,CAAE,KAAU,EAAE,KAAU,KAAK;AAE/C,YAAA,IAAI,EAAE,CAAC,YAAY,CAAE,KAAK,CAAC,MAAM,EAAE;gBAC/B,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,IAAI,CAAC,iBAAiB,CAAE,SAAS,CAAC,WAAW,CAAE,EAAE;gBACrG,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,IAAI,CAAC,iBAAiB,CAAE,SAAS,CAAC,cAAc,CAAE,EAAE;gBAC3G,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,IAAI,CAAC,iBAAiB,CAAE,SAAS,CAAC,WAAW,CAAE;aAChG,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC;AAC1C,SAAC;AAED,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,MAAK;AAE3B,YAAA,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE;YAEvB,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAE,IAAI,CAAC,YAAY,CAAE;AAEpD,YAAA,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE;AAC1B,YAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAE,IAAI,EAAE,IAAI,CAAC,WAAW,IAAI,EAAE,EAAE,CAAE,CAAS,KAAM,IAAI,CAAC,eAAe,CAAC,IAAI,CAAE,IAAI,EAAE,CAAC,EAAE,SAAS,CAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,WAAW,EAAE,iBAAiB,EAAE,CAAE;AAC5K,YAAA,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE;AAEzB,YAAA,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE;AAC1B,YAAA,MAAM,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAE,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAE,IAAI,CAAE,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,CAAE;YACpJ,IAAI,CAAC,UAAU,CAAC,SAAS,CAAE,IAAI,EAAE,EAAE,EAAE,OAAO,CAAC,IAAI,CAAE,IAAI,CAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,CAAE,IAAI,CAAC,QAAQ,KAAK,SAAS,CAAC,gBAAgB,IAAK,SAAS,GAAG,UAAU,EAAE,CAAE;YAC9K,IAAI,CAAC,UAAU,CAAC,SAAS,CAAE,IAAI,EAAE,EAAE,EAAE,aAAa,CAAC,IAAI,CAAE,IAAI,CAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,CAAE,IAAI,CAAC,MAAM,KAAK,SAAS,CAAC,WAAW,IAAK,YAAY,GAAG,YAAY,EAAE,CAAE;YAClL,IAAI,CAAC,UAAU,CAAC,SAAS,CAAE,IAAI,EAAE,WAAW,EAAE,IAAI,CAAC,MAAM,IAAI,WAAW,CAAE,CAAC,CAAE,EAAE,CAAE,CAAM,KAAK;AACxF,gBAAA,IAAI,CAAC,eAAe,CAAE,SAAS,EAAE,CAAC,CAAE;AACxC,aAAC,EAAE,EAAE,iBAAiB,EAAE,IAAI,EAAE,CAAE;;AAIhC,YAAA,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE;AAEzB,YAAA,IAAI,IAAI,CAAC,UAAU,EACnB;AACI,gBAAA,MAAM,eAAe,GAAG,aAAa,CAAC,IAAI,CAAC,aAAa;gBACxD,eAAe,CAAC,WAAW,CAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAE;;AAE3D,SAAC;;QAID,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAE,IAAI,CAAE;AAC7C,QAAA,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,kBAAkB;QAC3C,IAAI,CAAC,YAAY,CAAC,MAAM,CAAE,IAAI,CAAC,OAAO,CAAE;AAExC,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EACrB;AACI,YAAA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE;AACxD,gBAAA,UAAU,EAAE,6BAA6B;AACzC,gBAAA,QAAQ,EAAE,IAAI;AACd,gBAAA,MAAM,EAAE;AACX,aAAA,CAAC;;QAGN,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAE,WAAW,EAAE,UAAU,CAAY,EAAA;YAC9D,CAAC,CAAC,cAAc,EAAE;AAClB,YAAA,IAAI,CAAC,SAAS,CAAC,GAAG,CAAE,UAAU,CAAE;AACpC,SAAC,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAE,WAAW,EAAE,UAAU,CAAY,EAAA;YAC9D,CAAC,CAAC,cAAc,EAAE;AAClB,YAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAE,UAAU,CAAE;AACvC,SAAC,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAE,MAAM,EAAE,CAAE,CAAY,KAAK;YAEtD,CAAC,CAAC,cAAc,EAAE;AAClB,YAAA,IAAI,CAAC,YAAY,CAAE,CAAC,CAAE;AAC1B,SAAC,CAAC;AAEF,QAAA,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAE,OAAO,EAAE,YAAA;YAEpC,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,CAAE;AACzF,SAAC,CAAC;QAEF,IAAI,CAAC,eAAe,EAAE;;AAGtB,QAAA,EAAE,CAAC,OAAO,CAAE,MAAM,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,EAAE,GAAG,CAAE;;IAGtD,eAAe,CAAE,WAAoB,EAAE,MAAe,EAAA;QAElD,MAAM,eAAe,IAAK,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC,cAAc,CAAE;QACnE,MAAM,YAAY,IAAK,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC,WAAW,CAAE;AAE7D,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,KAAM,IAAI,CAAC,MAAM,IAAI,MAAM,CAAE;AACjD,QAAA,IAAI,CAAC,WAAW,GAAG,WAAW,KAAM,IAAI,CAAC,WAAW,IAAI,EAAE,CAAE;AAC5D,QAAA,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,EAAE;QAC3B,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,CAAoB,gBAAA,EAAA,eAAe,GAAG,UAAU,IAAK,YAAY,GAAG,OAAO,GAAG,EAAE,CAAG,CAAA,CAAE;AAE9G,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAC5B;YACI;;AAGJ,QAAA,MAAM,EAAE,GAAG,IAAI,UAAU,EAAE;QAE3B,MAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAE,EAAE,IAAG;YAC/C,OAAO,CAAC,IAAI,CAAC,MAAM,IAAI,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,GAAG,IAAI;AACrF,gBAAA,EAAE,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;AACpE,SAAC,CAAE;;;;;QAOH,IAAI,CAAC,UAAU,EAAE,QAAQ,CAAE,IAAI,CAAC,GAAG,CAAE,IAAI,CAAC,IAAI,CAAE,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAE,EAAE,CAAC,CAAE,CAAE;;QAG9F,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,GAAG,CAAE,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,IAAK,IAAI,CAAC,aAAa,GAAG,CAAC;AACrF,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAE,KAAK,GAAG,IAAI,CAAC,aAAa,EAAE,YAAY,CAAC,MAAM,CAAE,GAAG,YAAY,CAAC,MAAM;AAE/G,QAAA,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAChC;AACI,YAAA,IAAI,IAAI,GAAG,YAAY,CAAE,CAAC,CAAE;AAE5B,YAAA,IAAI,IAAI,CAAC,IAAI,EACb;AACI,gBAAA,EAAE,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,CAAE,CAAO,KAAK;AAClE,wBAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,IAAI;AACtB,wBAAA,EAAE,CAAC,aAAa,CAAE,CAAC,CAAE;AACrB,wBAAA,EAAE,CAAC,MAAM,GAAG,CAAC,IAAG;AACZ,4BAAA,MAAM,MAAM,GAAG,CAAC,CAAC,aAAoB;4BACrC,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;AACzB,4BAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI;4BACtB,OAAO,IAAI,CAAC,IAAI;AAChB,4BAAA,IAAI,CAAC,eAAe,CAAE,WAAW,EAAE,MAAM,CAAE;AAC/C,yBAAC;qBACJ,EAAE,CAAC;;iBAGR;AACI,gBAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAE,IAAI,EAAE,SAAS,EAAE,KAAK,CAAE;;;;;;AAS3D,QAAA,IAAI,IAAI,CAAC,gBAAgB,EACzB;AACI,YAAA,IAAI,CAAC,gBAAgB,CAAE,WAAW,EAAE,MAAM,CAAE;;;AAIpD;;AAEE;AAEF,IAAA,aAAa,CAAE,IAAS,EAAA;AAEpB,QAAA,IAAI,IAAI,CAAC,WAAW,EACpB;YACI;;AAGJ,QAAA,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC;AAE/D,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;AACzB,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC;QAEjC,IAAI,IAAI,CAAC,IAAI,IAAI,OAAO,IAAI,IAAI,CAAC,GAAG,EACpC;YACI,MAAM,QAAQ,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,OAAO,CAAE,EAAE,CAAC,YAAY,CAAE,IAAI,CAAC,GAAG,CAAE,CAAE,GAAG,EAAE,IAAI,UAAU;YACzF,IAAI,QAAQ,EACZ;gBACI,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAE,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,CAAE;;;QAIlF,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAC/C;YACI,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,yBAAyB,CAAE,IAAI,CAAC,YAAY,CAAE;;AAG/E,QAAA,MAAM,OAAO,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE;AAElC,QAAA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,EAAE,OAAO,CAAC;QAC7D,IAAI,IAAI,CAAC,gBAAgB;AAAG,YAAA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,eAAe,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,EAAE,OAAO,CAAC;AAC5G,QAAA,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG;YAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,OAAO,CAAC;QAChH,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC;AACrE,QAAA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC;QAC3D,IAAI,IAAI,CAAC,QAAQ;YAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,WAAW,CAAE,IAAI,CAAC,QAAQ,CAAE,EAAE,IAAI,EAAE,OAAO,CAAC;AACrG,QAAA,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ;AAAG,YAAA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,GAAG,GAAG,EAAE,IAAI,EAAE,OAAO,CAAC;AAEpI,QAAA,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE;QAEhC,MAAM,cAAc,GAAG,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;QAE/C,IAAI,CAAC,cAAc,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EACpD;;YAEI,cAAc,CAAC,IAAI,CAAC;AAChB,gBAAA,IAAI,EAAE,UAAU;AAChB,gBAAA,QAAQ,EAAE,MAAM,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,EAAE;AACnD,aAAA,CAAC;;AAGN,QAAA,KAAK,IAAI,MAAM,IAAI,cAAc,EACjC;AACI,YAAA,IAAI,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAClG;gBACI;;YAEJ,IAAI,CAAC,YAAY,CAAC,SAAS,CAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAE;;AAGxF,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;;AAG7B,IAAA,YAAY,CAAE,CAAY,EAAA;QAEtB,IAAI,CAAC,CAAC,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC,YAAY,CAAC,KAAK,IAAI,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,EAChF;YACI;;AAGJ,QAAA,MAAM,EAAE,GAAG,IAAI,UAAU,EAAE;QAC3B,MAAM,SAAS,GAAG,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM;AAE7C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,EACpD;YACI,MAAM,IAAI,GAAG,CAAC,CAAC,YAAY,CAAC,KAAK,CAAE,CAAC,CAAE;YAEtC,MAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAE,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,CAAE;AAC/D,YAAA,IAAG,MAAM;gBAAE;AAEX,YAAA,EAAE,CAAC,aAAa,CAAE,IAAI,CAAE;AACxB,YAAA,EAAE,CAAC,MAAM,GAAG,CAAC,IAAG;gBAEZ,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAE,CAAC,WAAW,EAAE;AAE7E,gBAAA,IAAI,IAAI,GAAQ;oBACZ,IAAI,EAAE,IAAI,CAAC,IAAI;AACf,oBAAA,KAAK,EAAI,CAAC,CAAC,aAAsB,CAAC,MAAM;AACxC,oBAAA,WAAW,EAAE,GAAG;oBAChB,cAAc,EAAE,IAAI,CAAC,YAAY;oBACjC,kBAAkB,EAAE,IAAI,CAAC,yBAAyB,CAAE,IAAI,CAAC,YAAY;iBACxE;gBAED,QAAO,GAAG;AAEV,oBAAA,KAAK,KAAK;AACV,oBAAA,KAAK,KAAK;AACN,wBAAA,IAAI,CAAC,IAAI,GAAG,OAAO;wBAAE;AACzB,oBAAA,KAAK,IAAI;AACT,oBAAA,KAAK,KAAK;AACN,wBAAA,IAAI,CAAC,IAAI,GAAG,QAAQ;wBAAE;AAC1B,oBAAA,KAAK,MAAM;AACP,wBAAA,IAAI,CAAC,IAAI,GAAG,MAAM;wBAAE;AACxB,oBAAA,KAAK,KAAK;AACN,wBAAA,IAAI,CAAC,IAAI,GAAG,MAAM;wBAAE;AACxB,oBAAA;AACI,wBAAA,IAAI,CAAC,IAAI,GAAG,GAAG;AACf,wBAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI;wBAC5B;;AAGJ,gBAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAE,IAAI,CAAE;gBAE7B,IAAI,CAAC,KAAK,SAAS,GAAG,CAAC,CAAC,EACxB;oBACI,IAAI,CAAC,eAAe,EAAE;AACtB,oBAAA,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC;;AAE7B,aAAC;;;IAIT,SAAS,CAAE,MAAe,EAAE,QAAiB,EAAA;QAEzC,MAAM,GAAG,MAAM,KAAM,IAAI,CAAC,WAAW,IAAI,IAAI,CAAE;AAC/C,QAAA,QAAQ,GAAG,QAAQ,IAAI,IAAI,CAAC,QAAQ;QACpC,MAAM,QAAQ,IAAK,QAAQ,KAAK,SAAS,CAAC,iBAAiB,CAAE;AAC7D,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAE,CAAE,CAAC,EAAE,CAAC,KAAK;AACjD,YAAA,IAAI,CAAC,GAAG,QAAQ,GAAG,CAAC,CAAE,MAAM,CAAE,CAAC,aAAa,CAAE,CAAC,CAAE,MAAM,CAAE,CAAE,GAAG,CAAC,CAAE,MAAM,CAAE,CAAC,aAAa,CAAE,CAAC,CAAE,MAAM,CAAE,CAAE;YACtG,IAAI,CAAC,IAAI,CAAC;AAAG,gBAAA,CAAC,GAAG,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,aAAa,CAAE,CAAC,CAAC,IAAI,CAAC,CAAE,GAAG,CAAC,CAAE,IAAI,CAAE,CAAC,aAAa,CAAE,CAAC,CAAE,IAAI,CAAE,CAAE;AACnG,YAAA,OAAO,CAAC;AACZ,SAAC,CAAE;AAEH,QAAA,IAAI,CAAC,WAAW,GAAG,MAAM;AACzB,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ;AACxB,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE;QACzB,IAAI,CAAC,eAAe,EAAE;;AAG1B,IAAA,YAAY,CAAE,UAAe,EAAE,YAAA,GAAwB,IAAI,EAAA;QAEvD,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAE,CAAC,CAAE;QACnC,MAAM,UAAU,GAAG,KAAK,EAAE,MAAM,EAAE,EAAE,KAAK,UAAU,CAAC,EAAE;QAEtD,IAAI,YAAY,EAChB;YACI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAE,IAAI,CAAC,aAAa,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,CAAE;;AAGhF,QAAA,IAAI,CAAC,aAAa,GAAG,UAAU;QAC/B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ;;QAG9C,IAAI,CAAC,UAAU,EACf;YACI,IAAI,CAAC,eAAe,EAAE;;;QAI1B,IAAI,CAAC,WAAW,EAAE;;AAGlB,QAAA,IAAI,IAAI,CAAC,OAAO,EAChB;YACI,MAAM,KAAK,GAAG,IAAI,cAAc,CAAE,cAAc,CAAC,YAAY,EAAE,UAAU,CAAE;AAC3E,YAAA,IAAI,CAAC,OAAO,CAAE,KAAK,CAAE;;;AAI7B,IAAA,WAAW,CAAE,IAAS,EAAA;QAElB,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAE,IAAI,CAAE;AAC5C,QAAA,IAAI,GAAG,GAAG,CAAC,EACX;AACI,YAAA,OAAO,CAAC,KAAK,CAAE,kDAAkD,CAAE;YACnE;;QAGJ,IAAI,CAAC,WAAW,CAAC,MAAM,CAAE,GAAG,EAAE,CAAC,CAAE;QACjC,IAAI,CAAC,eAAe,CAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,MAAM,CAAE;AAErD,QAAA,IAAI,IAAI,CAAC,OAAO,EAChB;YACI,MAAM,KAAK,GAAG,IAAI,cAAc,CAAE,cAAc,CAAC,aAAa,EAAE,IAAI,CAAE;AACtE,YAAA,IAAI,CAAC,OAAO,CAAE,KAAK,CAAE;;AAGzB,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EACrB;AACI,YAAA,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;;AAGvB,QAAA,IAAI,IAAI,CAAC,YAAY,EACrB;AACI,YAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;;AAG7B,QAAA,IAAI,CAAC,YAAY,CAAE,IAAI,CAAC,IAAI,CAAE;;AAGlC,IAAA,UAAU,CAAE,IAAS,EAAA;QAEjB,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAE,IAAI,CAAE;AAC5C,QAAA,IAAI,GAAG,GAAG,CAAC,EACX;YACI;;QAGJ,OAAO,IAAI,CAAC,KAAK;QACjB,OAAO,IAAI,CAAC,MAAM;QAClB,MAAM,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAE,IAAI,CAAE;QACpC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAE,GAAG,EAAE,CAAC,EAAE,QAAQ,CAAE;QAE3C,IAAI,CAAC,eAAe,CAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,MAAM,CAAE;AAErD,QAAA,IAAI,IAAI,CAAC,OAAO,EAChB;YACI,MAAM,KAAK,GAAG,IAAI,cAAc,CAAE,cAAc,CAAC,YAAY,EAAE,IAAI,CAAE;AACrE,YAAA,IAAI,CAAC,OAAO,CAAE,KAAK,CAAE;;AAGzB,QAAA,IAAI,CAAC,YAAY,CAAE,IAAI,CAAC,IAAI,CAAE;;AAGlC,IAAA,WAAW,CAAE,IAAS,EAAA;QAElB,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAE,IAAI,CAAE;AAC5C,QAAA,IAAI,GAAG,GAAG,CAAC,EACX;YACI;;AAGJ,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,EAAE;AACvB,QAAA,MAAM,WAAW,GAAG,EAAE,CAAC,QAAQ,CAAE,IAAI,CAAC,KAAK,EAAE,UAAU,CAAE;AAEzD,QAAA,MAAM,QAAQ,GAAG,CAAE,KAAa,KAAK;YAEjC,CAAC,CAAC,OAAO,EAAE;AAEX,YAAA,MAAM,UAAU,GAAuB,IAAI,CAAC,OAAO,CAAC,aAAa,CAAE,CAAmB,eAAA,EAAA,IAAI,CAAC,EAAE,CAAC,OAAO,CAAE,KAAK,EAAE,GAAG,CAAE,CAAC,UAAU,CAAE,GAAG,EAAE,GAAG,CAAG,CAAE,CAAA,CAAE;AAC/I,YAAA,IAAI,UAAU;gBAAG,UAAU,CAAC,MAAM,EAAE;AACpC,YAAA,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;AAEnB,YAAA,IAAI,CAAC,EAAE,GAAG,KAAK;AACf,YAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAE,IAAI,EAAE,GAAG,GAAG,CAAC,CAAE;AAE1C,YAAA,IAAI,IAAI,CAAC,OAAO,EAChB;AACI,gBAAA,MAAM,KAAK,GAAG,IAAI,cAAc,CAAE,cAAc,CAAC,aAAa,EAAE,IAAI,EAAE,OAAO,CAAE;AAC/E,gBAAA,IAAI,CAAC,OAAO,CAAE,KAAK,CAAE;;YAGzB,IAAI,WAAW,EACf;AACI,gBAAA,IAAI,CAAC,aAAa,CAAE,IAAI,CAAE;;AAG9B,YAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EACrB;AACI,gBAAA,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;;AAGvB,YAAA,IAAI,CAAC,YAAY,CAAE,IAAI,CAAC,IAAI,CAAE;AAClC,SAAC;AAED,QAAA,IAAI,OAAO,GAAG,IAAI,CAAC,EAAE;AACrB,QAAA,MAAM,KAAK,GAAG,IAAI,EAAE,CAAC,KAAK,EAAE;AAC5B,QAAA,KAAK,CAAC,OAAO,CAAE,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAE,CAAS,EAAE,CAAM,KAAK;YAClD,OAAO,GAAG,CAAC;AACX,YAAA,IAAI,CAAC,CAAC,WAAW,KAAK,aAAa;gBAAG,QAAQ,CAAE,CAAC,CAAE;AACvD,SAAC,CAAC;QACF,KAAK,CAAC,SAAS,CAAE,IAAI,EAAE,MAAM,EAAE,MAAK;YAChC,QAAQ,CAAE,OAAO,CAAE;AACvB,SAAC,EAAE,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC;AAE/B,QAAA,MAAM,CAAC,GAAG,IAAI,EAAE,CAAC,OAAO,CAAE,IAAI,CAAC,KAAK,EAAE,CAAE,KAAK,CAAE,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;;AAG3G,IAAA,iBAAiB,CAAE,CAAS,EAAA;AAExB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC;QACvB,IAAI,CAAC,eAAe,EAAE;;AAG1B,IAAA,yBAAyB,CAAE,EAAU,EAAA;QAEjC,MAAM,CAAC,GAAG,IAAI,IAAI,CAAE,EAAE,CAAE,CAAC,cAAc,EAAE;AACzC,QAAA,OAAO,CAAC,CAAC,SAAS,CAAE,CAAC,EAAE,CAAC,CAAC,OAAO,CAAE,GAAG,CAAE,CAAE;;;AAIjD,EAAE,CAAC,SAAS,GAAG,SAAS;;;;"}