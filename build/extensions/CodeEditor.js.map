{"version":3,"file":"CodeEditor.js","sources":["../../src/extensions/CodeEditor.ts"],"sourcesContent":["// CodeEditor.ts @jxarco\r\n\r\nimport { LX } from '../core/Namespace';\r\n\r\nif ( !LX )\r\n{\r\n    throw ( 'Missing LX namespace!' );\r\n}\r\n\r\nLX.extensions.push( 'CodeEditor' );\r\n\r\nconst g = globalThis as any;\r\nconst vec2 = LX.vec2;\r\nconst Area = LX.Area;\r\nconst Panel = LX.Panel;\r\nconst Tree = LX.Tree;\r\nconst Tabs = LX.Tabs;\r\nconst ContextMenu = LX.ContextMenu;\r\n\r\nfunction swapElements( obj: any, a: string, b: string )\r\n{\r\n    [ obj[a], obj[b] ] = [ obj[b], obj[a] ];\r\n}\r\nfunction swapArrayElements( array: number[], id0: number, id1: number )\r\n{\r\n    [ array[id0], array[id1] ] = [ array[id1], array[id0] ];\r\n}\r\nfunction sliceChars( str: string, idx: number, n: number = 1 )\r\n{\r\n    return str.substr( 0, idx ) + str.substr( idx + n );\r\n}\r\nfunction firstNonspaceIndex( str: string )\r\n{\r\n    const index = str.search( /\\S|$/ );\r\n    return index < str.length ? index : -1;\r\n}\r\nfunction strReverse( str: string )\r\n{\r\n    return str.split( '' ).reverse().join( '' );\r\n}\r\nfunction isLetter( c: string )\r\n{\r\n    return /[a-zA-Z]/.test( c );\r\n}\r\nfunction isSymbol( c: string )\r\n{\r\n    return /[^\\w\\s]/.test( c );\r\n}\r\n\r\nfunction indexOfFrom( str: string, reg: string, from?: number, reverse: boolean = false )\r\n{\r\n    from = from ?? 0;\r\n\r\n    if ( reverse )\r\n    {\r\n        str = str.substring( 0, from );\r\n        var k = from - 1;\r\n        while ( str[k] && str[k] != reg )\r\n        {\r\n            k--;\r\n        }\r\n        return str[k] ? k : -1;\r\n    }\r\n    else\r\n    {\r\n        str = str.substring( from );\r\n        return from + str.indexOf( reg );\r\n    }\r\n}\r\n\r\nfunction codeScopesEqual( a: any, b: any )\r\n{\r\n    if ( a.length !== b.length ) return false;\r\n    for ( let i = 0; i < a.length; i++ )\r\n    {\r\n        if ( a[i].type !== b[i].type ) return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nclass Cursor\r\n{\r\n    root: any;\r\n    name: string = '';\r\n    editor: CodeEditor;\r\n    isMain: boolean = false;\r\n    selection: CodeSelection | null = null;\r\n\r\n    private _line: number = 0;\r\n    private _position: number = 0;\r\n\r\n    get line(): number\r\n    {\r\n        return this._line;\r\n    }\r\n    set line( v: number )\r\n    {\r\n        this._line = v;\r\n        if ( this.isMain ) this.editor._setActiveLine( v );\r\n    }\r\n\r\n    get position(): number\r\n    {\r\n        return this._position;\r\n    }\r\n    set position( v: number )\r\n    {\r\n        this._position = v;\r\n        if ( this.isMain )\r\n        {\r\n            const activeLine = this.editor.state.activeLine;\r\n            this.editor._updateDataInfoPanel( '@cursor-data', `Ln ${activeLine + 1}, Col ${v + 1}` );\r\n        }\r\n    }\r\n\r\n    left: number = 0;\r\n    top: number = 0;\r\n\r\n    constructor( name: string, position: number = 0, line: number = 0, isMain: boolean = false, editor: CodeEditor )\r\n    {\r\n        this.name = name;\r\n        this.editor = editor;\r\n        this.isMain = isMain;\r\n\r\n        this.root = document.createElement( 'div' );\r\n        this.root.name = name;\r\n        this.root.className = 'cursor';\r\n        this.root.innerHTML = '&nbsp;';\r\n\r\n        this.set( position, line, false );\r\n    }\r\n\r\n    set( position: number = 0, line: number = 0, updateEditor: boolean = true )\r\n    {\r\n        this.left = position * this.editor.charWidth;\r\n        this.top = line * this.editor.lineHeight;\r\n        this.root.style.left = `calc( ${this.left}px + ${this.editor.xPadding} )`;\r\n        this.root.style.top = `${this.top}px`;\r\n\r\n        if ( updateEditor )\r\n        {\r\n            this.line = line;\r\n            this.position = position;\r\n        }\r\n        else\r\n        {\r\n            this._line = line;\r\n            this._position = position;\r\n        }\r\n    }\r\n\r\n    print()\r\n    {\r\n        console.log( this.line, this.position );\r\n    }\r\n\r\n    destroy()\r\n    {\r\n        LX.deleteElement( this.root );\r\n    }\r\n\r\n    isLast(): boolean\r\n    {\r\n        return ( this.editor._getLastCursor() == this );\r\n    }\r\n}\r\n\r\nclass CodeSelection\r\n{\r\n    fromX: number;\r\n    toX: number;\r\n    fromY: number;\r\n    toY: number;\r\n    chars: number = 0;\r\n\r\n    editor: CodeEditor;\r\n    cursor: Cursor;\r\n    className: string;\r\n\r\n    constructor( editor: CodeEditor, cursor: Cursor, className: string = 'lexcodeselection' )\r\n    {\r\n        this.editor = editor;\r\n        this.cursor = cursor;\r\n        this.className = className;\r\n\r\n        this.fromX = cursor.position;\r\n        this.toX = cursor.position;\r\n        this.fromY = cursor.line;\r\n        this.toY = cursor.line;\r\n    }\r\n\r\n    sameLine()\r\n    {\r\n        return this.fromY === this.toY;\r\n    }\r\n\r\n    samePosition()\r\n    {\r\n        return this.fromX === this.toX;\r\n    }\r\n\r\n    isEmpty()\r\n    {\r\n        return this.sameLine() && this.samePosition();\r\n    }\r\n\r\n    invertIfNecessary()\r\n    {\r\n        if ( this.fromY > this.toY )\r\n        {\r\n            swapElements( this, 'fromX', 'toX' );\r\n            swapElements( this, 'fromY', 'toY' );\r\n        }\r\n        else if ( this.sameLine() && this.fromX > this.toX )\r\n        {\r\n            swapElements( this, 'fromX', 'toX' );\r\n        }\r\n    }\r\n\r\n    selectInline( cursor: Cursor, x: number, y: number, width: number, isSearchResult?: boolean )\r\n    {\r\n        this.chars = width / this.editor.charWidth;\r\n        this.fromX = x;\r\n        this.toX = x + this.chars;\r\n        this.fromY = this.toY = y;\r\n\r\n        var domEl: any = document.createElement( 'div' );\r\n        domEl.className = this.className;\r\n        domEl._top = y * this.editor.lineHeight;\r\n        domEl.style.top = domEl._top + 'px';\r\n        domEl._left = x * this.editor.charWidth;\r\n        domEl.style.left = 'calc(' + domEl._left + 'px + ' + this.editor.xPadding + ')';\r\n        domEl.style.width = width + 'px';\r\n\r\n        if ( isSearchResult )\r\n        {\r\n            this.editor.searchResultSelections.appendChild( domEl );\r\n        }\r\n        else\r\n        {\r\n            this.editor.selections[cursor.name].appendChild( domEl );\r\n        }\r\n\r\n        // Hide active line background\r\n        this.editor._hideActiveLine();\r\n    }\r\n\r\n    save()\r\n    {\r\n        return {\r\n            fromX: this.fromX,\r\n            fromY: this.fromY,\r\n            toX: this.toX,\r\n            toY: this.toY\r\n        };\r\n    }\r\n\r\n    load( data: any )\r\n    {\r\n        this.fromX = data.fromX;\r\n        this.fromY = data.fromY;\r\n        this.toX = data.toX;\r\n        this.toY = data.toY;\r\n    }\r\n\r\n    getText()\r\n    {\r\n        if ( !this.editor.code || !this.sameLine() )\r\n        {\r\n            return null;\r\n        }\r\n\r\n        return this.editor.code.lines[this.fromY].substring( this.fromX, this.toX );\r\n    }\r\n}\r\n\r\nclass ScrollBar\r\n{\r\n    static SCROLLBAR_VERTICAL = 1;\r\n    static SCROLLBAR_HORIZONTAL = 2;\r\n\r\n    static SCROLLBAR_VERTICAL_WIDTH = 10;\r\n    static SCROLLBAR_HORIZONTAL_HEIGHT = 10;\r\n\r\n    editor: CodeEditor;\r\n    type: number;\r\n    root: any;\r\n    thumb: any;\r\n    lastPosition: typeof vec2;\r\n\r\n    constructor( editor: CodeEditor, type: number )\r\n    {\r\n        this.editor = editor;\r\n        this.type = type;\r\n\r\n        this.root = document.createElement( 'div' );\r\n        this.root.className = 'lexcodescrollbar hidden';\r\n\r\n        if ( type & ScrollBar.SCROLLBAR_VERTICAL )\r\n        {\r\n            this.root.classList.add( 'vertical' );\r\n        }\r\n        else if ( type & ScrollBar.SCROLLBAR_HORIZONTAL )\r\n        {\r\n            this.root.classList.add( 'horizontal' );\r\n        }\r\n\r\n        this.thumb = document.createElement( 'div' );\r\n        this.thumb._top = 0;\r\n        this.thumb._left = 0;\r\n\r\n        this.root.appendChild( this.thumb );\r\n\r\n        this.thumb.addEventListener( 'mousedown', inner_mousedown );\r\n\r\n        this.lastPosition = new LX.vec2( 0, 0 );\r\n\r\n        let that = this;\r\n\r\n        function inner_mousedown( e: MouseEvent )\r\n        {\r\n            var doc = editor.root.ownerDocument;\r\n            doc.addEventListener( 'mousemove', inner_mousemove );\r\n            doc.addEventListener( 'mouseup', inner_mouseup );\r\n            that.lastPosition.set( e.x, e.y );\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        }\r\n\r\n        function inner_mousemove( e: MouseEvent )\r\n        {\r\n            var dt = that.lastPosition.sub( new LX.vec2( e.x, e.y ) );\r\n            if ( that.type & ScrollBar.SCROLLBAR_VERTICAL )\r\n            {\r\n                editor.updateVerticalScrollFromScrollBar( dt.y );\r\n            }\r\n            else\r\n            {\r\n                editor.updateHorizontalScrollFromScrollBar( dt.x );\r\n            }\r\n            that.lastPosition.set( e.x, e.y );\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        }\r\n\r\n        function inner_mouseup( e: MouseEvent )\r\n        {\r\n            var doc = editor.root.ownerDocument;\r\n            doc.removeEventListener( 'mousemove', inner_mousemove );\r\n            doc.removeEventListener( 'mouseup', inner_mouseup );\r\n        }\r\n    }\r\n}\r\n\r\n/* Highlight rules\r\n- test: function that receives a context object and returns true or false\r\n- className: class to apply if test is true\r\n- action: optional function to execute if test is true, receives context and editor as parameter\r\n- discard: optional boolean, if true the token is discarded, action value is returned\r\n        to \"ctx.discardToken\" and no class is applied\r\n*/\r\n\r\nconst HighlightRules: Record<string, any> = {\r\n    common: [\r\n        { test: ( ctx: any ) => ctx.inBlockComment, className: 'cm-com' },\r\n        { test: ( ctx: any ) => ctx.inString, action: ( ctx: any, editor: CodeEditor ) => editor._appendStringToken( ctx.token ), discard: true },\r\n        { test: ( ctx: any ) => ctx.token.substr( 0, ctx.singleLineCommentToken.length ) == ctx.singleLineCommentToken, className: 'cm-com' },\r\n        { test: ( ctx: any, editor: CodeEditor ) => editor._isKeyword( ctx ), className: 'cm-kwd' },\r\n        {\r\n            test: ( ctx: any, editor: CodeEditor ) =>\r\n                editor._mustHightlightWord( ctx.token, CE.builtIn, ctx.lang ) && ( ctx.lang.tags ?? false\r\n                    ? ( editor._enclosedByTokens( ctx.token, ctx.tokenIndex, '<', '>' ) )\r\n                    : true ),\r\n            className: 'cm-bln'\r\n        },\r\n        { test: ( ctx: any, editor: CodeEditor ) => editor._mustHightlightWord( ctx.token, CE.statements, ctx.lang ), className: 'cm-std' },\r\n        { test: ( ctx: any, editor: CodeEditor ) => editor._mustHightlightWord( ctx.token, CE.symbols, ctx.lang ), className: 'cm-sym' },\r\n        { test: ( ctx: any, editor: CodeEditor ) => editor._mustHightlightWord( ctx.token, CE.types, ctx.lang ), className: 'cm-typ' },\r\n        {\r\n            test: ( ctx: any, editor: CodeEditor ) => editor._isNumber( ctx.token ) || editor._isNumber( ctx.token.replace( /[px]|[em]|%/g, '' ) ),\r\n            className: 'cm-dec'\r\n        },\r\n        { test: ( ctx: any ) => ctx.lang.usePreprocessor && ctx.token.includes( '#' ), className: 'cm-ppc' }\r\n    ],\r\n\r\n    javascript: [\r\n        { test: ( ctx: any ) => ( ctx.prev === 'class' && ctx.next === '{' ), className: 'cm-typ' }\r\n    ],\r\n\r\n    typescript: [\r\n        { test: ( ctx: any ) => ctx.scope && ( ctx.token !== ',' && ctx.scope.type == 'enum' ), className: 'cm-enu' },\r\n        {\r\n            test: ( ctx: any ) =>\r\n                ( ctx.prev === ':' && ctx.next !== undefined && isLetter( ctx.token ) )\r\n                || ( ctx.prev === 'interface' && ctx.next === '{' ) || ( ctx.prev === 'enum' && ctx.next === '{' ),\r\n            className: 'cm-typ'\r\n        },\r\n        {\r\n            test: ( ctx: any ) =>\r\n                ( ctx.prev === 'class' && ctx.next === '{' ) || ( ctx.prev === 'class' && ctx.next === '<' )\r\n                || ( ctx.prev === 'new' && ctx.next === '(' ) || ( ctx.prev === 'new' && ctx.next === '<' ),\r\n            className: 'cm-typ'\r\n        },\r\n        {\r\n            test: ( ctx: any, editor: CodeEditor ) => ctx.token !== ',' && editor._enclosedByTokens( ctx.token, ctx.tokenIndex, '<', '>' ),\r\n            className: 'cm-typ'\r\n        }\r\n    ],\r\n\r\n    cpp: [\r\n        { test: ( ctx: any ) => ctx.scope && ( ctx.token !== ',' && ctx.scope.type == 'enum' ), className: 'cm-enu' },\r\n        { test: ( ctx: any ) => ctx.isEnumValueSymbol( ctx.token ), className: 'cm-enu' },\r\n        {\r\n            test: ( ctx: any ) => ( ctx.prev === 'class' && ctx.next === '{' ) || ( ctx.prev === 'struct' && ctx.next === '{' ),\r\n            className: 'cm-typ'\r\n        },\r\n        { test: ( ctx: any ) => ctx.prev === '<' && ( ctx.next === '>' || ctx.next === '*' ), className: 'cm-typ' }, // Defining template type in C++\r\n        { test: ( ctx: any ) => ctx.next === '::' || ( ctx.prev === '::' && ctx.next !== '(' ), className: 'cm-typ' }, // C++ Class\r\n        { test: ( ctx: any ) => ctx.isClassSymbol( ctx.token ) || ctx.isStructSymbol( ctx.token ), className: 'cm-typ' }\r\n    ],\r\n\r\n    wgsl: [\r\n        { test: ( ctx: any ) => ctx.prev === '>' && ( !ctx.next || ctx.next === '{' ), className: 'cm-typ' }, // Function return type\r\n        {\r\n            test: ( ctx: any ) => ( ctx.prev === ':' && ctx.next !== undefined ) || ( ctx.prev === 'struct' && ctx.next === '{' ),\r\n            className: 'cm-typ'\r\n        },\r\n        {\r\n            test: ( ctx: any, editor: CodeEditor ) => ctx.token !== ',' && editor._enclosedByTokens( ctx.token, ctx.tokenIndex, '<', '>' ),\r\n            className: 'cm-typ'\r\n        }\r\n    ],\r\n\r\n    css: [\r\n        {\r\n            test: (\r\n                ctx: any\r\n            ) => ( ctx.prev == '.' || ctx.prev == '::' || ( ctx.prev == ':' && ctx.next == '{' )\r\n                || ( ctx.token[0] == '#' && ctx.prev != ':' ) ),\r\n            className: 'cm-kwd'\r\n        },\r\n        { test: ( ctx: any ) => ctx.prev === ':' && ( ctx.next === ';' || ctx.next === '!important' ), className: 'cm-str' }, // CSS value\r\n        { test: ( ctx: any ) => ( ctx.prev === undefined || ctx.prev === '{' || ctx.prev === ';' ) && ctx.next === ':', className: 'cm-typ' }, // CSS attribute\r\n        { test: ( ctx: any ) => ctx.prev === '(' && ctx.next === ')' && ctx.token.startsWith( '--' ), className: 'cm-typ' } // CSS vars\r\n    ],\r\n\r\n    batch: [\r\n        { test: ( ctx: any ) => ctx.token === '@' || ctx.prev === ':' || ctx.prev === '@', className: 'cm-kwd' }\r\n    ],\r\n\r\n    markdown: [\r\n        { test: ( ctx: any ) => ctx.isFirstToken && ctx.token.replaceAll( '#', '' ).length != ctx.token.length,\r\n            action: ( ctx: any, editor: CodeEditor ) => editor._markdownHeader = true, className: 'cm-kwd' }\r\n    ],\r\n\r\n    php: [\r\n        { test: ( ctx: any ) => ctx.token.startsWith( '$' ), className: 'cm-var' },\r\n        {\r\n            test: ( ctx: any ) =>\r\n                ( ctx.prev === 'class' && ( ctx.next === '{' || ctx.next === 'implements' ) )\r\n                || ( ctx.prev === 'enum' ),\r\n            className: 'cm-typ'\r\n        }\r\n    ],\r\n\r\n    post_common: [\r\n        {\r\n            test: ( ctx: any ) => isLetter( ctx.token ) && ( ctx.token[0] != '@' ) && ( ctx.token[0] != ',' ) && ( ctx.next === '(' ),\r\n            className: 'cm-mtd'\r\n        }\r\n    ]\r\n};\r\n\r\n/**\r\n * @class CodeEditor\r\n */\r\n\r\nexport class CodeEditor\r\n{\r\n    static __instances: CodeEditor[] = [];\r\n\r\n    static CURSOR_LEFT = 1;\r\n    static CURSOR_TOP = 2;\r\n    static CURSOR_LEFT_TOP = CodeEditor.CURSOR_LEFT | CodeEditor.CURSOR_TOP;\r\n\r\n    static SELECTION_X = 1;\r\n    static SELECTION_Y = 2;\r\n    static SELECTION_X_Y = CodeEditor.SELECTION_X | CodeEditor.SELECTION_Y;\r\n\r\n    static KEEP_VISIBLE_LINES = 1;\r\n    static UPDATE_VISIBLE_LINES = 2;\r\n\r\n    static WORD_TYPE_METHOD = 0;\r\n    static WORD_TYPE_CLASS = 1;\r\n\r\n    static CODE_MIN_FONT_SIZE = 9;\r\n    static CODE_MAX_FONT_SIZE = 22;\r\n\r\n    static LINE_GUTTER_WIDTH = 48;\r\n\r\n    static RESIZE_SCROLLBAR_H = 1;\r\n    static RESIZE_SCROLLBAR_V = 2;\r\n    static RESIZE_SCROLLBAR_H_V = CodeEditor.RESIZE_SCROLLBAR_H | CodeEditor.RESIZE_SCROLLBAR_V;\r\n\r\n    static languages: Record<string, any> = {};\r\n    static keywords: any;\r\n    static utils: any;\r\n    static types: any;\r\n    static builtIn: any;\r\n    static statements: any;\r\n    static declarationKeywords: any;\r\n    static symbols: any;\r\n    static nativeTypes: any;\r\n\r\n    static debugScopes: boolean = false;\r\n    static debugSymbols: boolean = false;\r\n    static debugProcessedLines: boolean = false;\r\n\r\n    static _staticReady: boolean = false;\r\n\r\n    // Layout\r\n    root: any;\r\n    baseArea: typeof Area;\r\n    area: typeof Area;\r\n    codeArea: typeof Area;\r\n    explorerArea: any;\r\n    code: any;\r\n    gutter!: HTMLElement;\r\n    xPadding: string = '0px';\r\n    hScrollbar!: ScrollBar;\r\n    vScrollbar!: ScrollBar;\r\n    codeScroller: any;\r\n    codeSizer: any;\r\n    explorer: typeof Tree;\r\n    tabs: typeof Tabs;\r\n    cursorsDOM: any;\r\n    cursors: Cursor[] = [];\r\n    mustProcessLines: boolean = false;\r\n    blinker: any;\r\n    statusPanel: typeof Panel;\r\n    leftStatusPanel: typeof Panel;\r\n    rightStatusPanel: typeof Panel;\r\n    lineScrollMargin: typeof vec2;\r\n    autocomplete!: HTMLElement;\r\n    searchbox!: HTMLElement;\r\n    searchlinebox!: HTMLElement;\r\n\r\n    // Editor\r\n    openedTabs: Record<string, any> = {};\r\n    loadedTabs: Record<string, any> = {};\r\n    actions: Record<string, any> = {};\r\n    state!: Record<string, any>;\r\n    pairKeys!: Record<string, string>;\r\n    stringKeys!: Record<string, string>;\r\n    visibleLinesViewport: typeof vec2 = new LX.vec2( 0, 0 );\r\n    searchResultSelections: any;\r\n    firstLineInViewport: number = -1;\r\n    selections: Record<string, any> = {};\r\n    specialKeys!: string[];\r\n    canOpenContextMenu: boolean = true;\r\n    wasKeyPaired: boolean | undefined = undefined;\r\n    mustProcessNextLine!: (( s: string[] ) => boolean) | undefined;\r\n    mustProcessPreviousLine!: (( s: string[] ) => boolean) | undefined;\r\n\r\n    // Code\r\n    cursorBlinkRate: number = 550;\r\n    tabSpaces: number = 4;\r\n    maxUndoSteps: number = 16;\r\n    lineHeight: number = 20;\r\n    charWidth: number = 7; // To update later depending on size..\r\n    fontSize: number = 14;\r\n    defaultSingleLineCommentToken: string = '//';\r\n    defaultBlockCommentTokens: string[] = [ '/*', '*/' ];\r\n    isAutoCompleteActive: boolean = false;\r\n    isSearchboxActive: boolean = false;\r\n    isSearchlineboxActive: boolean = false;\r\n\r\n    // Editor options\r\n    skipInfo: boolean = false;\r\n    disableEdition: boolean = false;\r\n    skipTabs: boolean = false;\r\n    useFileExplorer: boolean = false;\r\n    useAutoComplete: boolean = true;\r\n    allowClosingTabs: boolean = true;\r\n    allowLoadingFiles: boolean = true;\r\n    highlight: string = 'Plain Text';\r\n    explorerName: string = 'EXPLORER';\r\n    newTabOptions: any;\r\n    customSuggestions: any[] = [];\r\n\r\n    // Editor callbacks\r\n    onContextMenu: any;\r\n    onCreateFile: any;\r\n    onCreateStatusPanel: any;\r\n    onCtrlSpace: any;\r\n    onNewTab: any;\r\n    onSave: any;\r\n    onSelectTab: any;\r\n    onReady: any;\r\n    onRun: any;\r\n\r\n    // Inner functions\r\n    addExplorerItem: any;\r\n\r\n    // Internal variables\r\n    _blockCommentCache: any[] = [];\r\n    _buildingBlockComment: any = undefined;\r\n    _buildingString: any = undefined;\r\n    _currentOcurrences: any = undefined;\r\n    _currentLineNumber: number | undefined = undefined;\r\n    _currentLineString: string | undefined = undefined;\r\n    _currentTokenPositions: any = undefined;\r\n    _discardScroll: boolean = false;\r\n    _displayObserver: any = null;\r\n    _fullVerticalOffset: number = -1;\r\n    _isReady: boolean = false;\r\n    _lastTime: any = null;\r\n    _lastProcessedLine: number = -1;\r\n    _lastResult: any = undefined;\r\n    _lastSelectionKeyDir: any = undefined;\r\n    _lastProcessedCursorIndex: any = null;\r\n    _lastMaxLineLength: number | undefined = undefined;\r\n    _lastMouseDown: number = 0;\r\n    _lastTextFound: string = '';\r\n    _lastBaseareaWidth: number | undefined = undefined;\r\n    _markdownHeader: any = undefined;\r\n    _mouseDown: boolean | undefined = undefined;\r\n    _nextCursorPositionOffset: number | undefined = undefined;\r\n    _pendingString: string | undefined = undefined;\r\n    _preparedAt: number | undefined = undefined;\r\n    _scopeStack: any = null;\r\n    _scopesUpdated: boolean | undefined = undefined;\r\n    _skipTabs: number | undefined = undefined;\r\n    _stringEnded: boolean = false;\r\n    _stringInterpolation: boolean | undefined = undefined;\r\n    _stringInterpolationOpened: boolean | undefined = undefined;\r\n    _tabStorage: Record<string, any> = {};\r\n    _tripleClickSelection: any = undefined;\r\n    _verticalBottomOffset: number = -1;\r\n    _verticalTopOffset: number = -1;\r\n\r\n    constructor( area: typeof Area, options: any = {} )\r\n    {\r\n        if ( options.filesAsync )\r\n        {\r\n            options.files = [ ...options.filesAsync ];\r\n\r\n            const instance: any = ( async () => {\r\n                await this._init( area, options );\r\n                // Constructors return `this` implicitly, but this is an IIFE, so\r\n                // return `this` explicitly (else we'd return an empty object).\r\n                return this;\r\n            } )();\r\n            return instance;\r\n        }\r\n        else\r\n        {\r\n            this._init( area, options );\r\n        }\r\n    }\r\n\r\n    async _init( area: typeof Area, options: any = {} ): Promise<void>\r\n    {\r\n        g.editor = this;\r\n\r\n        CodeEditor.__instances.push( this );\r\n\r\n        this.skipInfo = options.skipInfo ?? this.skipInfo;\r\n        this.disableEdition = options.disableEdition ?? this.disableEdition;\r\n        this.skipTabs = options.skipTabs ?? this.skipTabs;\r\n        this.useFileExplorer = ( options.fileExplorer ?? this.useFileExplorer ) && !this.skipTabs;\r\n        this.useAutoComplete = options.autocomplete ?? this.useAutoComplete;\r\n        this.allowClosingTabs = options.allowClosingTabs ?? this.allowClosingTabs;\r\n        this.allowLoadingFiles = options.allowLoadingFiles ?? this.allowLoadingFiles;\r\n        this.highlight = options.highlight ?? this.highlight;\r\n        this.newTabOptions = options.newTabOptions;\r\n        this.customSuggestions = options.customSuggestions ?? [];\r\n        this.explorerName = options.explorerName ?? this.explorerName;\r\n\r\n        // Editor callbacks\r\n        this.onSave = options.onSave ?? options.onsave; // LEGACY onsave\r\n        this.onRun = options.onRun ?? options.onrun; // LEGACY onrun\r\n        this.onCtrlSpace = options.onCtrlSpace;\r\n        this.onCreateStatusPanel = options.onCreateStatusPanel;\r\n        this.onContextMenu = options.onContextMenu;\r\n        this.onNewTab = options.onNewTab;\r\n        this.onSelectTab = options.onSelectTab;\r\n        this.onReady = options.onReady;\r\n\r\n        // File explorer\r\n        if ( this.useFileExplorer )\r\n        {\r\n            let [ explorerArea, editorArea ] = area.split( { sizes: [ '15%', '85%' ] } );\r\n            // explorerArea.setLimitBox( 180, 20, 512 );\r\n            this.explorerArea = explorerArea;\r\n\r\n            let panel = new LX.Panel();\r\n\r\n            panel.addTitle( this.explorerName );\r\n\r\n            let sceneData: any[] = [];\r\n\r\n            this.explorer = panel.addTree( null, sceneData, {\r\n                filter: false,\r\n                rename: false,\r\n                skipDefaultIcon: true\r\n            } );\r\n\r\n            this.explorer.on( 'dblClick', ( event: any ) => {\r\n                const node = event.items[0];\r\n                this.loadTab( node.id );\r\n            } );\r\n\r\n            this.explorer.on( 'delete', ( event: any ) => {\r\n                const node = event.items[0];\r\n                this.closeTab( node.id );\r\n            } );\r\n\r\n            this.addExplorerItem = function( item: any )\r\n            {\r\n                if ( !this.explorer.innerTree.data.find( ( value: any, index: number ) => value.id === item.id ) )\r\n                {\r\n                    this.explorer.innerTree.data.push( item );\r\n                }\r\n            };\r\n\r\n            explorerArea.attach( panel );\r\n\r\n            // Update area\r\n            area = editorArea;\r\n        }\r\n\r\n        this.baseArea = area;\r\n        this.area = new LX.Area( { className: 'lexcodeeditor outline-none overflow-hidden size-full select-none bg-inherit', skipAppend: true } );\r\n\r\n        if ( !this.skipTabs )\r\n        {\r\n            this.tabs = this.area.addTabs( { onclose: ( name: string ) => {\r\n                delete this.openedTabs[name];\r\n                if ( Object.keys( this.openedTabs ).length < 2 )\r\n                {\r\n                    clearInterval( this.blinker );\r\n                    LX.removeClass( this.cursorsDOM, 'show' );\r\n                }\r\n            } } );\r\n\r\n            LX.addClass( this.tabs.root.parentElement, 'rounded-t-lg' );\r\n\r\n            if ( !this.disableEdition )\r\n            {\r\n                this.tabs.root.parentElement.addEventListener( 'dblclick', ( e: MouseEvent ) => {\r\n                    if ( options.allowAddScripts ?? true )\r\n                    {\r\n                        e.preventDefault();\r\n                        this._onCreateNewFile();\r\n                    }\r\n                } );\r\n            }\r\n\r\n            this.codeArea = this.tabs.area;\r\n        }\r\n        else\r\n        {\r\n            this.codeArea = new LX.Area( { skipAppend: true } );\r\n            this.area.attach( this.codeArea );\r\n            const loadFileButton = LX.makeElement( 'button',\r\n                'grid absolute place-self-center z-100 p-3 rounded-full bg-secondary hover:bg-accent cursor-pointer border-color',\r\n                LX.makeIcon( 'FolderOpen' ).innerHTML, this.area, {\r\n                bottom: '8px'\r\n            } );\r\n            loadFileButton.addEventListener( 'click', ( e: MouseEvent ) => {\r\n                const dropdownOptions = [];\r\n\r\n                for ( const [ key, value ] of [ ...Object.entries( this.loadedTabs ).slice( 1 ), ...Object.entries( this._tabStorage ) ] )\r\n                {\r\n                    const icon = this._getFileIcon( key );\r\n                    const classes = icon ? icon.split( ' ' ) : [];\r\n                    dropdownOptions.push( {\r\n                        name: key,\r\n                        icon: classes[0],\r\n                        svgClass: classes.slice( 0 ).join( ' ' ),\r\n                        callback: ( entryName: string ) => {\r\n                            this.loadCode( entryName );\r\n                        }\r\n                    } );\r\n                }\r\n\r\n                new LX.DropdownMenu( loadFileButton, dropdownOptions, { side: 'top', align: 'center' } );\r\n            } );\r\n        }\r\n\r\n        this.codeArea.root.classList.add( 'lexcodearea', 'scrollbar-hidden' );\r\n\r\n        const codeResizeObserver = new ResizeObserver( ( entries ) => {\r\n            if ( !this.code )\r\n            {\r\n                return;\r\n            }\r\n\r\n            this.resize();\r\n        } );\r\n        codeResizeObserver.observe( this.codeArea.root );\r\n\r\n        // Full editor\r\n        area.root.className = LX.mergeClass( area.root.className, 'codebasearea flex relative bg-card' );\r\n\r\n        const observer = new MutationObserver( ( e ) => {\r\n            if ( e[0].attributeName == 'style' )\r\n            {\r\n                this.resize();\r\n            }\r\n        } );\r\n\r\n        observer.observe( area.root.parentNode, {\r\n            attributes: true,\r\n            attributeFilter: [ 'class', 'style' ]\r\n        } );\r\n\r\n        this.root = this.area.root;\r\n        this.root.tabIndex = -1;\r\n        area.attach( this.root );\r\n\r\n        if ( !this.disableEdition )\r\n        {\r\n            this.root.addEventListener( 'keydown', this.processKey.bind( this ) );\r\n            this.root.addEventListener( 'focus', this.processFocus.bind( this, true ) );\r\n            this.root.addEventListener( 'focusout', this.processFocus.bind( this, false ) );\r\n        }\r\n        else\r\n        {\r\n            this.root.classList.add( 'disabled' );\r\n        }\r\n\r\n        this.root.addEventListener( 'mousedown', this.processMouse.bind( this ) );\r\n        this.root.addEventListener( 'mouseup', this.processMouse.bind( this ) );\r\n        this.root.addEventListener( 'mousemove', this.processMouse.bind( this ) );\r\n        this.root.addEventListener( 'click', this.processMouse.bind( this ) );\r\n        this.root.addEventListener( 'contextmenu', this.processMouse.bind( this ) );\r\n\r\n        // Add mouseup event to document as well to detect when selections end\r\n        document.body.addEventListener( 'mouseup', this._onMouseUp.bind( this ) );\r\n\r\n        // Cursors and selection\r\n\r\n        this.cursorsDOM = document.createElement( 'div' );\r\n        this.cursorsDOM.className = 'cursors';\r\n        this.codeArea.attach( this.cursorsDOM );\r\n\r\n        this.searchResultSelections = document.createElement( 'div' );\r\n        this.searchResultSelections.id = 'search-selections';\r\n        this.searchResultSelections.className = 'selections';\r\n        this.codeArea.attach( this.searchResultSelections );\r\n\r\n        // Store here selections per cursor\r\n        this.selections = {};\r\n\r\n        // Css char synchronization\r\n        this.xPadding = CodeEditor.LINE_GUTTER_WIDTH + 'px';\r\n\r\n        // Add main cursor\r\n        this._addCursor( 0, 0, true, true );\r\n\r\n        // Scroll stuff\r\n        {\r\n            this.codeScroller = this.codeArea.root;\r\n            this.firstLineInViewport = 0;\r\n            this.lineScrollMargin = new LX.vec2( 20, 20 ); // [ mUp, mDown ]\r\n\r\n            let lastScrollTopValue = -1;\r\n\r\n            if ( !this.disableEdition )\r\n            {\r\n                this.codeScroller.addEventListener( 'scroll', ( e: any ) => {\r\n                    if ( this._discardScroll )\r\n                    {\r\n                        this._discardScroll = false;\r\n                        return;\r\n                    }\r\n\r\n                    // Vertical scroll\r\n                    {\r\n                        this.setScrollBarValue( 'vertical' );\r\n\r\n                        const scrollTop = this.getScrollTop();\r\n\r\n                        // Scroll down...\r\n                        if ( scrollTop > lastScrollTopValue )\r\n                        {\r\n                            if ( this.visibleLinesViewport.y < ( this.code.lines.length - 1 ) )\r\n                            {\r\n                                const totalLinesInViewport = ( ( this.codeScroller.offsetHeight ) / this.lineHeight )\r\n                                    | 0;\r\n                                const scrollDownBoundary = ( Math.max( this.visibleLinesViewport.y - totalLinesInViewport, 0 ) - 1 )\r\n                                    * this.lineHeight;\r\n\r\n                                if ( scrollTop >= scrollDownBoundary )\r\n                                {\r\n                                    this.processLines( CodeEditor.UPDATE_VISIBLE_LINES );\r\n                                }\r\n                            }\r\n                        }\r\n                        // Scroll up...\r\n                        else\r\n                        {\r\n                            const scrollUpBoundary = parseInt( this.code.style.top );\r\n                            if ( scrollTop < scrollUpBoundary )\r\n                            {\r\n                                this.processLines( CodeEditor.UPDATE_VISIBLE_LINES );\r\n                            }\r\n                        }\r\n\r\n                        lastScrollTopValue = scrollTop;\r\n                    }\r\n\r\n                    // Horizontal scroll\r\n                    {\r\n                        this.setScrollBarValue( 'horizontal' );\r\n                    }\r\n                } );\r\n\r\n                this.codeScroller.addEventListener( 'wheel', ( e: WheelEvent ) => {\r\n                    if ( e.ctrlKey )\r\n                    {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                        e.deltaY > 0.0 ? this._decreaseFontSize() : this._increaseFontSize();\r\n                    }\r\n                } );\r\n\r\n                this.codeScroller.addEventListener( 'wheel', ( e: WheelEvent ) => {\r\n                    if ( !e.ctrlKey )\r\n                    {\r\n                        const dX = ( e.deltaY > 0.0 ? 10.0 : -10.0 ) * ( e.shiftKey ? 1.0 : 0.0 );\r\n                        if ( dX != 0.0 ) this.setScrollBarValue( 'horizontal', dX );\r\n                    }\r\n                }, { passive: true } );\r\n            }\r\n        }\r\n\r\n        // Line numbers and scrollbars\r\n        {\r\n            // This is only the container, line numbers are in the same line div\r\n            this.gutter = document.createElement( 'div' );\r\n            this.gutter.className = 'lexcodegutter';\r\n            area.attach( this.gutter );\r\n\r\n            // Add custom vertical scroll bar\r\n            this.vScrollbar = new ScrollBar( this, ScrollBar.SCROLLBAR_VERTICAL );\r\n            area.attach( this.vScrollbar.root );\r\n\r\n            // Add custom horizontal scroll bar\r\n            this.hScrollbar = new ScrollBar( this, ScrollBar.SCROLLBAR_HORIZONTAL );\r\n            area.attach( this.hScrollbar.root );\r\n        }\r\n\r\n        // Add autocomplete, search boxes (IF edition enabled)\r\n        if ( !this.disableEdition )\r\n        {\r\n            // Add autocomplete box\r\n            {\r\n                this.autocomplete = document.createElement( 'div' );\r\n                this.autocomplete.className = 'autocomplete';\r\n                this.codeArea.attach( this.autocomplete );\r\n            }\r\n\r\n            // Add search box\r\n            {\r\n                const box = document.createElement( 'div' );\r\n                box.className = 'searchbox';\r\n\r\n                const searchPanel = new LX.Panel();\r\n                box.appendChild( searchPanel.root );\r\n\r\n                searchPanel.sameLine( 4 );\r\n                searchPanel.addText( null, '', null, { placeholder: 'Find', inputClass: 'bg-secondary' } );\r\n                searchPanel.addButton( null, 'up', () => this.search( null, true ), { icon: 'ArrowUp', buttonClass: 'ghost', title: 'Previous Match',\r\n                    tooltip: true } );\r\n                searchPanel.addButton( null, 'down', () => this.search(), { icon: 'ArrowDown', buttonClass: 'ghost', title: 'Next Match',\r\n                    tooltip: true } );\r\n                searchPanel.addButton( null, 'x', this.hideSearchBox.bind( this ), { icon: 'X', buttonClass: 'ghost', title: 'Close',\r\n                    tooltip: true } );\r\n\r\n                const searchInput = box.querySelector( 'input' );\r\n                searchInput?.addEventListener( 'keyup', ( e ) => {\r\n                    if ( e.key == 'Escape' ) this.hideSearchBox();\r\n                    else if ( e.key == 'Enter' ) this.search( ( e.target as any ).value, !!e.shiftKey );\r\n                } );\r\n\r\n                this.searchbox = box;\r\n                this.codeArea.attach( box );\r\n            }\r\n\r\n            // Add search LINE box\r\n            {\r\n                const box = document.createElement( 'div' );\r\n                box.className = 'searchbox';\r\n\r\n                const searchPanel = new LX.Panel();\r\n                box.appendChild( searchPanel.root );\r\n\r\n                searchPanel.sameLine( 2 );\r\n                searchPanel.addText( null, '', ( value: string ) => {\r\n                    input.value = ':' + value.replaceAll( ':', '' );\r\n                    this.goToLine( input.value.slice( 1 ) );\r\n                }, { placeholder: 'Go to line', trigger: 'input' } );\r\n                searchPanel.addButton( null, 'x', this.hideSearchLineBox.bind( this ), { icon: 'X', title: 'Close', buttonClass: 'ghost',\r\n                    tooltip: true } );\r\n\r\n                let input: any = box.querySelector( 'input' );\r\n                input.addEventListener( 'keyup', ( e: KeyboardEvent ) => {\r\n                    if ( e.key == 'Escape' ) this.hideSearchLineBox();\r\n                } );\r\n\r\n                this.searchlinebox = box;\r\n                this.codeArea.attach( box );\r\n            }\r\n        }\r\n\r\n        // Add code-sizer\r\n        {\r\n            this.codeSizer = document.createElement( 'div' );\r\n            this.codeSizer.className = 'code-sizer pseudoparent-tabs';\r\n\r\n            // Append all childs\r\n            while ( this.codeScroller.firstChild )\r\n            {\r\n                this.codeSizer.appendChild( this.codeScroller.firstChild );\r\n            }\r\n\r\n            this.codeScroller.appendChild( this.codeSizer );\r\n        }\r\n\r\n        // State\r\n\r\n        this.state = {\r\n            focused: false,\r\n            selectingText: false,\r\n            activeLine: null,\r\n            keyChain: null\r\n        };\r\n\r\n        // Code\r\n\r\n        this.pairKeys = {\r\n            '\"': '\"',\r\n            \"'\": \"'\",\r\n            '(': ')',\r\n            '{': '}',\r\n            '[': ']'\r\n        };\r\n\r\n        this.stringKeys = { // adding @ because some words are always true in (e.g. constructor..)\r\n            '@\"': '\"',\r\n            \"@'\": \"'\"\r\n        };\r\n\r\n        // Scan tokens..\r\n        // setInterval( this.scanWordSuggestions.bind( this ), 2000 );\r\n\r\n        this.specialKeys = [\r\n            'Backspace',\r\n            'Enter',\r\n            'ArrowUp',\r\n            'ArrowDown',\r\n            'ArrowRight',\r\n            'ArrowLeft',\r\n            'Delete',\r\n            'Home',\r\n            'End',\r\n            'Tab',\r\n            'Escape'\r\n        ];\r\n\r\n        // Convert reserved word arrays to maps so we can search tokens faster\r\n\r\n        if ( !CodeEditor._staticReady )\r\n        {\r\n            for ( let lang in CodeEditor.keywords ) CodeEditor.keywords[lang] = new Set( CodeEditor.keywords[lang] );\r\n            for ( let lang in CodeEditor.utils ) CodeEditor.utils[lang] = new Set( CodeEditor.utils[lang] );\r\n            for ( let lang in CodeEditor.types ) CodeEditor.types[lang] = new Set( CodeEditor.types[lang] );\r\n            for ( let lang in CodeEditor.builtIn ) CodeEditor.builtIn[lang] = new Set( CodeEditor.builtIn[lang] );\r\n            for ( let lang in CodeEditor.statements ) CodeEditor.statements[lang] = new Set( CodeEditor.statements[lang] );\r\n            for ( let lang in CodeEditor.symbols ) CodeEditor.symbols[lang] = new Set( CodeEditor.symbols[lang] );\r\n\r\n            CodeEditor._staticReady = true;\r\n        }\r\n\r\n        // Action keys\r\n        {\r\n            this.action( 'Escape', false, ( ln, cursor, e ) => {\r\n                if ( this.hideAutoCompleteBox() )\r\n                {\r\n                    return;\r\n                }\r\n                if ( this.hideSearchBox() )\r\n                {\r\n                    return;\r\n                }\r\n                // Remove selections and cursors\r\n                this.endSelection();\r\n                this._removeSecondaryCursors();\r\n            } );\r\n\r\n            this.action( 'Backspace', false, ( ln, cursor, e ) => {\r\n                this._addUndoStep( cursor );\r\n\r\n                if ( cursor.selection )\r\n                {\r\n                    this.deleteSelection( cursor );\r\n                    // Remove entire line when selecting with triple click\r\n                    if ( this._tripleClickSelection )\r\n                    {\r\n                        this.actions['Backspace'].callback( ln, cursor, e );\r\n                        this.lineDown( cursor, true );\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    var letter = this.getCharAtPos( cursor, -1 );\r\n                    if ( letter )\r\n                    {\r\n                        var deleteFromPosition = cursor.position - 1;\r\n                        var numCharsDeleted = 1;\r\n\r\n                        // Delete full word\r\n                        if ( e.ctrlKey )\r\n                        {\r\n                            const [ word, from, to ] = this.getWordAtPos( cursor, -1 );\r\n\r\n                            if ( word.length > 1 )\r\n                            {\r\n                                deleteFromPosition = from;\r\n                                numCharsDeleted = word.length - ( to - cursor.position );\r\n                            }\r\n                        }\r\n\r\n                        this.code.lines[ln] = sliceChars( this.code.lines[ln], deleteFromPosition, numCharsDeleted );\r\n                        this.processLine( ln );\r\n\r\n                        this.cursorToPosition( cursor, deleteFromPosition );\r\n\r\n                        if ( this.useAutoComplete )\r\n                        {\r\n                            this.showAutoCompleteBox( 'foo', cursor );\r\n                        }\r\n                    }\r\n                    else if ( this.code.lines[ln - 1] != undefined )\r\n                    {\r\n                        this.lineUp( cursor );\r\n                        e.cancelShift = true;\r\n                        this.actions['End'].callback( cursor.line, cursor, e );\r\n                        // Move line on top\r\n                        this.code.lines[ln - 1] += this.code.lines[ln];\r\n                        this.code.lines.splice( ln, 1 );\r\n                        this.processLines();\r\n                    }\r\n                }\r\n\r\n                this.resizeIfNecessary( cursor, true );\r\n            } );\r\n\r\n            this.action( 'Delete', false, ( ln, cursor, e ) => {\r\n                this._addUndoStep( cursor );\r\n\r\n                if ( cursor.selection )\r\n                {\r\n                    // Use 'Backspace' as it's the same callback...\r\n                    this.actions['Backspace'].callback( ln, cursor, e );\r\n                }\r\n                else\r\n                {\r\n                    var letter = this.getCharAtPos( cursor );\r\n                    if ( letter )\r\n                    {\r\n                        this.code.lines[ln] = sliceChars( this.code.lines[ln], cursor.position );\r\n                        this.processLine( ln );\r\n\r\n                        // \"Delete\" removes the char at the right, so cursor position does not change\r\n                        // but line length does and next cursor position must be updated 1 position to the left\r\n                        this._nextCursorPositionOffset = -1;\r\n                    }\r\n                    else if ( this.code.lines[ln + 1] != undefined )\r\n                    {\r\n                        this.code.lines[ln] += this.code.lines[ln + 1];\r\n                        this.code.lines.splice( ln + 1, 1 );\r\n                        this.processLines();\r\n                    }\r\n                }\r\n\r\n                this.resizeIfNecessary( cursor, true );\r\n            } );\r\n\r\n            this.action( 'Tab', true, ( ln, cursor, e ) => {\r\n                if ( this._skipTabs )\r\n                {\r\n                    this._skipTabs--;\r\n                    if ( !this._skipTabs )\r\n                    {\r\n                        delete this._skipTabs;\r\n                    }\r\n                }\r\n                else if ( this.isAutoCompleteActive )\r\n                {\r\n                    this.autoCompleteWord();\r\n                }\r\n                else\r\n                {\r\n                    this._addUndoStep( cursor );\r\n\r\n                    if ( e && e.shiftKey )\r\n                    {\r\n                        this._removeSpaces( cursor );\r\n                    }\r\n                    else\r\n                    {\r\n                        const indentSpaces = this.tabSpaces - ( cursor.position % this.tabSpaces );\r\n                        this._addSpaces( cursor, indentSpaces );\r\n                    }\r\n                }\r\n            }, ( cursor: Cursor, e: KeyboardEvent ) => {\r\n                return e.shiftKey || ( cursor.selection && !cursor.selection.sameLine() );\r\n            } );\r\n\r\n            this.action( 'Home', false, ( ln, cursor, e ) => {\r\n                let idx = firstNonspaceIndex( this.code.lines[ln] );\r\n\r\n                // We already are in the first non space index...\r\n                if ( idx == cursor.position ) idx = 0;\r\n\r\n                const prestring = this.code.lines[ln].substring( 0, idx );\r\n                let lastX = cursor.position;\r\n\r\n                this.resetCursorPos( CodeEditor.CURSOR_LEFT, cursor, true );\r\n                if ( idx > 0 )\r\n                {\r\n                    this.cursorToString( cursor, prestring );\r\n                }\r\n                else\r\n                {\r\n                    // No spaces, start from char 0\r\n                    idx = 0;\r\n                }\r\n\r\n                this.mergeCursors( ln );\r\n\r\n                if ( e.shiftKey && !e.cancelShift )\r\n                {\r\n                    // Get last selection range\r\n                    if ( cursor.selection )\r\n                    {\r\n                        lastX += cursor.selection.chars;\r\n                    }\r\n\r\n                    if ( !cursor.selection )\r\n                    {\r\n                        this.startSelection( cursor );\r\n                    }\r\n\r\n                    var string = this.code.lines[ln].substring( idx, lastX );\r\n                    if ( cursor.selection!.sameLine() )\r\n                    {\r\n                        cursor.selection!.selectInline( cursor, idx, cursor.line, this.measureString( string ) );\r\n                    }\r\n                    else\r\n                    {\r\n                        this._processSelection( cursor, e );\r\n                    }\r\n                }\r\n                else if ( !e.keepSelection )\r\n                {\r\n                    this.endSelection();\r\n                }\r\n            } );\r\n\r\n            this.action( 'End', false, ( ln, cursor, e ) => {\r\n                if ( ( e.shiftKey || e._shiftKey ) && !e.cancelShift )\r\n                {\r\n                    var string = this.code.lines[ln].substring( cursor.position );\r\n                    if ( !cursor.selection )\r\n                    {\r\n                        this.startSelection( cursor );\r\n                    }\r\n                    if ( cursor.selection!.sameLine() )\r\n                    {\r\n                        cursor.selection!.selectInline( cursor, cursor.position, cursor.line, this.measureString( string ) );\r\n                    }\r\n                    else\r\n                    {\r\n                        this.resetCursorPos( CodeEditor.CURSOR_LEFT, cursor );\r\n                        this.cursorToString( cursor, this.code.lines[ln] );\r\n                        this._processSelection( cursor, e );\r\n                    }\r\n                }\r\n                else if ( !e.keepSelection )\r\n                {\r\n                    this.endSelection();\r\n                }\r\n\r\n                this.resetCursorPos( CodeEditor.CURSOR_LEFT, cursor );\r\n                this.cursorToString( cursor, this.code.lines[ln] );\r\n\r\n                var viewportSizeX = ( this.codeScroller.clientWidth + this.getScrollLeft() )\r\n                    - CodeEditor.LINE_GUTTER_WIDTH; // Gutter offset\r\n                if ( ( cursor.position * this.charWidth ) >= viewportSizeX )\r\n                {\r\n                    this.setScrollLeft( this.code.lines[ln].length * this.charWidth );\r\n                }\r\n\r\n                // Merge cursors\r\n                this.mergeCursors( ln );\r\n            } );\r\n\r\n            this.action( 'Enter', true, ( ln, cursor, e ) => {\r\n                // Add word\r\n                if ( this.isAutoCompleteActive )\r\n                {\r\n                    this.autoCompleteWord();\r\n                    return;\r\n                }\r\n\r\n                if ( e.ctrlKey && this.onRun )\r\n                {\r\n                    this.onRun( this.getText() );\r\n                    return;\r\n                }\r\n\r\n                this._addUndoStep( cursor, true );\r\n\r\n                var _c0 = this.getCharAtPos( cursor, -1 );\r\n                var _c1 = this.getCharAtPos( cursor );\r\n\r\n                this.code.lines.splice( cursor.line + 1, 0, '' );\r\n                this.code.lines[cursor.line + 1] = this.code.lines[ln].substr( cursor.position ); // new line (below)\r\n                this.code.lines[ln] = this.code.lines[ln].substr( 0, cursor.position ); // line above\r\n\r\n                this.lineDown( cursor, true );\r\n\r\n                // Check indentation\r\n                var spaces = firstNonspaceIndex( this.code.lines[ln] );\r\n                var tabs = Math.floor( spaces / this.tabSpaces );\r\n\r\n                if ( _c0 == '{' && _c1 == '}' )\r\n                {\r\n                    this.code.lines.splice( cursor.line, 0, '' );\r\n                    this._addSpaceTabs( cursor, tabs + 1 );\r\n                    this.code.lines[cursor.line + 1] = ' '.repeat( spaces ) + this.code.lines[cursor.line + 1];\r\n                }\r\n                else\r\n                {\r\n                    this._addSpaceTabs( cursor, tabs );\r\n                }\r\n\r\n                this.processLines();\r\n            } );\r\n\r\n            this.action( 'ArrowUp', false, ( ln, cursor, e ) => {\r\n                // Move cursor..\r\n                if ( !this.isAutoCompleteActive )\r\n                {\r\n                    if ( e.shiftKey )\r\n                    {\r\n                        if ( !cursor.selection )\r\n                        {\r\n                            this.startSelection( cursor );\r\n                        }\r\n\r\n                        this.lineUp( cursor );\r\n\r\n                        var letter = this.getCharAtPos( cursor );\r\n                        if ( !letter )\r\n                        {\r\n                            this.cursorToPosition( cursor, this.code.lines[cursor.line].length );\r\n                        }\r\n\r\n                        this._processSelection( cursor, e, false );\r\n                    }\r\n                    else\r\n                    {\r\n                        this.endSelection();\r\n                        this.lineUp( cursor );\r\n                        // Go to end of line if out of line\r\n                        var letter = this.getCharAtPos( cursor );\r\n                        if ( !letter ) this.actions['End'].callback( cursor.line, cursor, e );\r\n                    }\r\n                }\r\n                // Move up autocomplete selection\r\n                else\r\n                {\r\n                    this._moveArrowSelectedAutoComplete( 'up' );\r\n                }\r\n            } );\r\n\r\n            this.action( 'ArrowDown', false, ( ln, cursor, e ) => {\r\n                // Move cursor..\r\n                if ( !this.isAutoCompleteActive )\r\n                {\r\n                    if ( e.shiftKey )\r\n                    {\r\n                        if ( !cursor.selection )\r\n                        {\r\n                            this.startSelection( cursor );\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        this.endSelection();\r\n                    }\r\n\r\n                    const canGoDown = this.lineDown( cursor );\r\n                    const letter = this.getCharAtPos( cursor );\r\n\r\n                    // Go to end of line if out of range\r\n                    if ( !letter || !canGoDown )\r\n                    {\r\n                        this.resetCursorPos( CodeEditor.CURSOR_LEFT, cursor );\r\n                        this.cursorToRight( this.code.lines[cursor.line], cursor );\r\n                    }\r\n\r\n                    if ( e.shiftKey )\r\n                    {\r\n                        this._processSelection( cursor, e );\r\n                    }\r\n                }\r\n                // Move down autocomplete selection\r\n                else\r\n                {\r\n                    this._moveArrowSelectedAutoComplete( 'down' );\r\n                }\r\n            } );\r\n\r\n            this.action( 'ArrowLeft', false, ( ln, cursor, e ) => {\r\n                // Nothing to do..\r\n                if ( cursor.line == 0 && cursor.position == 0 )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                if ( e.metaKey )\r\n                { // Apple devices (Command)\r\n                    e.preventDefault();\r\n                    this.actions['Home'].callback( ln, cursor, e );\r\n                }\r\n                else if ( e.ctrlKey )\r\n                {\r\n                    // Get next word\r\n                    const [ word, from, to ] = this.getWordAtPos( cursor, -1 );\r\n                    // If no length, we change line..\r\n                    if ( !word.length && this.lineUp( cursor, true ) )\r\n                    {\r\n                        const cS = e.cancelShift, kS = e.keepSelection;\r\n                        e.cancelShift = true;\r\n                        e.keepSelection = true;\r\n                        this.actions['End'].callback( cursor.line, cursor, e );\r\n                        e.cancelShift = cS;\r\n                        e.keepSelection = kS;\r\n                    }\r\n                    var diff = Math.max( cursor.position - from, 1 );\r\n                    var substr = word.substr( 0, diff );\r\n\r\n                    // Selections...\r\n                    if ( e.shiftKey )\r\n                    {\r\n                        if ( !cursor.selection )\r\n                        {\r\n                            this.startSelection( cursor );\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        this.endSelection();\r\n                    }\r\n\r\n                    this.cursorToString( cursor, substr, true );\r\n\r\n                    if ( e.shiftKey )\r\n                    {\r\n                        this._processSelection( cursor, e );\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    var letter = this.getCharAtPos( cursor, -1 );\r\n                    if ( letter )\r\n                    {\r\n                        if ( e.shiftKey )\r\n                        {\r\n                            if ( !cursor.selection ) this.startSelection( cursor );\r\n                            this.cursorToLeft( letter, cursor );\r\n                            this._processSelection( cursor, e, false, CodeEditor.SELECTION_X );\r\n                        }\r\n                        else\r\n                        {\r\n                            if ( cursor.selection )\r\n                            {\r\n                                cursor.selection.invertIfNecessary();\r\n                                this.resetCursorPos( CodeEditor.CURSOR_LEFT_TOP, cursor );\r\n                                this.cursorToLine( cursor, cursor.selection.fromY );\r\n                                this.cursorToPosition( cursor, cursor.selection.fromX, true );\r\n                                this.endSelection( cursor );\r\n                            }\r\n                            else\r\n                            {\r\n                                this.cursorToLeft( letter, cursor );\r\n                                if ( this.useAutoComplete && this.isAutoCompleteActive )\r\n                                {\r\n                                    this.showAutoCompleteBox( 'foo', cursor );\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else if ( cursor.line > 0 )\r\n                    {\r\n                        if ( e.shiftKey && !cursor.selection ) this.startSelection( cursor );\r\n\r\n                        this.lineUp( cursor );\r\n\r\n                        e.cancelShift = e.keepSelection = true;\r\n                        this.actions['End'].callback( cursor.line, cursor, e );\r\n                        delete e.cancelShift;\r\n                        delete e.keepSelection;\r\n\r\n                        if ( e.shiftKey ) this._processSelection( cursor, e, false );\r\n                    }\r\n                }\r\n            } );\r\n\r\n            this.action( 'ArrowRight', false, ( ln, cursor, e ) => {\r\n                // Nothing to do..\r\n                if ( cursor.line == this.code.lines.length - 1\r\n                    && cursor.position == this.code.lines[cursor.line].length )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                if ( e.metaKey )\r\n                { // Apple devices (Command)\r\n                    e.preventDefault();\r\n                    this.actions['End'].callback( ln, cursor, e );\r\n                }\r\n                else if ( e.ctrlKey )\r\n                { // Next word\r\n                    // Get next word\r\n                    const [ word, from, to ] = this.getWordAtPos( cursor );\r\n\r\n                    // If no length, we change line..\r\n                    if ( !word.length ) this.lineDown( cursor, true );\r\n                    var diff = cursor.position - from;\r\n                    var substr = word.substr( diff );\r\n\r\n                    // Selections...\r\n                    if ( e.shiftKey )\r\n                    {\r\n                        if ( !cursor.selection )\r\n                        {\r\n                            this.startSelection( cursor );\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        this.endSelection();\r\n                    }\r\n\r\n                    this.cursorToString( cursor, substr );\r\n\r\n                    if ( e.shiftKey )\r\n                    {\r\n                        this._processSelection( cursor, e );\r\n                    }\r\n                }\r\n                // Next char\r\n                else\r\n                {\r\n                    var letter = this.getCharAtPos( cursor );\r\n                    if ( letter )\r\n                    {\r\n                        // Selecting chars\r\n                        if ( e.shiftKey )\r\n                        {\r\n                            if ( !cursor.selection )\r\n                            {\r\n                                this.startSelection( cursor );\r\n                            }\r\n\r\n                            this.cursorToRight( letter, cursor );\r\n                            this._processSelection( cursor, e, false, CodeEditor.SELECTION_X );\r\n                        }\r\n                        else\r\n                        {\r\n                            if ( !cursor.selection )\r\n                            {\r\n                                this.cursorToRight( letter, cursor );\r\n                                if ( this.useAutoComplete && this.isAutoCompleteActive )\r\n                                {\r\n                                    this.showAutoCompleteBox( 'foo', cursor );\r\n                                }\r\n                            }\r\n                            else\r\n                            {\r\n                                cursor.selection.invertIfNecessary();\r\n                                this.resetCursorPos( CodeEditor.CURSOR_LEFT_TOP, cursor );\r\n                                this.cursorToLine( cursor, cursor.selection.toY );\r\n                                this.cursorToPosition( cursor, cursor.selection.toX, true );\r\n                                this.endSelection( cursor );\r\n                            }\r\n                        }\r\n                    }\r\n                    else if ( this.code.lines[cursor.line + 1] !== undefined )\r\n                    {\r\n                        if ( e.shiftKey )\r\n                        {\r\n                            if ( !cursor.selection ) this.startSelection( cursor );\r\n                        }\r\n                        else\r\n                        {\r\n                            this.endSelection();\r\n                        }\r\n\r\n                        this.lineDown( cursor, true );\r\n\r\n                        if ( e.shiftKey ) this._processSelection( cursor, e, false );\r\n\r\n                        this.hideAutoCompleteBox();\r\n                    }\r\n                }\r\n            } );\r\n        }\r\n\r\n        // Default code tab\r\n\r\n        const onLoadAll = async () => {\r\n            // Create inspector panel when the initial state is complete\r\n            // and we have at least 1 tab opened\r\n            this.statusPanel = this._createStatusPanel( options );\r\n            if ( this.statusPanel )\r\n            {\r\n                area.attach( this.statusPanel );\r\n            }\r\n\r\n            this._setupDisplayObserver();\r\n\r\n            g.editor = this;\r\n        };\r\n\r\n        if ( options.allowAddScripts ?? true )\r\n        {\r\n            this.onCreateFile = options.onCreateFile;\r\n            this.addTab( '+', false, 'Create file' );\r\n        }\r\n\r\n        if ( options.files )\r\n        {\r\n            console.assert( options.files.constructor === Array, '_files_ must be an Array!' );\r\n            const numFiles = options.files.length;\r\n            const loadAsync = options.filesAsync !== undefined;\r\n            let filesLoaded = 0;\r\n            for ( let url of options.files )\r\n            {\r\n                const finalUrl = url.constructor === Array ? url[0] : url;\r\n                const finalFileName = url.constructor === Array ? url[1] : undefined;\r\n\r\n                await this.loadFile( finalUrl, { filename: finalFileName, async: loadAsync, callback: ( name: string, text: string ) => {\r\n                    filesLoaded++;\r\n                    if ( filesLoaded == numFiles )\r\n                    {\r\n                        onLoadAll();\r\n\r\n                        if ( options.onFilesLoaded )\r\n                        {\r\n                            options.onFilesLoaded( this, this.loadedTabs, numFiles );\r\n                        }\r\n                    }\r\n                } } );\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if ( options.defaultTab ?? true )\r\n            {\r\n                this.addTab( options.name || 'untitled', true, options.title, {\r\n                    language: options.highlight ?? 'Plain Text'\r\n                } );\r\n            }\r\n\r\n            onLoadAll();\r\n        }\r\n    }\r\n\r\n    _setupDisplayObserver()\r\n    {\r\n        if ( this._displayObserver ) return;\r\n\r\n        this._isReady = false;\r\n\r\n        const root = this.root;\r\n\r\n        const _isVisible = () => {\r\n            return (\r\n                root.offsetParent !== null\r\n                && root.clientWidth > 0\r\n                && root.clientHeight > 0\r\n            );\r\n        };\r\n\r\n        const _tryPrepare = async () => {\r\n            if ( this._isReady ) return;\r\n            if ( !_isVisible() ) return;\r\n\r\n            this._isReady = true;\r\n\r\n            // Stop observing once prepared\r\n            intersectionObserver.disconnect();\r\n            resizeObserver.disconnect();\r\n\r\n            await this._setupEditorWhenVisible();\r\n        };\r\n\r\n        // IntersectionObserver (for viewport)\r\n        const intersectionObserver = new IntersectionObserver( ( entries ) => {\r\n            for ( const entry of entries )\r\n            {\r\n                if ( entry.isIntersecting )\r\n                {\r\n                    _tryPrepare();\r\n                }\r\n            }\r\n        } );\r\n        intersectionObserver.observe( root );\r\n\r\n        // ResizeObserver (for display property changes)\r\n        const resizeObserver = new ResizeObserver( () => {\r\n            _tryPrepare();\r\n        } );\r\n        resizeObserver.observe( root );\r\n\r\n        // Fallback polling (don't use it for now)\r\n        // const interval = setInterval( () => {\r\n        //     if ( this._isReady ) {\r\n        //         clearInterval( interval );\r\n        //         return;\r\n        //     }\r\n        //     _tryPrepare();\r\n        // }, 250 );\r\n\r\n        this._displayObserver = {\r\n            intersectionObserver,\r\n            resizeObserver\r\n            // interval,\r\n        };\r\n    }\r\n\r\n    async _setupEditorWhenVisible()\r\n    {\r\n        if ( document.fonts.status == 'loading' )\r\n        {\r\n            await document.fonts.ready;\r\n        }\r\n\r\n        // Load any font size from local storage\r\n        const savedFontSize = window.localStorage.getItem( 'lexcodeeditor-font-size' );\r\n        if ( savedFontSize )\r\n        {\r\n            this._setFontSize( parseInt( savedFontSize ) );\r\n        }\r\n        // Use default size\r\n        else\r\n        {\r\n            const r: any = document.querySelector( ':root' );\r\n            const s = getComputedStyle( r );\r\n            this.fontSize = parseInt( s.getPropertyValue( '--code-editor-font-size' ) );\r\n            this.charWidth = this._measureChar() as number;\r\n        }\r\n\r\n        LX.emitSignal( '@font-size', this.fontSize );\r\n\r\n        // Get final sizes for editor elements based on Tabs and status bar offsets\r\n        LX.doAsync( () => {\r\n            this._verticalTopOffset = this.tabs?.root.getBoundingClientRect().height ?? 0;\r\n            this._verticalBottomOffset = this.statusPanel?.root.getBoundingClientRect().height ?? 0;\r\n            this._fullVerticalOffset = this._verticalTopOffset + this._verticalBottomOffset;\r\n\r\n            this.gutter.style.marginTop = `${this._verticalTopOffset}px`;\r\n            this.gutter.style.height = `calc(100% - ${this._fullVerticalOffset}px)`;\r\n            this.vScrollbar.root.style.marginTop = `${this._verticalTopOffset}px`;\r\n            this.vScrollbar.root.style.height = `calc(100% - ${this._fullVerticalOffset}px)`;\r\n            this.hScrollbar.root.style.bottom = `${this._verticalBottomOffset}px`;\r\n            this.codeArea.root.style.height = `calc(100% - ${this._fullVerticalOffset}px)`;\r\n\r\n            // Process lines on finish computing final sizes\r\n            this.processLines();\r\n\r\n            this._preparedAt = performance.now();\r\n\r\n            if ( this.onReady )\r\n            {\r\n                this.onReady( this );\r\n            }\r\n\r\n            console.log( `[LX.CodeEditor] Ready! (font size: ${this.fontSize}px)` );\r\n        }, 50 );\r\n    }\r\n\r\n    // Clear signals\r\n    clear()\r\n    {\r\n        console.assert( this.rightStatusPanel && this.leftStatusPanel, 'No panels to clear.' );\r\n        this.rightStatusPanel.clear();\r\n        this.leftStatusPanel.clear();\r\n    }\r\n\r\n    static getInstances()\r\n    {\r\n        return CodeEditor.__instances;\r\n    }\r\n\r\n    // This received key inputs from the entire document...\r\n    onKeyPressed( e: KeyboardEvent )\r\n    {\r\n        // Toggle visibility of the file explorer\r\n        if ( e.key == 'b' && e.ctrlKey && this.useFileExplorer )\r\n        {\r\n            this.explorerArea.root.classList.toggle( 'hidden' );\r\n            if ( this._lastBaseareaWidth )\r\n            {\r\n                this.baseArea.root.style.width = this._lastBaseareaWidth;\r\n                delete this._lastBaseareaWidth;\r\n            }\r\n            else\r\n            {\r\n                this._lastBaseareaWidth = this.baseArea.root.style.width;\r\n                this.baseArea.root.style.width = '100%';\r\n            }\r\n        }\r\n    }\r\n\r\n    getText( min: boolean = false )\r\n    {\r\n        return this.code.lines.join( min ? ' ' : '\\n' );\r\n    }\r\n\r\n    // This can be used to empty all text...\r\n    setText( text: string = '', langString?: string, detectLanguage: boolean = false )\r\n    {\r\n        let newLines = text.split( '\\n' );\r\n        this.code.lines = ( [] as string[] ).concat( newLines );\r\n\r\n        this._removeSecondaryCursors();\r\n\r\n        let cursor = this.getCurrentCursor( true );\r\n        let lastLine = newLines.pop();\r\n\r\n        this.cursorToLine( cursor, newLines.length ); // Already substracted 1\r\n        this.cursorToPosition( cursor, lastLine?.length ?? 0, true );\r\n\r\n        this.mustProcessLines = true;\r\n\r\n        if ( detectLanguage )\r\n        {\r\n            langString = this._detectLanguage( text );\r\n        }\r\n\r\n        if ( langString )\r\n        {\r\n            this._changeLanguage( langString );\r\n        }\r\n\r\n        this._processLinesIfNecessary();\r\n    }\r\n\r\n    appendText( text: string, cursor: Cursor )\r\n    {\r\n        let lidx = cursor.line;\r\n\r\n        if ( cursor.selection )\r\n        {\r\n            this.deleteSelection( cursor );\r\n            lidx = cursor.line;\r\n        }\r\n\r\n        this.endSelection();\r\n\r\n        const newLines = text.replaceAll( '\\r', '' ).split( '\\n' );\r\n\r\n        // Pasting Multiline...\r\n        if ( newLines.length != 1 )\r\n        {\r\n            let numLines = newLines.length;\r\n            console.assert( numLines > 0 );\r\n            const firstLine = newLines.shift();\r\n            numLines--;\r\n\r\n            const remaining = this.code.lines[lidx].slice( cursor.position );\r\n\r\n            // Add first line\r\n            this.code.lines[lidx] = [\r\n                this.code.lines[lidx].slice( 0, cursor.position ),\r\n                firstLine\r\n            ].join( '' );\r\n\r\n            this.cursorToPosition( cursor, cursor.position + ( firstLine?.length ?? 0 ) );\r\n\r\n            // Enter next lines...\r\n\r\n            let _text = null;\r\n\r\n            for ( var i = 0; i < newLines.length; ++i )\r\n            {\r\n                _text = newLines[i];\r\n                this.cursorToLine( cursor, cursor.line++, true );\r\n                // Add remaining...\r\n                if ( i == ( newLines.length - 1 ) )\r\n                {\r\n                    _text += remaining;\r\n                }\r\n                this.code.lines.splice( 1 + lidx + i, 0, _text );\r\n            }\r\n\r\n            if ( _text ) this.cursorToPosition( cursor, _text.length );\r\n            this.cursorToLine( cursor, cursor.line + numLines );\r\n            this.processLines();\r\n        }\r\n        // Pasting one line...\r\n        else\r\n        {\r\n            this.code.lines[lidx] = [\r\n                this.code.lines[lidx].slice( 0, cursor.position ),\r\n                newLines[0],\r\n                this.code.lines[lidx].slice( cursor.position )\r\n            ].join( '' );\r\n\r\n            this.cursorToPosition( cursor, cursor.position + newLines[0].length );\r\n            this.processLine( lidx );\r\n        }\r\n\r\n        this.resize( CodeEditor.RESIZE_SCROLLBAR_H_V, undefined, () => {\r\n            var viewportSizeX = ( this.codeScroller.clientWidth + this.getScrollLeft() ) - CodeEditor.LINE_GUTTER_WIDTH; // Gutter offset\r\n            if ( ( cursor.position * this.charWidth ) >= viewportSizeX )\r\n            {\r\n                this.setScrollLeft( this.code.lines[lidx].length * this.charWidth );\r\n            }\r\n        } );\r\n    }\r\n\r\n    setCustomSuggestions( suggestions: string[] )\r\n    {\r\n        if ( !suggestions || suggestions.constructor !== Array )\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.customSuggestions = suggestions;\r\n    }\r\n\r\n    async loadFile( file: File, options: any = {} )\r\n    {\r\n        const _innerAddTab = ( text: string, name: string, title?: string ) => {\r\n            // Remove Carriage Return in some cases and sub tabs using spaces\r\n            text = text.replaceAll( '\\r', '' ).replaceAll( /\\t|\\\\t/g, ' '.repeat( this.tabSpaces ) );\r\n\r\n            // Set current text and language\r\n            const lines = text.split( '\\n' );\r\n\r\n            // Add item in the explorer if used\r\n            if ( this.useFileExplorer || this.skipTabs )\r\n            {\r\n                this._tabStorage[name] = {\r\n                    lines: lines,\r\n                    options: options\r\n                };\r\n\r\n                const ext = CodeEditor.languages[options.language]?.ext;\r\n\r\n                if ( this.useFileExplorer )\r\n                {\r\n                    this.addExplorerItem( { id: name, skipVisibility: true, icon: this._getFileIcon( name, ext ) } );\r\n                    this.explorer.innerTree.frefresh( name );\r\n                }\r\n            }\r\n            else\r\n            {\r\n                this.addTab( name, true, title, options );\r\n                this.code.lines = lines;\r\n\r\n                // Default inferred language if not specified\r\n                if ( !options.language )\r\n                {\r\n                    this._changeLanguageFromExtension( LX.getExtension( name ) );\r\n                }\r\n            }\r\n\r\n            if ( options.callback )\r\n            {\r\n                options.callback( name, text );\r\n            }\r\n        };\r\n\r\n        if ( file.constructor == String )\r\n        {\r\n            const filename: string = file;\r\n            const name = options.filename ?? filename.substring( filename.lastIndexOf( '/' ) + 1 );\r\n\r\n            if ( options.async ?? false )\r\n            {\r\n                const text: string = await this._requestFileAsync( filename, 'text' ) as string;\r\n                _innerAddTab( text, name, options.filename ?? filename );\r\n            }\r\n            else\r\n            {\r\n                LX.request( { url: filename, success: ( text: string ) => {\r\n                    _innerAddTab( text, name, options.filename ?? filename );\r\n                } } );\r\n            }\r\n        }\r\n        // File Blob\r\n        else\r\n        {\r\n            const fr = new FileReader();\r\n            fr.readAsText( file );\r\n            fr.onload = ( e ) => {\r\n                const text = ( e.currentTarget as any ).result;\r\n                _innerAddTab( text, file.name );\r\n            };\r\n        }\r\n    }\r\n\r\n    _addUndoStep( cursor: Cursor, force: boolean = false, deleteRedo: boolean = true )\r\n    {\r\n        // Only the mainc cursor stores undo steps\r\n        if ( !cursor.isMain )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const d = new Date();\r\n        const current = d.getTime();\r\n\r\n        if ( !force )\r\n        {\r\n            if ( !this._lastTime )\r\n            {\r\n                this._lastTime = current;\r\n            }\r\n            else\r\n            {\r\n                if ( ( current - this._lastTime ) > 2000 )\r\n                {\r\n                    this._lastTime = null;\r\n                }\r\n                else\r\n                {\r\n                    // If time not enough, reset timer\r\n                    this._lastTime = current;\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if ( deleteRedo )\r\n        {\r\n            // Remove all redo steps\r\n            this.code.redoSteps.length = 0;\r\n        }\r\n\r\n        this.code.undoSteps.push( {\r\n            lines: LX.deepCopy( this.code.lines ),\r\n            cursors: this.saveCursors()\r\n        } );\r\n    }\r\n\r\n    _doUndo( cursor: Cursor )\r\n    {\r\n        if ( !this.code.undoSteps.length )\r\n        {\r\n            return;\r\n        }\r\n\r\n        this._addRedoStep( cursor );\r\n\r\n        // Extract info from the last code state\r\n        const step = this.code.undoSteps.pop();\r\n\r\n        // Set old state lines\r\n        this.code.lines = step.lines;\r\n        this.processLines();\r\n\r\n        this._removeSecondaryCursors();\r\n\r\n        for ( let i = 0; i < step.cursors.length; ++i )\r\n        {\r\n            var currentCursor: Cursor | null = this.cursors[i];\r\n\r\n            // Generate new if needed\r\n            if ( !currentCursor )\r\n            {\r\n                currentCursor = this._addCursor();\r\n            }\r\n\r\n            this.restoreCursor( currentCursor as Cursor, step.cursors[i] );\r\n        }\r\n\r\n        this._hideActiveLine();\r\n    }\r\n\r\n    _addRedoStep( cursor: Cursor )\r\n    {\r\n        // Only the mainc cursor stores redo steps\r\n        if ( !cursor.isMain )\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.code.redoSteps.push( {\r\n            lines: LX.deepCopy( this.code.lines ),\r\n            cursors: this.saveCursors()\r\n        } );\r\n    }\r\n\r\n    _doRedo( cursor: Cursor )\r\n    {\r\n        if ( !this.code.redoSteps.length )\r\n        {\r\n            return;\r\n        }\r\n\r\n        this._addUndoStep( cursor, true, false );\r\n\r\n        // Extract info from the next saved code state\r\n        const step = this.code.redoSteps.pop();\r\n\r\n        // Set old state lines\r\n        this.code.lines = step.lines;\r\n        this.processLines();\r\n\r\n        this._removeSecondaryCursors();\r\n\r\n        for ( let i = 0; i < step.cursors.length; ++i )\r\n        {\r\n            var currentCursor: Cursor | null = this.cursors[i];\r\n\r\n            // Generate new if needed\r\n            if ( !currentCursor )\r\n            {\r\n                currentCursor = this._addCursor();\r\n            }\r\n\r\n            this.restoreCursor( currentCursor as Cursor, step.cursors[i] );\r\n        }\r\n    }\r\n\r\n    _changeLanguage( langString: string, langExtension?: string, override: boolean = false )\r\n    {\r\n        this.code.language = langString;\r\n        this.highlight = langString;\r\n\r\n        if ( override )\r\n        {\r\n            this.code.languageOverride = langString;\r\n        }\r\n\r\n        this._updateDataInfoPanel( '@highlight', langString );\r\n\r\n        this.mustProcessLines = true;\r\n\r\n        const ext = langExtension ?? CodeEditor.languages[langString].ext;\r\n        const icon = this._getFileIcon( null, ext );\r\n\r\n        // Update tab icon\r\n        if ( !this.skipTabs )\r\n        {\r\n            const tab = this.tabs.tabDOMs[this.code.tabName];\r\n            tab.firstChild.remove();\r\n            console.assert( tab != undefined );\r\n            var iconEl;\r\n            if ( !icon.includes( '.' ) )\r\n            { // Not a file\r\n                const classes = icon.split( ' ' );\r\n                iconEl = LX.makeIcon( classes[0], { svgClass: classes.slice( 0 ).join( ' ' ) } );\r\n            }\r\n            else\r\n            {\r\n                iconEl = document.createElement( 'img' );\r\n                iconEl.src = 'https://raw.githubusercontent.com/jxarco/lexgui.js/master/' + icon;\r\n            }\r\n            tab.prepend( iconEl );\r\n        }\r\n\r\n        // Update explorer icon\r\n        if ( this.useFileExplorer )\r\n        {\r\n            const item = this.explorer.innerTree.data.filter( ( v: HTMLElement ) => v.id === this.code.tabName )[0];\r\n            console.assert( item != undefined );\r\n            item.icon = icon;\r\n            this.explorer.innerTree.frefresh( this.code.tabName );\r\n        }\r\n    }\r\n\r\n    _changeLanguageFromExtension( ext: string )\r\n    {\r\n        if ( !ext )\r\n        {\r\n            return this._changeLanguage( this.code.language );\r\n        }\r\n\r\n        for ( let l in CodeEditor.languages )\r\n        {\r\n            const langExtension = CodeEditor.languages[l].ext;\r\n\r\n            if ( langExtension.constructor == Array )\r\n            {\r\n                if ( langExtension.indexOf( ext ) > -1 )\r\n                {\r\n                    return this._changeLanguage( l, ext );\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if ( langExtension == ext )\r\n                {\r\n                    return this._changeLanguage( l );\r\n                }\r\n            }\r\n        }\r\n\r\n        this._changeLanguage( 'Plain Text' );\r\n    }\r\n\r\n    _createStatusPanel( options: any = {} )\r\n    {\r\n        if ( this.skipInfo )\r\n        {\r\n            return;\r\n        }\r\n\r\n        let panel = new LX.Panel( { className: 'lexcodetabinfo flex flex-row', height: 'auto' } );\r\n\r\n        if ( this.onCreateStatusPanel )\r\n        {\r\n            this.onCreateStatusPanel( panel, this );\r\n        }\r\n\r\n        let leftStatusPanel = this.leftStatusPanel = new LX.Panel( { id: 'FontSizeZoomStatusComponent',\r\n            className: 'pad-xs content-center items-center flex-auto-keep', width: 'auto', height: 'auto' } );\r\n        leftStatusPanel.sameLine();\r\n\r\n        leftStatusPanel.addButton( null, 'ZoomOutButton', this._decreaseFontSize.bind( this ), { icon: 'ZoomOut', buttonClass: 'ghost sm',\r\n            title: 'Zoom Out', tooltip: true } );\r\n        leftStatusPanel.addLabel( this.fontSize, { fit: true, signal: '@font-size' } );\r\n        leftStatusPanel.addButton( null, 'ZoomInButton', this._increaseFontSize.bind( this ), { icon: 'ZoomIn', buttonClass: 'ghost sm',\r\n            title: 'Zoom In', tooltip: true } );\r\n        leftStatusPanel.endLine( 'justify-start' );\r\n        panel.attach( leftStatusPanel.root );\r\n\r\n        let rightStatusPanel = this.rightStatusPanel = new LX.Panel( { className: 'pad-xs content-center items-center', height: 'auto' } );\r\n        rightStatusPanel.sameLine();\r\n        rightStatusPanel.addLabel( this.code?.title ?? '', { id: 'EditorFilenameStatusComponent', fit: true, inputClass: 'text-xs',\r\n            signal: '@tab-name' } );\r\n        rightStatusPanel.addButton( null, 'Ln 1, Col 1', this.showSearchLineBox.bind( this ), {\r\n            id: 'EditorSelectionStatusComponent',\r\n            buttonClass: 'outline xs',\r\n            fit: true,\r\n            signal: '@cursor-data'\r\n        } );\r\n        rightStatusPanel.addButton( null, 'Spaces: ' + this.tabSpaces, ( value: any, event: any ) => {\r\n            LX.addContextMenu( 'Spaces', event, ( m: typeof ContextMenu ) => {\r\n                const options = [ 2, 4, 8 ];\r\n                for ( const n of options )\r\n                {\r\n                    m.add( n, ( v: any ) => {\r\n                        this.tabSpaces = v;\r\n                        this.processLines();\r\n                        this._updateDataInfoPanel( '@tab-spaces', 'Spaces: ' + this.tabSpaces );\r\n                    } );\r\n                }\r\n            } );\r\n        }, { id: 'EditorIndentationStatusComponent', buttonClass: 'outline xs', signal: '@tab-spaces' } );\r\n        rightStatusPanel.addButton( '<b>{ }</b>', this.highlight, ( value: any, event: any ) => {\r\n            LX.addContextMenu( 'Language', event, ( m: typeof ContextMenu ) => {\r\n                for ( const lang of Object.keys( CodeEditor.languages ) )\r\n                {\r\n                    m.add( lang, ( v: any ) => {\r\n                        this._changeLanguage( v, undefined, true );\r\n                        this.processLines();\r\n                    } );\r\n                }\r\n            } );\r\n        }, { id: 'EditorLanguageStatusComponent', nameWidth: 'auto', buttonClass: 'outline xs', signal: '@highlight', title: '' } );\r\n        rightStatusPanel.endLine( 'justify-end' );\r\n        panel.attach( rightStatusPanel.root );\r\n\r\n        const itemVisibilityMap: Record<string, boolean> = {\r\n            'Font Size Zoom': options.statusShowFontSizeZoom ?? true,\r\n            'Editor Filename': options.statusShowEditorFilename ?? true,\r\n            'Editor Selection': options.statusShowEditorSelection ?? true,\r\n            'Editor Indentation': options.statusShowEditorIndentation ?? true,\r\n            'Editor Language': options.statusShowEditorLanguage ?? true\r\n        };\r\n\r\n        const _setVisibility = ( itemName: string ) => {\r\n            const b = panel.root.querySelector( `#${itemName.replaceAll( ' ', '' )}StatusComponent` );\r\n            console.assert( b, `${itemName} has no status button!` );\r\n            b.classList.toggle( 'hidden', !itemVisibilityMap[itemName] );\r\n        };\r\n\r\n        for ( const [ itemName, v ] of Object.entries( itemVisibilityMap ) )\r\n        {\r\n            _setVisibility( itemName );\r\n        }\r\n\r\n        panel.root.addEventListener( 'contextmenu', ( e: any ) => {\r\n            if ( e.target\r\n                && ( e.target.classList.contains( 'lexpanel' )\r\n                    || e.target.classList.contains( 'lexinlinecomponents' ) ) )\r\n            {\r\n                return;\r\n            }\r\n\r\n            const menuOptions = Object.keys( itemVisibilityMap ).map( ( itemName, idx ) => {\r\n                const item: any = {\r\n                    name: itemName,\r\n                    icon: 'Check',\r\n                    callback: () => {\r\n                        itemVisibilityMap[itemName] = !itemVisibilityMap[itemName];\r\n                        _setVisibility( itemName );\r\n                    }\r\n                };\r\n                if ( !itemVisibilityMap[itemName] ) delete item.icon;\r\n                return item;\r\n            } );\r\n            new LX.DropdownMenu( e.target, menuOptions, { side: 'top', align: 'start' } );\r\n        } );\r\n\r\n        return panel;\r\n    }\r\n\r\n    _getFileIcon( name: string | null, extension?: string, langString?: string )\r\n    {\r\n        const isNewTabButton = name ? ( name === '+' ) : false;\r\n        if ( isNewTabButton )\r\n        {\r\n            return;\r\n        }\r\n\r\n        if ( !langString )\r\n        {\r\n            if ( !extension )\r\n            {\r\n                extension = LX.getExtension( name );\r\n            }\r\n            else\r\n            {\r\n                const possibleExtensions = ( [] as string[] ).concat( extension );\r\n\r\n                if ( name )\r\n                {\r\n                    const fileExtension = LX.getExtension( name );\r\n                    const idx = possibleExtensions.indexOf( fileExtension );\r\n\r\n                    if ( idx > -1 )\r\n                    {\r\n                        extension = possibleExtensions[idx];\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    extension = possibleExtensions[0];\r\n                }\r\n            }\r\n\r\n            for ( const [ l, lData ] of Object.entries( CodeEditor.languages ) )\r\n            {\r\n                const extensions = ( [] as string[] ).concat( ( lData as any ).ext );\r\n                if ( extensions.includes( extension! ) )\r\n                {\r\n                    langString = l;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if ( langString === undefined )\r\n        {\r\n            return 'AlignLeft text-neutral-500';\r\n        }\r\n\r\n        const iconPlusClasses = CodeEditor.languages[langString]?.icon;\r\n        if ( iconPlusClasses )\r\n        {\r\n            return iconPlusClasses[extension!] ?? iconPlusClasses;\r\n        }\r\n\r\n        return 'AlignLeft text-neutral-500';\r\n    }\r\n\r\n    _onNewTab( e: any )\r\n    {\r\n        this.processFocus( false );\r\n\r\n        if ( this.onNewTab )\r\n        {\r\n            this.onNewTab( e );\r\n            return;\r\n        }\r\n\r\n        const dmOptions = this.newTabOptions ?? [\r\n            { name: 'Create file', icon: 'FilePlus', callback: this._onCreateNewFile.bind( this ) },\r\n            { name: 'Load file', icon: 'FileUp', disabled: !this.allowLoadingFiles, callback: this.loadTabFromFile.bind( this ) }\r\n        ];\r\n\r\n        new LX.DropdownMenu( e.target, dmOptions, { side: 'bottom', align: 'start' } );\r\n    }\r\n\r\n    _onCreateNewFile()\r\n    {\r\n        let options: any = {};\r\n\r\n        if ( this.onCreateFile )\r\n        {\r\n            options = this.onCreateFile( this );\r\n            if ( !options )\r\n            { // Skip adding new file\r\n                return;\r\n            }\r\n        }\r\n\r\n        const name = options.name ?? 'unnamed.js';\r\n        this.addTab( name, true, name, { indexOffset: options.indexOffset, language: options.language ?? 'JavaScript' } );\r\n    }\r\n\r\n    _onSelectTab( isNewTabButton: boolean, event: any, name: string )\r\n    {\r\n        if ( this.disableEdition )\r\n        {\r\n            return;\r\n        }\r\n\r\n        if ( isNewTabButton )\r\n        {\r\n            this._onNewTab( event );\r\n            return;\r\n        }\r\n\r\n        this._removeSecondaryCursors();\r\n\r\n        const cursor = this.getCurrentCursor( true );\r\n        const lastCode = this.code;\r\n\r\n        if ( lastCode )\r\n        {\r\n            this.saveCursor( cursor, lastCode.cursorState );\r\n        }\r\n\r\n        this.code = this.loadedTabs[name];\r\n\r\n        this.restoreCursor( cursor, this.code.cursorState );\r\n\r\n        this.endSelection();\r\n\r\n        this.hideAutoCompleteBox();\r\n\r\n        this._updateDataInfoPanel( '@tab-name', name );\r\n\r\n        if ( this.code.languageOverride )\r\n        {\r\n            this._changeLanguage( this.code.languageOverride );\r\n        }\r\n        else\r\n        {\r\n            this._changeLanguageFromExtension( LX.getExtension( name ) );\r\n        }\r\n\r\n        this.processLines();\r\n\r\n        if ( !isNewTabButton && this.onSelectTab )\r\n        {\r\n            this.onSelectTab( name, this );\r\n        }\r\n    }\r\n\r\n    _onContextMenuTab( isNewTabButton: boolean = false, event: any, name: string )\r\n    {\r\n        if ( isNewTabButton )\r\n        {\r\n            return;\r\n        }\r\n\r\n        new LX.DropdownMenu( event.target, [\r\n            { name: 'Close', kbd: 'MWB', disabled: !this.allowClosingTabs, callback: () => {\r\n                this.closeTab( name );\r\n            } },\r\n            { name: 'Close Others', disabled: !this.allowClosingTabs, callback: () => {\r\n                for ( const [ key, data ] of Object.entries( this.tabs.tabs ) )\r\n                {\r\n                    if ( key === '+' || key === name ) continue;\r\n                    this.closeTab( key );\r\n                }\r\n            } },\r\n            { name: 'Close All', disabled: !this.allowClosingTabs, callback: () => {\r\n                for ( const [ key, data ] of Object.entries( this.tabs.tabs ) )\r\n                {\r\n                    if ( key === '+' ) continue;\r\n                    this.closeTab( key );\r\n                }\r\n            } },\r\n            null,\r\n            { name: 'Copy Path', icon: 'Copy', callback: () => {\r\n                navigator.clipboard.writeText( this.openedTabs[name].path ?? '' );\r\n            } }\r\n        ], { side: 'bottom', align: 'start', event } );\r\n    }\r\n\r\n    addTab( name: string, selected: boolean, title?: string, options: any = {} )\r\n    {\r\n        // If already loaded, set new name...\r\n        const repeats = Object.keys( this.loadedTabs ).slice( 1 ).reduce( ( v, key ) => {\r\n            const noRepeatName = key.replace( /[_\\d+]/g, '' );\r\n            return v + ( noRepeatName == name ? 1 : 0 );\r\n        }, 0 );\r\n\r\n        if ( repeats > 0 )\r\n        {\r\n            name = name.split( '.' ).join( '_' + repeats + '.' );\r\n        }\r\n\r\n        const isNewTabButton = name === '+';\r\n\r\n        // Create code content\r\n        let code = document.createElement( 'div' );\r\n        let codeAny = code as any;\r\n        Object.assign( code, {\r\n            path: options.path ?? '',\r\n            className: 'code',\r\n            lines: [ '' ],\r\n            language: options.language ?? 'Plain Text',\r\n            cursorState: {},\r\n            undoSteps: [],\r\n            redoSteps: [],\r\n            lineScopes: [],\r\n            lineSymbols: [],\r\n            lineSignatures: [],\r\n            symbolsTable: new Map(),\r\n            tabName: name,\r\n            title: title ?? name,\r\n            tokens: {}\r\n        } );\r\n\r\n        code.style.left = '0px', code.style.top = '0px', code.addEventListener( 'dragenter', function( e )\r\n        {\r\n            e.preventDefault();\r\n            this.parentElement?.classList.add( 'dragging' );\r\n        } );\r\n        code.addEventListener( 'dragleave', function( e )\r\n        {\r\n            e.preventDefault();\r\n            this.parentElement?.classList.remove( 'dragging' );\r\n        } );\r\n        code.addEventListener( 'drop', ( e ) => {\r\n            e.preventDefault();\r\n            code.parentElement?.classList.remove( 'dragging' );\r\n            if ( e.dataTransfer?.files )\r\n            {\r\n                for ( let i = 0; i < e.dataTransfer.files.length; ++i )\r\n                {\r\n                    this.loadFile( e.dataTransfer.files[i] );\r\n                }\r\n            }\r\n        } );\r\n\r\n        this.loadedTabs[name] = code;\r\n        this.openedTabs[name] = code;\r\n\r\n        const lastCode = this.code;\r\n\r\n        this.code = code;\r\n\r\n        const tabIcon = this._getFileIcon( name );\r\n\r\n        if ( this.useFileExplorer && !isNewTabButton )\r\n        {\r\n            this.addExplorerItem( { id: name, skipVisibility: true, icon: tabIcon } );\r\n            this.explorer.innerTree.frefresh( name );\r\n        }\r\n\r\n        if ( !this.skipTabs )\r\n        {\r\n            this.tabs.add( name, code, {\r\n                selected: selected,\r\n                fixed: isNewTabButton,\r\n                title: code.title,\r\n                icon: tabIcon,\r\n                onSelect: this._onSelectTab.bind( this, isNewTabButton ),\r\n                onContextMenu: this._onContextMenuTab.bind( this, isNewTabButton ),\r\n                allowDelete: this.allowClosingTabs,\r\n                indexOffset: options.indexOffset\r\n            } );\r\n        }\r\n\r\n        // Move into the sizer..\r\n        this.codeSizer.appendChild( code );\r\n\r\n        this.endSelection();\r\n\r\n        if ( options.language )\r\n        {\r\n            codeAny.languageOverride = options.language;\r\n            this._changeLanguage( codeAny.languageOverride );\r\n            this.mustProcessLines = true;\r\n        }\r\n\r\n        if ( options.codeLines )\r\n        {\r\n            codeAny.lines = options.codeLines;\r\n            this.mustProcessLines = true;\r\n        }\r\n\r\n        if ( selected )\r\n        {\r\n            this.resetCursorPos( CodeEditor.CURSOR_LEFT_TOP, undefined, true );\r\n            this.mustProcessLines = true;\r\n        }\r\n        else\r\n        {\r\n            this.code = lastCode;\r\n        }\r\n\r\n        this._processLinesIfNecessary();\r\n\r\n        this._updateDataInfoPanel( '@tab-name', name );\r\n\r\n        // Bc it could be overrided..\r\n        return name;\r\n    }\r\n\r\n    loadCode( name: string )\r\n    {\r\n        // Hide all others\r\n        this.codeSizer.querySelectorAll( '.code' ).forEach( ( c: HTMLElement ) => c.classList.add( 'hidden' ) );\r\n\r\n        // Already open...\r\n        if ( this.openedTabs[name] )\r\n        {\r\n            let code = this.openedTabs[name];\r\n            code.classList.remove( 'hidden' );\r\n            return;\r\n        }\r\n\r\n        let code = this.loadedTabs[name];\r\n        if ( !code )\r\n        {\r\n            this.addTab( name, true );\r\n\r\n            // Unload lines from storage...\r\n            const tabData = this._tabStorage[name];\r\n            if ( tabData )\r\n            {\r\n                this.code.lines = tabData.lines;\r\n\r\n                if ( tabData.options.language )\r\n                {\r\n                    this._changeLanguage( tabData.options.language, undefined, true );\r\n                }\r\n                else\r\n                {\r\n                    this._changeLanguageFromExtension( LX.getExtension( name ) );\r\n                }\r\n\r\n                delete this._tabStorage[name];\r\n            }\r\n\r\n            this._processLinesIfNecessary();\r\n\r\n            return;\r\n        }\r\n\r\n        this.openedTabs[name] = code;\r\n\r\n        // Move into the sizer..\r\n        this.codeSizer.appendChild( code );\r\n\r\n        this.endSelection();\r\n\r\n        // Select as current...\r\n        this.code = code;\r\n        this.mustProcessLines = true;\r\n\r\n        this.resetCursorPos( CodeEditor.CURSOR_LEFT_TOP, undefined, true );\r\n        this.processLines();\r\n        this._changeLanguageFromExtension( LX.getExtension( name ) );\r\n        this._processLinesIfNecessary();\r\n        this._updateDataInfoPanel( '@tab-name', code.tabName );\r\n    }\r\n\r\n    loadTab( name: string )\r\n    {\r\n        // Already open...\r\n        if ( this.openedTabs[name] )\r\n        {\r\n            this.tabs.select( name );\r\n            return;\r\n        }\r\n\r\n        let code = this.loadedTabs[name];\r\n\r\n        if ( !code )\r\n        {\r\n            this.addTab( name, true );\r\n\r\n            // Unload lines from storage...\r\n            const tabData = this._tabStorage[name];\r\n            if ( tabData )\r\n            {\r\n                this.code.lines = tabData.lines;\r\n\r\n                if ( tabData.options.language )\r\n                {\r\n                    this._changeLanguage( tabData.options.language, undefined, true );\r\n                }\r\n                else\r\n                {\r\n                    this._changeLanguageFromExtension( LX.getExtension( name ) );\r\n                }\r\n\r\n                delete this._tabStorage[name];\r\n            }\r\n\r\n            this._processLinesIfNecessary();\r\n\r\n            return;\r\n        }\r\n\r\n        // Reset visibility\r\n        code.style.display = 'block';\r\n\r\n        this.openedTabs[name] = code;\r\n\r\n        const isNewTabButton = name === '+';\r\n        const tabIcon = this._getFileIcon( name );\r\n\r\n        this.tabs.add( name, code, {\r\n            selected: true,\r\n            fixed: isNewTabButton,\r\n            title: code.title,\r\n            icon: tabIcon,\r\n            onSelect: this._onSelectTab.bind( this, isNewTabButton ),\r\n            onContextMenu: this._onContextMenuTab.bind( this, isNewTabButton ),\r\n            allowDelete: this.allowClosingTabs\r\n        } );\r\n\r\n        // Move into the sizer..\r\n        this.codeSizer.appendChild( code );\r\n\r\n        this.endSelection();\r\n\r\n        // Select as current...\r\n        this.code = code;\r\n        this.resetCursorPos( CodeEditor.CURSOR_LEFT_TOP, undefined, true );\r\n        this._changeLanguageFromExtension( LX.getExtension( name ) );\r\n        this._updateDataInfoPanel( '@tab-name', code.tabName );\r\n\r\n        this.processLines();\r\n    }\r\n\r\n    closeTab( name: string, eraseAll: boolean = false )\r\n    {\r\n        if ( !this.allowClosingTabs )\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.tabs.delete( name );\r\n\r\n        if ( eraseAll )\r\n        {\r\n            delete this.openedTabs[name];\r\n            delete this.loadedTabs[name];\r\n            delete this._tabStorage[name];\r\n        }\r\n    }\r\n\r\n    getSelectedTabName()\r\n    {\r\n        return this.tabs.selected;\r\n    }\r\n\r\n    loadTabFromFile()\r\n    {\r\n        const input = document.createElement( 'input' );\r\n        input.type = 'file';\r\n        document.body.appendChild( input );\r\n        input.click();\r\n        input.addEventListener( 'change', ( e ) => {\r\n            const target = e.target as HTMLInputElement;\r\n            if ( target.files && target.files[0] )\r\n            {\r\n                this.loadFile( target.files[0] );\r\n            }\r\n            input.remove();\r\n        } );\r\n    }\r\n\r\n    processFocus( active: boolean = false )\r\n    {\r\n        if ( active )\r\n        {\r\n            this.restartBlink();\r\n        }\r\n        else\r\n        {\r\n            clearInterval( this.blinker );\r\n            LX.removeClass( this.cursorsDOM, 'show' );\r\n        }\r\n    }\r\n\r\n    processMouse( e: MouseEvent )\r\n    {\r\n        const target = e.target as HTMLElement;\r\n        if ( !target.classList.contains( 'code' ) && !target.classList.contains( 'lexcodearea' ) ) return;\r\n        if ( !this.code ) return;\r\n\r\n        var cursor = this.getCurrentCursor();\r\n        var code_rect = this.code.getBoundingClientRect();\r\n        var mouse_pos = [ e.clientX - code_rect.x, e.clientY - code_rect.y ];\r\n\r\n        // Discard out of lines click...\r\n        var ln = ( mouse_pos[1] / this.lineHeight ) | 0;\r\n        if ( ln < 0 ) return;\r\n\r\n        if ( e.type == 'mousedown' )\r\n        {\r\n            // Left click only...\r\n            if ( e.button === 2 )\r\n            {\r\n                this.processClick( e );\r\n\r\n                this.canOpenContextMenu = !cursor.selection;\r\n\r\n                if ( cursor.selection )\r\n                {\r\n                    this.canOpenContextMenu = this.canOpenContextMenu\r\n                        || ( cursor.line >= cursor.selection.fromY && cursor.line <= cursor.selection.toY\r\n                            && cursor.position >= cursor.selection.fromX && cursor.position <= cursor.selection.toX );\r\n                    if ( this.canOpenContextMenu )\r\n                    {\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            this._mouseDown = true;\r\n            this._lastMouseDown = LX.getTime();\r\n            this.endSelection();\r\n            this.processClick( e );\r\n        }\r\n        else if ( e.type == 'mouseup' )\r\n        {\r\n            this._onMouseUp( e );\r\n        }\r\n        else if ( e.type == 'mousemove' )\r\n        {\r\n            if ( this._mouseDown )\r\n            {\r\n                this.state.selectingText = true;\r\n                this.processSelections( e );\r\n            }\r\n        }\r\n        else if ( e.type == 'click' )\r\n        { // trip\r\n            switch ( e.detail )\r\n            {\r\n                case LX.MOUSE_DOUBLE_CLICK:\r\n                    const [ word, from, to ] = this.getWordAtPos( cursor );\r\n                    this.resetCursorPos( CodeEditor.CURSOR_LEFT, cursor );\r\n                    this.cursorToPosition( cursor, from );\r\n                    this.startSelection( cursor );\r\n                    cursor.selection!.selectInline( cursor, from, cursor.line, this.measureString( word ) );\r\n                    this.cursorToString( cursor, word ); // Go to the end of the word\r\n                    break;\r\n                // Select entire line\r\n                case LX.MOUSE_TRIPLE_CLICK:\r\n                    this.resetCursorPos( CodeEditor.CURSOR_LEFT, cursor );\r\n                    ( e as any )._shiftKey = true;\r\n                    this.actions['End'].callback( cursor.line, cursor, e );\r\n                    this._tripleClickSelection = true;\r\n                    break;\r\n            }\r\n        }\r\n        else if ( e.type == 'contextmenu' )\r\n        {\r\n            e.preventDefault();\r\n\r\n            if ( !this.canOpenContextMenu )\r\n            {\r\n                return;\r\n            }\r\n\r\n            LX.addContextMenu( null, e, ( m: typeof ContextMenu ) => {\r\n                m.add( 'Copy', () => {\r\n                    this._copyContent( cursor );\r\n                } );\r\n\r\n                if ( !this.disableEdition )\r\n                {\r\n                    m.add( 'Cut', () => {\r\n                        this._cutContent( cursor );\r\n                    } );\r\n                    m.add( 'Paste', () => {\r\n                        this._pasteContent( cursor );\r\n                    } );\r\n                }\r\n\r\n                if ( !this.onContextMenu )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                let content = null;\r\n\r\n                if ( cursor.selection )\r\n                {\r\n                    // Some selections don't depend on mouse up..\r\n                    if ( cursor.selection ) cursor.selection.invertIfNecessary();\r\n\r\n                    const separator = '_NEWLINE_';\r\n                    let code = this.code.lines.join( separator );\r\n\r\n                    // Get linear start index\r\n                    let index = 0;\r\n\r\n                    for ( let i = 0; i <= cursor.selection.fromY; i++ )\r\n                    {\r\n                        index += i == cursor.selection.fromY ? cursor.selection.fromX : this.code.lines[i].length;\r\n                    }\r\n\r\n                    index += cursor.selection.fromY * separator.length;\r\n                    const num_chars = cursor.selection.chars\r\n                        + ( cursor.selection.toY - cursor.selection.fromY ) * separator.length;\r\n                    const text = code.substr( index, num_chars );\r\n                    content = text.split( separator ).join( '\\n' );\r\n                }\r\n\r\n                const options = this.onContextMenu( this, content, e );\r\n                if ( options.length )\r\n                {\r\n                    m.add( '' );\r\n\r\n                    for ( const o of options )\r\n                    {\r\n                        m.add( o.path, { disabled: o.disabled, callback: o.callback } );\r\n                    }\r\n\r\n                    // m.add( \"Format/JSON\", () => {\r\n                    //     let json = this.toJSONFormat( this.getText() );\r\n                    //     if( !json )\r\n                    //         return;\r\n                    //     this.code.lines = json.split( \"\\n\" );\r\n                    //     this.processLines();\r\n                    // } );\r\n                }\r\n            } );\r\n\r\n            this.canOpenContextMenu = false;\r\n        }\r\n    }\r\n\r\n    _onMouseUp( e: MouseEvent )\r\n    {\r\n        if ( ( LX.getTime() - this._lastMouseDown ) < 120 )\r\n        {\r\n            this.state.selectingText = false;\r\n            this.endSelection();\r\n        }\r\n\r\n        const cursor = this.getCurrentCursor();\r\n        if ( cursor.selection )\r\n        {\r\n            cursor.selection.invertIfNecessary();\r\n\r\n            // If single line selection and no chars selected, remove selection\r\n            const deltaY = cursor.selection.toY - cursor.selection.fromY;\r\n            if ( cursor.selection.chars == 0 && deltaY == 0 )\r\n            {\r\n                this.endSelection();\r\n            }\r\n        }\r\n\r\n        this._mouseDown = false;\r\n        this.state.selectingText = false;\r\n        delete this._lastSelectionKeyDir;\r\n    }\r\n\r\n    processClick( e: MouseEvent )\r\n    {\r\n        var cursor = this.getCurrentCursor();\r\n        var code_rect = this.codeScroller.getBoundingClientRect();\r\n        var position = [ ( e.clientX - code_rect.x ) + this.getScrollLeft(), ( e.clientY - code_rect.y ) + this.getScrollTop() ];\r\n        var ln = ( position[1] / this.lineHeight ) | 0;\r\n\r\n        // Check out of range line\r\n        const outOfRange = ln > this.code.lines.length - 1;\r\n        ln = Math.min( ln, this.code.lines.length - 1 );\r\n\r\n        var ch = ( ( position[0] - parseInt( this.xPadding ) + 3 ) / this.charWidth ) | 0;\r\n        var string = outOfRange ? this.code.lines[ln] : this.code.lines[ln].slice( 0, ch );\r\n\r\n        // Move main cursor there...\r\n        if ( !e.altKey )\r\n        {\r\n            // Make sure we only keep the main cursor..\r\n            this._removeSecondaryCursors();\r\n            this.cursorToLine( cursor, ln );\r\n            this.cursorToPosition( cursor, string.length );\r\n        }\r\n        // Add new cursor\r\n        else\r\n        {\r\n            this._addCursor( ln, string.length );\r\n        }\r\n\r\n        this.hideAutoCompleteBox();\r\n    }\r\n\r\n    updateSelections( e: any, keepRange: boolean = false, flags: number = CodeEditor.SELECTION_X_Y )\r\n    {\r\n        for ( let cursor of this.cursors )\r\n        {\r\n            if ( !cursor.selection )\r\n            {\r\n                continue;\r\n            }\r\n\r\n            this._processSelection( cursor, e, keepRange, flags );\r\n        }\r\n    }\r\n\r\n    processSelections( e: any, keepRange: boolean = false, flags: number = CodeEditor.SELECTION_X_Y )\r\n    {\r\n        for ( let cursor of this.cursors )\r\n        {\r\n            this._processSelection( cursor, e, keepRange, flags );\r\n        }\r\n    }\r\n\r\n    _processSelection( cursor: Cursor, e?: any, keepRange: boolean = false, flags: number = CodeEditor.SELECTION_X_Y )\r\n    {\r\n        const isMouseEvent = e && ( e.constructor == MouseEvent );\r\n\r\n        if ( isMouseEvent )\r\n        {\r\n            this.processClick( e );\r\n        }\r\n\r\n        if ( !cursor.selection )\r\n        {\r\n            this.startSelection( cursor );\r\n        }\r\n\r\n        const selection = cursor.selection!;\r\n\r\n        this._hideActiveLine();\r\n\r\n        // Update selection\r\n        if ( !keepRange )\r\n        {\r\n            let ccw = true;\r\n\r\n            // Check if we must change ccw or not ... (not with mouse)\r\n            if ( !isMouseEvent && cursor.line >= selection.fromY\r\n                && ( cursor.line == selection.fromY ? cursor.position >= selection.fromX : true ) )\r\n            {\r\n                ccw = e && this._lastSelectionKeyDir\r\n                    && ( e.key == 'ArrowRight' || e.key == 'ArrowDown' || e.key == 'End' );\r\n            }\r\n\r\n            if ( ccw )\r\n            {\r\n                if ( flags & CodeEditor.SELECTION_X ) selection.fromX = cursor.position;\r\n                if ( flags & CodeEditor.SELECTION_Y ) selection.fromY = cursor.line;\r\n            }\r\n            else\r\n            {\r\n                if ( flags & CodeEditor.SELECTION_X ) selection.toX = cursor.position;\r\n                if ( flags & CodeEditor.SELECTION_Y ) selection.toY = cursor.line;\r\n            }\r\n\r\n            this._lastSelectionKeyDir = ccw;\r\n        }\r\n\r\n        // Only leave if not a mouse selection...\r\n        if ( !isMouseEvent && selection.isEmpty() )\r\n        {\r\n            this.endSelection();\r\n            return;\r\n        }\r\n\r\n        selection.chars = 0;\r\n\r\n        const fromX = selection.fromX,\r\n            fromY = selection.fromY,\r\n            toX = selection.toX,\r\n            toY = selection.toY;\r\n        const deltaY = toY - fromY;\r\n\r\n        let cursorSelections = this.selections[cursor.name];\r\n\r\n        // Selection goes down...\r\n        if ( deltaY >= 0 )\r\n        {\r\n            while ( deltaY < ( cursorSelections.childElementCount - 1 ) )\r\n            {\r\n                LX.deleteElement( cursorSelections.lastChild );\r\n            }\r\n\r\n            for ( let i = fromY; i <= toY; i++ )\r\n            {\r\n                const sId = i - fromY;\r\n                const isVisible = i >= this.visibleLinesViewport.x && i <= this.visibleLinesViewport.y;\r\n                let domEl = null;\r\n\r\n                if ( isVisible )\r\n                {\r\n                    // Make sure that the line selection is generated...\r\n                    domEl = cursorSelections.childNodes[sId];\r\n                    if ( !domEl )\r\n                    {\r\n                        domEl = document.createElement( 'div' );\r\n                        domEl.className = 'lexcodeselection';\r\n                        cursorSelections.appendChild( domEl );\r\n                    }\r\n                }\r\n\r\n                // Compute new width and selection margins\r\n                let string = '';\r\n\r\n                if ( sId == 0 )\r\n                { // First line 2 cases (single line, multiline)\r\n                    const reverse = fromX > toX;\r\n                    if ( deltaY == 0 )\r\n                    {\r\n                        string = !reverse\r\n                            ? this.code.lines[i].substring( fromX, toX )\r\n                            : this.code.lines[i].substring( toX, fromX );\r\n                    }\r\n                    else string = this.code.lines[i].substr( fromX );\r\n                    const pixels = ( reverse && deltaY == 0 ? toX : fromX ) * this.charWidth;\r\n                    if ( isVisible ) domEl.style.left = `calc(${pixels}px + ${this.xPadding})`;\r\n                }\r\n                else\r\n                {\r\n                    string = ( i == toY ) ? this.code.lines[i].substring( 0, toX ) : this.code.lines[i]; // Last line, any multiple line...\r\n                    if ( isVisible ) domEl.style.left = this.xPadding;\r\n                }\r\n\r\n                const stringWidth = this.measureString( string );\r\n                selection.chars += stringWidth / this.charWidth;\r\n\r\n                if ( isVisible )\r\n                {\r\n                    domEl.style.width = ( stringWidth || ( deltaY == 0 ? 0 : 8 ) ) + 'px';\r\n                    domEl._top = i * this.lineHeight;\r\n                    domEl.style.top = domEl._top + 'px';\r\n                }\r\n            }\r\n        }\r\n        // Selection goes up...\r\n        else\r\n        {\r\n            while ( Math.abs( deltaY ) < ( cursorSelections.childElementCount - 1 ) )\r\n            {\r\n                LX.deleteElement( cursorSelections.firstChild );\r\n            }\r\n\r\n            for ( let i = toY; i <= fromY; i++ )\r\n            {\r\n                const sId = i - toY;\r\n                const isVisible = i >= this.visibleLinesViewport.x && i <= this.visibleLinesViewport.y;\r\n                let domEl = null;\r\n\r\n                if ( isVisible )\r\n                {\r\n                    // Make sure that the line selection is generated...\r\n                    domEl = cursorSelections.childNodes[sId];\r\n                    if ( !domEl )\r\n                    {\r\n                        domEl = document.createElement( 'div' );\r\n                        domEl.className = 'lexcodeselection';\r\n                        cursorSelections.appendChild( domEl );\r\n                    }\r\n                }\r\n\r\n                // Compute new width and selection margins\r\n                let string;\r\n\r\n                if ( sId == 0 )\r\n                {\r\n                    string = this.code.lines[i].substr( toX );\r\n                    const pixels = toX * this.charWidth;\r\n                    if ( isVisible ) domEl.style.left = 'calc(' + pixels + 'px + ' + this.xPadding + ')';\r\n                }\r\n                else\r\n                {\r\n                    string = ( i == fromY ) ? this.code.lines[i].substring( 0, fromX ) : this.code.lines[i]; // Last line, any multiple line...\r\n                    if ( isVisible ) domEl.style.left = this.xPadding;\r\n                }\r\n\r\n                const stringWidth = this.measureString( string );\r\n                selection.chars += stringWidth / this.charWidth;\r\n\r\n                if ( isVisible )\r\n                {\r\n                    domEl.style.width = ( stringWidth || 8 ) + 'px';\r\n                    domEl._top = i * this.lineHeight;\r\n                    domEl.style.top = domEl._top + 'px';\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    async processKey( e: KeyboardEvent )\r\n    {\r\n        const numCursors = this.cursors.length;\r\n\r\n        if ( !this.code || e.target?.constructor != HTMLDivElement )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const detail = ( e as any ).detail ?? {};\r\n        const key = e.key ?? detail.key;\r\n\r\n        // Don't propagate \"space to scroll\" event\r\n        if ( key == ' ' )\r\n        {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n\r\n        const target = detail.targetCursor;\r\n\r\n        // Global keys\r\n\r\n        if ( this._processGlobalKeys( e, key ) )\r\n        {\r\n            // Stop propagation..\r\n            return;\r\n        }\r\n\r\n        // By cursor keys\r\n\r\n        if ( target !== undefined )\r\n        {\r\n            this.processKeyAtTargetCursor( e, key, target );\r\n            return;\r\n        }\r\n\r\n        this._lastProcessedCursorIndex = null;\r\n        this._nextCursorPositionOffset = 0;\r\n\r\n        var lastProcessedCursor = null;\r\n        var cursorOffset = new LX.vec2( 0, 0 );\r\n\r\n        for ( var i = 0; i < numCursors; i++ )\r\n        {\r\n            let cursor = this.cursors[i];\r\n\r\n            // We could delete secondary cursor while iterating..\r\n            if ( !cursor )\r\n            {\r\n                break;\r\n            }\r\n\r\n            // Arrows don't modify code lines.. And only add offset if in the same line\r\n            if ( lastProcessedCursor && lastProcessedCursor.line == cursor.line && !key.includes( 'Arrow' ) )\r\n            {\r\n                cursor.position += cursorOffset.x;\r\n                cursor.line += cursorOffset.y;\r\n\r\n                this.relocateCursors();\r\n\r\n                // Apart from relocation based on offsets, its selection (if any) must be relocated too\r\n                if ( cursor.selection )\r\n                {\r\n                    cursor.selection.fromX += cursorOffset.x;\r\n                    cursor.selection.toX += cursorOffset.x;\r\n                    cursor.selection.fromY += cursorOffset.y;\r\n                    cursor.selection.toY += cursorOffset.y;\r\n\r\n                    this._processSelection( cursor );\r\n                }\r\n            }\r\n            else if ( lastProcessedCursor && lastProcessedCursor.line != cursor.line )\r\n            {\r\n                // Reset offset X in case we changed line\r\n                cursorOffset.x = 0;\r\n            }\r\n\r\n            lastProcessedCursor = this.saveCursor( cursor );\r\n            this._lastProcessedCursorIndex = i;\r\n\r\n            this._processKeyAtCursor( e, key, cursor );\r\n\r\n            // Apply difference offset between last processed cursor and current positions plus any offset generated\r\n            // during processing the key pressed\r\n            const totalCursorOffsetX = ( cursor.position - lastProcessedCursor.position ) + this._nextCursorPositionOffset;\r\n            const totalCursorOffsetY = cursor.line - lastProcessedCursor.line;\r\n\r\n            cursorOffset.x += totalCursorOffsetX;\r\n            cursorOffset.y += totalCursorOffsetY;\r\n\r\n            // Set active line in case it's blurred\r\n            if ( !cursor.selection )\r\n            {\r\n                cursor.line = cursor.line;\r\n            }\r\n        }\r\n\r\n        // Clear tmp\r\n        delete this._nextCursorPositionOffset;\r\n        delete this._lastProcessedCursorIndex;\r\n    }\r\n\r\n    async processKeyAtTargetCursor( e: KeyboardEvent, key: string, targetIdx: number )\r\n    {\r\n        let cursor = this.cursors[targetIdx];\r\n\r\n        // We could delete secondary cursor while iterating..\r\n        if ( !cursor )\r\n        {\r\n            return;\r\n        }\r\n\r\n        this._processKeyAtCursor( e, key, cursor );\r\n        this._processGlobalKeys( e, key );\r\n    }\r\n\r\n    _processGlobalKeys( e: KeyboardEvent, key: string )\r\n    {\r\n        let cursor = this.getCurrentCursor();\r\n\r\n        if ( e.ctrlKey || e.metaKey )\r\n        {\r\n            switch ( key.toLowerCase() )\r\n            {\r\n                case 'a': // select all\r\n                    e.preventDefault();\r\n                    this.selectAll();\r\n                    return true;\r\n                case 'b': // k+b comment block\r\n                    e.preventDefault();\r\n                    if ( this.state.keyChain == 'k' )\r\n                    {\r\n                        this._commentLines( cursor, true );\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                case 'c': // k+c, comment line\r\n                    e.preventDefault();\r\n                    if ( this.state.keyChain == 'k' )\r\n                    {\r\n                        this._commentLines( cursor );\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                case 'd': // next ocurrence\r\n                    e.preventDefault();\r\n                    this.selectNextOcurrence( cursor );\r\n                    return true;\r\n                case 'f': // find/search\r\n                    e.preventDefault();\r\n                    this.showSearchBox();\r\n                    return true;\r\n                case 'g': // find line\r\n                    e.preventDefault();\r\n                    this.showSearchLineBox();\r\n                    return true;\r\n                case 'k': // shortcut chain\r\n                    e.preventDefault();\r\n                    this.state.keyChain = 'k';\r\n                    return true;\r\n                case 's': // save\r\n                    e.preventDefault();\r\n                    if ( this.onSave )\r\n                    {\r\n                        this.onSave( this.getText() );\r\n                    }\r\n                    return true;\r\n                case 'u': // k+u, uncomment line\r\n                    e.preventDefault();\r\n                    if ( this.state.keyChain == 'k' )\r\n                    {\r\n                        this._uncommentLines( cursor );\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                case 'y': // redo\r\n                    e.preventDefault();\r\n                    this._doRedo( cursor );\r\n                    return true;\r\n                case 'z': // undo\r\n                    e.preventDefault();\r\n                    this._doUndo( cursor );\r\n                    return true;\r\n                case '+': // increase size\r\n                    e.preventDefault();\r\n                    this._increaseFontSize();\r\n                    return true;\r\n                case '-': // decrease size\r\n                    e.preventDefault();\r\n                    this._decreaseFontSize();\r\n                    return true;\r\n                case ' ': // custom event\r\n                    if ( this.onCtrlSpace )\r\n                    {\r\n                        e.preventDefault();\r\n                        this.onCtrlSpace( cursor );\r\n                        return true;\r\n                    }\r\n            }\r\n        }\r\n\r\n        this.state.keyChain = null;\r\n        return false;\r\n    }\r\n\r\n    async _processKeyAtCursor( e: KeyboardEvent, key: string, cursor: Cursor )\r\n    {\r\n        const detail = ( e as any ).detail ?? {};\r\n        const skipUndo = detail.skipUndo ?? false;\r\n        const skipDeleteSelection = detail.skipDeleteSelection ?? false;\r\n\r\n        // keys with length > 1 are probably special keys\r\n        if ( key.length > 1 && this.specialKeys.indexOf( key ) == -1 )\r\n        {\r\n            return;\r\n        }\r\n\r\n        let lidx = cursor.line;\r\n        this.code.lines[lidx] = this.code.lines[lidx] ?? '';\r\n\r\n        // Check combinations\r\n\r\n        const isLastCursor = cursor.isLast();\r\n\r\n        if ( e.ctrlKey || e.metaKey )\r\n        {\r\n            switch ( key.toLowerCase() )\r\n            {\r\n                case 'c': // copy\r\n                    this._copyContent( cursor );\r\n                    return;\r\n                case 'v': // paste\r\n                    this._pasteContent( cursor );\r\n                    return;\r\n                case 'x': // cut line\r\n                    this._cutContent( cursor );\r\n                    this.hideAutoCompleteBox();\r\n                    return;\r\n                case 'arrowdown': // add cursor below only for the main cursor..\r\n                    // Make sure shift is not pressed..\r\n                    if ( !e.shiftKey && isLastCursor && this.code.lines[lidx + 1] != undefined )\r\n                    {\r\n                        var newCursor: Cursor | null = this._addCursor( cursor.line, cursor.position, true );\r\n                        if ( !newCursor ) return;\r\n                        this.lineDown( newCursor );\r\n                        return;\r\n                    }\r\n            }\r\n        }\r\n        else if ( e.altKey )\r\n        {\r\n            switch ( key )\r\n            {\r\n                case 'd': // duplicate line\r\n                    e.preventDefault();\r\n                    this._duplicateLine( lidx, cursor );\r\n                    return;\r\n                case 'ArrowUp':\r\n                    this.swapLines( lidx, -1, cursor );\r\n                    return;\r\n                case 'ArrowDown':\r\n                    this.swapLines( lidx, 1, cursor );\r\n                    return;\r\n            }\r\n        }\r\n\r\n        // Apply binded actions...\r\n\r\n        for ( const actKey in this.actions )\r\n        {\r\n            if ( key != actKey )\r\n            {\r\n                continue;\r\n            }\r\n\r\n            e.preventDefault();\r\n\r\n            if ( this._actionMustDelete( cursor, this.actions[key], e ) )\r\n            {\r\n                this.actions['Backspace'].callback( lidx, cursor, e );\r\n            }\r\n\r\n            return this.actions[key].callback( lidx, cursor, e );\r\n        }\r\n\r\n        // From now on, don't allow ctrl, shift or meta (mac) combinations\r\n        if ( e.ctrlKey || e.metaKey )\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Add undo steps\r\n\r\n        if ( !skipUndo && this.code.lines.length )\r\n        {\r\n            this._addUndoStep( cursor );\r\n        }\r\n\r\n        //  Some custom cases for word enclosing (), {}, \"\", '', ...\r\n\r\n        const enclosableKeys = [ '\"', \"'\", '(', '{' ];\r\n        if ( enclosableKeys.indexOf( key ) > -1 )\r\n        {\r\n            if ( this._encloseSelectedWordWithKey( key, lidx, cursor ) )\r\n            {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // Until this point, if there was a selection, we need\r\n        // to delete the content..\r\n\r\n        if ( cursor.selection && !skipDeleteSelection )\r\n        {\r\n            this.actions['Backspace'].callback( lidx, cursor, e );\r\n            lidx = cursor.line;\r\n        }\r\n\r\n        // Append key\r\n\r\n        const nextChar = this.getCharAtPos( cursor ); // Only pair keys if no next char or its a space\r\n        const isPairKey = ( Object.values( this.pairKeys ).indexOf( key ) > -1 ) && !this.wasKeyPaired;\r\n        const sameKeyNext = isPairKey && ( nextChar === key );\r\n\r\n        if ( !sameKeyNext )\r\n        {\r\n            this.code.lines[lidx] = [\r\n                this.code.lines[lidx].slice( 0, cursor.position ),\r\n                key,\r\n                this.code.lines[lidx].slice( cursor.position )\r\n            ].join( '' );\r\n        }\r\n\r\n        this.cursorToRight( key, cursor );\r\n\r\n        //  Some custom cases for auto key pair (), {}, \"\", '', ...\r\n\r\n        const keyMustPair = ( this.pairKeys[key] !== undefined ) && ( !nextChar || /\\s/.test( nextChar ) );\r\n        if ( keyMustPair && !this.wasKeyPaired )\r\n        {\r\n            // Make sure to detect later that the key is paired automatically to avoid loops...\r\n            this.wasKeyPaired = true;\r\n\r\n            if ( sameKeyNext ) return;\r\n\r\n            this.root.dispatchEvent( new KeyboardEvent( 'keydown', { 'key': this.pairKeys[key] } ) );\r\n            this.cursorToLeft( key, cursor );\r\n            return;\r\n        }\r\n\r\n        // Once here we can pair keys again\r\n        delete this.wasKeyPaired;\r\n\r\n        // Update only the current line, since it's only an appended key\r\n        this.processLine( lidx );\r\n\r\n        // We are out of the viewport and max length is different? Resize scrollbars...\r\n        this.resizeIfNecessary( cursor );\r\n\r\n        // Manage autocomplete\r\n\r\n        if ( this.useAutoComplete )\r\n        {\r\n            this.showAutoCompleteBox( key, cursor );\r\n        }\r\n    }\r\n\r\n    async _pasteContent( cursor: Cursor )\r\n    {\r\n        const mustDetectLanguage = !this.getText().length;\r\n\r\n        let text = await navigator.clipboard.readText();\r\n\r\n        // Remove any possible tabs (\\t) and add spaces\r\n        text = text.replaceAll( /\\t|\\\\t/g, ' '.repeat( this.tabSpaces ) );\r\n\r\n        this._addUndoStep( cursor, true );\r\n\r\n        this.appendText( text, cursor );\r\n\r\n        const currentScroll = this.getScrollTop();\r\n        const scroll = Math.max( cursor.line * this.lineHeight - this.codeScroller.offsetWidth, 0 );\r\n\r\n        if ( currentScroll < scroll )\r\n        {\r\n            this.codeScroller.scrollTo( 0, cursor.line * this.lineHeight );\r\n        }\r\n\r\n        if ( mustDetectLanguage )\r\n        {\r\n            const detectedLang = this._detectLanguage( text );\r\n            if ( detectedLang )\r\n            {\r\n                this._changeLanguage( detectedLang );\r\n            }\r\n        }\r\n    }\r\n\r\n    async _copyContent( cursor: Cursor )\r\n    {\r\n        let textToCopy = '';\r\n\r\n        if ( !cursor.selection )\r\n        {\r\n            textToCopy = '\\n' + this.code.lines[cursor.line];\r\n        }\r\n        else\r\n        {\r\n            // Some selections don't depend on mouse up..\r\n            if ( cursor.selection ) cursor.selection.invertIfNecessary();\r\n\r\n            const separator = '_NEWLINE_';\r\n            let code = this.code.lines.join( separator );\r\n\r\n            // Get linear start index\r\n            let index = 0;\r\n\r\n            for ( let i = 0; i <= cursor.selection.fromY; i++ )\r\n            {\r\n                index += i == cursor.selection.fromY ? cursor.selection.fromX : this.code.lines[i].length;\r\n            }\r\n\r\n            index += cursor.selection.fromY * separator.length;\r\n            const num_chars = cursor.selection.chars\r\n                + ( cursor.selection.toY - cursor.selection.fromY ) * separator.length;\r\n            const text = code.substr( index, num_chars );\r\n            const lines = text.split( separator );\r\n            textToCopy = lines.join( '\\n' );\r\n        }\r\n\r\n        navigator.clipboard.writeText( textToCopy );\r\n        // .then(() => console.log(\"Successfully copied\"), (err) => console.error(\"Error\"));\r\n    }\r\n\r\n    async _cutContent( cursor: Cursor )\r\n    {\r\n        let lidx = cursor.line;\r\n        let textToCut = '';\r\n\r\n        this._addUndoStep( cursor, true );\r\n\r\n        if ( !cursor.selection )\r\n        {\r\n            textToCut = '\\n' + this.code.lines[cursor.line];\r\n            this.code.lines.splice( lidx, 1 );\r\n            this.processLines();\r\n            this.resetCursorPos( CodeEditor.CURSOR_LEFT, cursor );\r\n            if ( this.code.lines[lidx] == undefined )\r\n            {\r\n                this.lineUp( cursor );\r\n            }\r\n        }\r\n        else\r\n        {\r\n            // Some selections don't depend on mouse up..\r\n            if ( cursor.selection ) cursor.selection.invertIfNecessary();\r\n\r\n            const separator = '_NEWLINE_';\r\n            let code = this.code.lines.join( separator );\r\n\r\n            // Get linear start index\r\n            let index = 0;\r\n\r\n            for ( let i = 0; i <= cursor.selection.fromY; i++ )\r\n            {\r\n                index += i == cursor.selection.fromY ? cursor.selection.fromX : this.code.lines[i].length;\r\n            }\r\n\r\n            index += cursor.selection.fromY * separator.length;\r\n            const numChars = cursor.selection.chars\r\n                + ( cursor.selection.toY - cursor.selection.fromY ) * separator.length;\r\n            const text = code.substr( index, numChars );\r\n            const lines = text.split( separator );\r\n            textToCut = lines.join( '\\n' );\r\n\r\n            this.deleteSelection( cursor );\r\n        }\r\n\r\n        navigator.clipboard.writeText( textToCut );\r\n        // .then(() => console.log(\"Successfully cut\"), (err) => console.error(\"Error\"));\r\n    }\r\n\r\n    _duplicateLine( lidx: number, cursor: Cursor )\r\n    {\r\n        this.endSelection();\r\n        this._addUndoStep( cursor, true );\r\n        this.code.lines.splice( lidx, 0, this.code.lines[lidx] );\r\n        this.lineDown( cursor );\r\n        this.processLines();\r\n        this.hideAutoCompleteBox();\r\n    }\r\n\r\n    _commentLines( cursor: Cursor, useCommentBlock: boolean = false )\r\n    {\r\n        const lang = CodeEditor.languages[this.highlight];\r\n\r\n        this.state.keyChain = null;\r\n\r\n        cursor = cursor ?? this.getCurrentCursor();\r\n\r\n        if ( cursor.selection )\r\n        {\r\n            if ( !( ( useCommentBlock ? lang.blockComments : lang.singleLineComments ) ?? true ) )\r\n            {\r\n                return;\r\n            }\r\n\r\n            this._addUndoStep( cursor, true );\r\n\r\n            const selectedLines = this.code.lines.slice( cursor.selection.fromY, cursor.selection.toY + 1 );\r\n            const minIdx = Math.min( ...selectedLines.map( ( v: string ) => {\r\n                var idx = firstNonspaceIndex( v );\r\n                return idx < 0 ? 1e10 : idx;\r\n            } ) );\r\n\r\n            if ( useCommentBlock )\r\n            {\r\n                const tokens = lang.blockCommentsTokens ?? this.defaultBlockCommentTokens;\r\n\r\n                const fromString = this.code.lines[cursor.selection.fromY];\r\n                let fromIdx = firstNonspaceIndex( fromString );\r\n                if ( fromIdx == -1 )\r\n                {\r\n                    fromIdx = 0;\r\n                }\r\n\r\n                this.code.lines[cursor.selection.fromY] = [\r\n                    fromString.substring( 0, fromIdx ),\r\n                    tokens[0] + ' ',\r\n                    fromString.substring( fromIdx )\r\n                ].join( '' );\r\n\r\n                this.code.lines[cursor.selection.toY] += ' ' + tokens[1];\r\n\r\n                cursor.selection.fromX += tokens[0].length + 1;\r\n                this._processSelection( cursor );\r\n            }\r\n            else\r\n            {\r\n                for ( let i = cursor.selection.fromY; i <= cursor.selection.toY; ++i )\r\n                {\r\n                    this._commentLine( cursor, i, minIdx, false );\r\n                }\r\n\r\n                const token = ( lang.singleLineCommentToken ?? this.defaultSingleLineCommentToken ) + ' ';\r\n                this.cursorToString( cursor, token );\r\n\r\n                cursor.selection.fromX += token.length;\r\n                cursor.selection.toX += token.length;\r\n                this._processSelection( cursor );\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if ( !( lang.singleLineComments ?? true ) )\r\n            {\r\n                return;\r\n            }\r\n\r\n            for ( const cr of this.cursors )\r\n            {\r\n                this._addUndoStep( cr, true );\r\n                this._commentLine( cr, cr.line );\r\n            }\r\n        }\r\n\r\n        this.processLines();\r\n        this._hideActiveLine();\r\n    }\r\n\r\n    _commentLine( cursor: Cursor, line: number, minNonspaceIdx?: number, updateCursor = true )\r\n    {\r\n        const lang = CodeEditor.languages[this.highlight];\r\n        if ( !( lang.singleLineComments ?? true ) )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const token = ( lang.singleLineCommentToken ?? this.defaultSingleLineCommentToken ) + ' ';\r\n        const string = this.code.lines[line];\r\n\r\n        let idx = firstNonspaceIndex( string );\r\n        if ( idx == -1 )\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Update idx using min of the selected lines (if necessary..)\r\n        idx = minNonspaceIdx ?? idx;\r\n\r\n        this.code.lines[line] = [\r\n            string.substring( 0, idx ),\r\n            token,\r\n            string.substring( idx )\r\n        ].join( '' );\r\n\r\n        if ( updateCursor )\r\n        {\r\n            this.cursorToString( cursor, token );\r\n        }\r\n    }\r\n\r\n    _uncommentLines( cursor: Cursor )\r\n    {\r\n        this.state.keyChain = null;\r\n\r\n        const currCursor = this.getCurrentCursor();\r\n\r\n        if ( currCursor.selection !== null )\r\n        {\r\n            this._addUndoStep( cursor, true );\r\n\r\n            for ( var i = currCursor.selection.fromY; i <= currCursor.selection.toY; ++i )\r\n            {\r\n                this._uncommentLine( cursor, i );\r\n            }\r\n        }\r\n        else\r\n        {\r\n            for ( let cursor of this.cursors )\r\n            {\r\n                this._addUndoStep( cursor, true );\r\n                this._uncommentLine( cursor, cursor.line );\r\n            }\r\n        }\r\n\r\n        this.processLines();\r\n        this._hideActiveLine();\r\n    }\r\n\r\n    _uncommentLine( cursor: Cursor, line: number )\r\n    {\r\n        const lang = CodeEditor.languages[this.highlight];\r\n\r\n        if ( !( lang.singleLineComments ?? true ) )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const token = lang.singleLineCommentToken ?? this.defaultSingleLineCommentToken;\r\n        const string = this.code.lines[line];\r\n\r\n        if ( string.includes( token ) )\r\n        {\r\n            this.code.lines[line] = string.replace( token + ' ', '' );\r\n\r\n            // try deleting token + space, and then if not, delete only the token\r\n            if ( string.length == this.code.lines[line].length )\r\n            {\r\n                this.code.lines[line] = string.replace( token, '' );\r\n            }\r\n\r\n            this.cursorToString( cursor, 'X'.repeat( Math.abs( string.length - this.code.lines[line].length ) ), true );\r\n        }\r\n    }\r\n\r\n    action( key: string, deleteSelection: boolean = false, fn?: ( l: number, cursor: Cursor, e: any ) => void, eventSkipDeleteFn?: any )\r\n    {\r\n        this.actions[key] = {\r\n            'key': key,\r\n            'callback': fn,\r\n            'deleteSelection': deleteSelection,\r\n            'eventSkipDeleteFn': eventSkipDeleteFn\r\n        };\r\n    }\r\n\r\n    _actionMustDelete( cursor: Cursor, action: any, e: any )\r\n    {\r\n        return cursor.selection && action.deleteSelection\r\n            && !( action.eventSkipDeleteFn ? action.eventSkipDeleteFn( cursor, e ) : false );\r\n    }\r\n\r\n    scanWordSuggestions()\r\n    {\r\n        this.code.tokens = {};\r\n\r\n        for ( let i = 0; i < this.code.lines.length; ++i )\r\n        {\r\n            const lineString = this.code.lines[i];\r\n            const tokens = this._getTokensFromLine( lineString, true );\r\n            tokens.forEach( ( t: string ) => this.code.tokens[t] = 1 );\r\n        }\r\n    }\r\n\r\n    toLocalLine( line: number )\r\n    {\r\n        const d = Math.max( this.firstLineInViewport - this.lineScrollMargin.x, 0 );\r\n        return Math.min( Math.max( line - d, 0 ), this.code.lines.length - 1 );\r\n    }\r\n\r\n    getMaxLineLength()\r\n    {\r\n        return Math.max( ...this.code.lines.map( ( v: string ) => v.length ) );\r\n    }\r\n\r\n    _processLinesIfNecessary()\r\n    {\r\n        if ( this.mustProcessLines )\r\n        {\r\n            this.mustProcessLines = false;\r\n            this.processLines();\r\n        }\r\n    }\r\n\r\n    processLines( mode?: number )\r\n    {\r\n        if ( !this.code )\r\n        {\r\n            return;\r\n        }\r\n\r\n        var htmlCode = '';\r\n        this._blockCommentCache.length = 0;\r\n        this.mustProcessLines = false;\r\n\r\n        // Reset all lines content\r\n        this.code.innerHTML = '';\r\n\r\n        // Get info about lines in viewport\r\n        const lastScrollTop = this.getScrollTop();\r\n        this.firstLineInViewport = ( mode ?? CodeEditor.KEEP_VISIBLE_LINES ) & CodeEditor.UPDATE_VISIBLE_LINES\r\n            ? ( ( lastScrollTop / this.lineHeight ) | 0 )\r\n            : this.firstLineInViewport;\r\n        const totalLinesInViewport = ( ( this.codeScroller.offsetHeight ) / this.lineHeight ) | 0;\r\n        this.visibleLinesViewport = new LX.vec2(\r\n            Math.max( this.firstLineInViewport - this.lineScrollMargin.x, 0 ),\r\n            Math.min( this.firstLineInViewport + totalLinesInViewport + this.lineScrollMargin.y, this.code.lines.length )\r\n        );\r\n\r\n        // Add remaining lines if we are near the end of the scroll\r\n        {\r\n            const diff = Math.max( this.code.lines.length - this.visibleLinesViewport.y, 0 );\r\n            if ( diff <= this.lineScrollMargin.y )\r\n            {\r\n                this.visibleLinesViewport.y += diff;\r\n            }\r\n        }\r\n\r\n        this._scopeStack = [ { name: '', type: 'global' } ];\r\n\r\n        // Process visible lines\r\n        for ( let i = this.visibleLinesViewport.x; i < this.visibleLinesViewport.y; ++i )\r\n        {\r\n            htmlCode += this.processLine( i, true );\r\n        }\r\n\r\n        this.code.innerHTML = htmlCode;\r\n\r\n        // Update scroll data\r\n        this.codeScroller.scrollTop = lastScrollTop;\r\n        this.code.style.top = ( this.visibleLinesViewport.x * this.lineHeight ) + 'px';\r\n\r\n        // Update selections\r\n        this.updateSelections( null, true );\r\n\r\n        this._clearTmpVariables();\r\n        this._setActiveLine();\r\n        this.resize();\r\n    }\r\n\r\n    processLine( lineNumber: number, force: boolean = false, skipPropagation: boolean = false )\r\n    {\r\n        if ( this._scopeStack )\r\n        {\r\n            this.code.lineScopes[lineNumber] = [ ...this._scopeStack ];\r\n        }\r\n        else\r\n        {\r\n            this.code.lineScopes[lineNumber] = this.code.lineScopes[lineNumber] ?? [];\r\n            this._scopeStack = [ ...this.code.lineScopes[lineNumber] ];\r\n        }\r\n\r\n        const lang = CodeEditor.languages[this.highlight];\r\n        const localLineNum = this.toLocalLine( lineNumber );\r\n        const lineString = this.code.lines[lineNumber];\r\n        if ( lineString === undefined )\r\n        {\r\n            return;\r\n        }\r\n\r\n        this._lastProcessedLine = lineNumber;\r\n\r\n        // multi-line strings not supported by now\r\n        delete this._buildingString;\r\n        delete this._pendingString;\r\n        delete this._markdownHeader;\r\n\r\n        // Single line\r\n        if ( !force )\r\n        {\r\n            LX.deleteElement( this.code.childNodes[localLineNum] );\r\n            LX.insertChildAtIndex( this.code, document.createElement( 'pre' ), localLineNum );\r\n        }\r\n\r\n        // Early out check for no highlighting languages\r\n        if ( this.highlight == 'Plain Text' )\r\n        {\r\n            const plainTextHtml = lineString.replaceAll( '<', '&lt;' ).replaceAll( '>', '&gt;' );\r\n            return this._updateLine( force, lineNumber, plainTextHtml, skipPropagation );\r\n        }\r\n\r\n        this._currentLineNumber = lineNumber;\r\n        this._currentLineString = lineString;\r\n\r\n        const tokensToEvaluate = this._getTokensFromLine( lineString );\r\n        if ( !tokensToEvaluate.length )\r\n        {\r\n            return this._updateLine( force, lineNumber, '', skipPropagation );\r\n        }\r\n\r\n        let lineInnerHtml = '';\r\n        let pushedScope = false;\r\n\r\n        const newSignature = this._getLineSignatureFromTokens( tokensToEvaluate );\r\n        const cachedSignature = this.code.lineSignatures[lineNumber];\r\n        const mustUpdateScopes = ( cachedSignature !== newSignature ) && !force;\r\n        const blockComments = lang.blockComments ?? true;\r\n        const blockCommentsTokens = lang.blockCommentsTokens ?? this.defaultBlockCommentTokens;\r\n\r\n        // Reset scope stack if structural changes in current line\r\n        if ( mustUpdateScopes )\r\n        {\r\n            this._scopeStack = [ { name: '', type: 'global' } ];\r\n        }\r\n\r\n        // Process all tokens\r\n        for ( let i = 0; i < tokensToEvaluate.length; ++i )\r\n        {\r\n            let it = i - 1;\r\n            let prev = tokensToEvaluate[it];\r\n            while ( prev == ' ' )\r\n            {\r\n                it--;\r\n                prev = tokensToEvaluate[it];\r\n            }\r\n\r\n            it = i + 1;\r\n            let next = tokensToEvaluate[it];\r\n            while ( next == ' ' || next == '\"' )\r\n            {\r\n                it++;\r\n                next = tokensToEvaluate[it];\r\n            }\r\n\r\n            const token = tokensToEvaluate[i];\r\n            const tokenIndex = i;\r\n            const tokenStartIndex = this._currentTokenPositions[tokenIndex];\r\n\r\n            if ( blockComments )\r\n            {\r\n                if ( token.substr( 0, blockCommentsTokens[0].length ) == blockCommentsTokens[0] )\r\n                {\r\n                    this._buildingBlockComment = [ lineNumber, tokenStartIndex ];\r\n                }\r\n            }\r\n\r\n            // Compare line signature for structural changes\r\n            // to pop current scope if necessary\r\n            if ( token === '}' && this._scopeStack.length > 1 )\r\n            {\r\n                this._scopeStack.pop();\r\n            }\r\n\r\n            lineInnerHtml += this._evaluateToken( {\r\n                token,\r\n                prev,\r\n                prevWithSpaces: tokensToEvaluate[i - 1],\r\n                next,\r\n                nextWithSpaces: tokensToEvaluate[i + 1],\r\n                tokenIndex,\r\n                isFirstToken: ( tokenIndex == 0 ),\r\n                isLastToken: ( tokenIndex == tokensToEvaluate.length - 1 ),\r\n                tokens: tokensToEvaluate\r\n            } );\r\n\r\n            if ( blockComments && this._buildingBlockComment != undefined\r\n                && token.substr( 0, blockCommentsTokens[1].length ) == blockCommentsTokens[1] )\r\n            {\r\n                const [ commentLineNumber, tokenPos ] = this._buildingBlockComment;\r\n                this._blockCommentCache.push( [ new LX.vec2( commentLineNumber, lineNumber ), new LX.vec2( tokenPos, tokenStartIndex ) ] );\r\n                delete this._buildingBlockComment;\r\n            }\r\n\r\n            if ( token !== '{' )\r\n            {\r\n                continue;\r\n            }\r\n\r\n            // Store current scopes\r\n\r\n            let contextTokens = [\r\n                ...this._getTokensFromLine( this.code.lines[lineNumber].substring( 0, tokenStartIndex ) )\r\n            ];\r\n\r\n            // Add token context from above lines in case we don't have information\r\n            // in the same line to get the scope data\r\n            if ( !prev )\r\n            {\r\n                for ( let k = 1; k < 50; k++ )\r\n                {\r\n                    let kLineString = this.code.lines[lineNumber - k];\r\n                    if ( !kLineString )\r\n                    {\r\n                        break;\r\n                    }\r\n\r\n                    const openIdx = kLineString.lastIndexOf( '{' );\r\n                    const closeIdx = kLineString.lastIndexOf( '}' );\r\n                    if ( openIdx > -1 )\r\n                    {\r\n                        kLineString = kLineString.substr( openIdx );\r\n                    }\r\n                    else if ( closeIdx > -1 )\r\n                    {\r\n                        kLineString = kLineString.substr( closeIdx );\r\n                    }\r\n\r\n                    contextTokens = [ ...this._getTokensFromLine( kLineString ), ...contextTokens ];\r\n\r\n                    if ( kLineString.length !== this.code.lines[lineNumber - k] )\r\n                    {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            contextTokens = contextTokens.reverse().filter( ( v ) => v.length && v != ' ' );\r\n\r\n            // Keywords that can open a *named* scope\r\n            // TODO: Do this per language\r\n            const scopeKeywords = [ 'class', 'enum', 'function', 'interface', 'type', 'struct', 'namespace' ];\r\n\r\n            let scopeType = null; // This is the type of scope (function, class, enum, etc)\r\n            let scopeName = null;\r\n\r\n            for ( let i = 0; i < contextTokens.length; i++ )\r\n            {\r\n                const t = contextTokens[i];\r\n\r\n                if ( scopeKeywords.includes( t ) )\r\n                {\r\n                    scopeType = t;\r\n                    scopeName = contextTokens[i - 1]; // usually right before the keyword in reversed array\r\n                    break;\r\n                }\r\n            }\r\n\r\n            // Special case: enum type specification `enum Foo : int {`\r\n            if ( scopeType === 'enum' && contextTokens.includes( ':' ) )\r\n            {\r\n                const colonIndex = contextTokens.indexOf( ':' );\r\n                scopeName = contextTokens[colonIndex + 1] || scopeName;\r\n            }\r\n\r\n            if ( !scopeType )\r\n            {\r\n                const parOpenIndex = contextTokens.indexOf( '(' );\r\n                scopeName = contextTokens[parOpenIndex + 1] || scopeName;\r\n\r\n                if ( scopeName )\r\n                {\r\n                    scopeType = 'method';\r\n                }\r\n            }\r\n\r\n            // Only push if it's not already reflected in the cached scopes\r\n            const lastScope = this._scopeStack.at( -1 );\r\n            if ( lastScope?.lineNumber !== lineNumber )\r\n            {\r\n                this._scopeStack.push( { name: scopeName ?? '', type: scopeType ?? 'anonymous', lineNumber } );\r\n            }\r\n\r\n            pushedScope = true;\r\n        }\r\n\r\n        // Update scopes cache\r\n        this.code.lineScopes[lineNumber] = [ ...this._scopeStack ];\r\n\r\n        const symbols = this._parseLineForSymbols( lineNumber, lineString, tokensToEvaluate, pushedScope );\r\n\r\n        return this._updateLine( force, lineNumber, lineInnerHtml, skipPropagation, symbols, tokensToEvaluate );\r\n    }\r\n\r\n    _getLineSignatureFromTokens( tokens: string[] )\r\n    {\r\n        const structuralChars = new Set( [ '{', '}' ] );\r\n        const sign = tokens.filter( ( t ) => structuralChars.has( t ) );\r\n        return sign.join( '_' );\r\n    }\r\n\r\n    _updateBlockComments( section: any, lineNumber: number, tokens: string[] )\r\n    {\r\n        const lang = CodeEditor.languages[this.highlight];\r\n        const blockCommentsTokens = lang.blockCommentsTokens ?? this.defaultBlockCommentTokens;\r\n        const lineOpensBlock = section[0].x === lineNumber;\r\n        const lineClosesBlock = section[0].y === lineNumber;\r\n        const lineInsideBlock = ( section[0].x !== lineNumber ) && ( section[0].y !== lineNumber );\r\n\r\n        delete this._buildingBlockComment;\r\n\r\n        /*\r\n            Check if delimiters have been removed and process lines backwards/forward\r\n            until reaching new delimiters\r\n        */\r\n\r\n        if ( lineOpensBlock )\r\n        {\r\n            const r = tokens.filter( ( t ) => t.substr( 0, blockCommentsTokens[0].length ) == blockCommentsTokens[0] );\r\n            if ( !r.length )\r\n            {\r\n                this._buildingBlockComment = [ lineNumber - 1, 0 ];\r\n\r\n                this.mustProcessPreviousLine = ( tokens ) => {\r\n                    const idx = tokens.indexOf( blockCommentsTokens[0] );\r\n                    return ( idx === -1 );\r\n                };\r\n\r\n                this.processLine( lineNumber - 1, false, true );\r\n\r\n                section[0].x = this._lastProcessedLine;\r\n\r\n                const lastProcessedString = this.code.lines[this._lastProcessedLine];\r\n                const idx = lastProcessedString.indexOf( blockCommentsTokens[0] );\r\n                section[1].x = idx > 0 ? idx : 0;\r\n            }\r\n            else\r\n            {\r\n                const tokenIndex = tokens.indexOf( blockCommentsTokens[0] );\r\n                const tokenStartIndex = this._currentTokenPositions[tokenIndex];\r\n                section[1].x = tokenStartIndex;\r\n                // Process current line to update new sections\r\n                this.processLine( lineNumber, false, true );\r\n            }\r\n        }\r\n        else if ( lineClosesBlock )\r\n        {\r\n            const r = tokens.filter( ( t ) => t.substr( 0, blockCommentsTokens[1].length ) == blockCommentsTokens[1] );\r\n            if ( !r.length )\r\n            {\r\n                this._buildingBlockComment = [ section[0].x, section[1].x ];\r\n\r\n                this.mustProcessNextLine = ( tokens ) => {\r\n                    const idx = tokens.indexOf( blockCommentsTokens[1] );\r\n                    return ( idx === -1 );\r\n                };\r\n\r\n                this.processLine( lineNumber + 1, false, true );\r\n\r\n                section[0].y = this._lastProcessedLine;\r\n\r\n                const lastProcessedString = this.code.lines[this._lastProcessedLine];\r\n                const idx = lastProcessedString.indexOf( blockCommentsTokens[1] );\r\n                section[1].y = idx > 0 ? idx : ( lastProcessedString.length - 1 );\r\n            }\r\n            else\r\n            {\r\n                const tokenIndex = tokens.indexOf( blockCommentsTokens[1] );\r\n                const tokenStartIndex = this._currentTokenPositions[tokenIndex];\r\n                section[1].y = tokenStartIndex;\r\n                // Process current line to update new sections\r\n                this.processLine( lineNumber, false, true );\r\n            }\r\n        }\r\n        else if ( lineInsideBlock )\r\n        {\r\n            // Here it can't modify delimiters..\r\n        }\r\n    }\r\n\r\n    _processExtraLineIfNecessary( lineNumber: number, tokens: string[], oldSymbols: any[], skipPropagation: boolean = false )\r\n    {\r\n        if ( !this._scopeStack )\r\n        {\r\n            console.warn( 'CodeEditor: No scope available' );\r\n            return;\r\n        }\r\n\r\n        // Update block comments if necessary\r\n        {\r\n            const commentBlockSection = this._inBlockCommentSection( lineNumber, 1e10, -1e10 );\r\n            if ( tokens && commentBlockSection !== undefined )\r\n            {\r\n                this._updateBlockComments( commentBlockSection, lineNumber, tokens );\r\n\r\n                // Get again correct scope\r\n                this._scopeStack = [ ...this.code.lineScopes[lineNumber] ];\r\n            }\r\n        }\r\n\r\n        if ( ( ( lineNumber + 1 ) === this.code.lines.length ) || !this.code.lineScopes[lineNumber + 1] )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const newSignature = this._getLineSignatureFromTokens( tokens );\r\n        const cachedSignature = this.code.lineSignatures[lineNumber];\r\n        const mustUpdateScopes = cachedSignature !== newSignature;\r\n        const sameScopes = codeScopesEqual( this._scopeStack, this.code.lineScopes[lineNumber + 1] );\r\n\r\n        // Only update scope stack if something changed when editing a single line\r\n        // Compare line signature for structural changes\r\n        if ( ( mustUpdateScopes || this._scopesUpdated ) && ( !sameScopes && !skipPropagation ) )\r\n        {\r\n            if ( mustUpdateScopes )\r\n            {\r\n                this._scopesUpdated = true;\r\n            }\r\n\r\n            this.code.lineScopes[lineNumber + 1] = [ ...this._scopeStack ];\r\n            this.processLine( lineNumber + 1 );\r\n\r\n            delete this._scopesUpdated;\r\n        }\r\n        else if ( sameScopes )\r\n        {\r\n            // In case of same scope, check for occurrencies of the old symbols, to reprocess that lines\r\n            for ( const sym of oldSymbols )\r\n            {\r\n                const tableSymbol = this.code.symbolsTable.get( sym.name );\r\n                if ( tableSymbol === undefined )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                for ( const occ of tableSymbol )\r\n                {\r\n                    if ( occ.line === lineNumber )\r\n                    {\r\n                        continue;\r\n                    }\r\n\r\n                    this.processLine( occ.line, false, true );\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _updateLine( force: boolean = false, lineNumber: number, html: string, skipPropagation: boolean = false, symbols: any[] = [], tokens: any[] = [] )\r\n    {\r\n        const gutterLineHtml = `<span class='line-gutter'>${lineNumber + 1}</span>`;\r\n        const oldSymbols = this._updateLineSymbols( lineNumber, symbols );\r\n        const lineScope = CodeEditor.debugScopes && this.code.lineScopes[lineNumber]\r\n            ? this.code.lineScopes[lineNumber].map( ( s: any ) => `${s.type}` ).join( ', ' )\r\n            : '';\r\n        const lineSymbols = CodeEditor.debugSymbols && this.code.lineSymbols[lineNumber]\r\n            ? this.code.lineSymbols[lineNumber].map( ( s: any ) => `${s.name}(${s.kind})` ).join( ', ' )\r\n            : '';\r\n        const debugString = lineScope + ( lineScope.length ? ' - ' : '' ) + lineSymbols;\r\n\r\n        if ( !force )\r\n        { // Single line update\r\n            this.code.childNodes[this.toLocalLine( lineNumber )].innerHTML = gutterLineHtml + html + debugString;\r\n\r\n            if ( !skipPropagation )\r\n            {\r\n                this._processExtraLineIfNecessary( lineNumber, tokens, oldSymbols, skipPropagation );\r\n            }\r\n\r\n            if ( this.mustProcessNextLine )\r\n            {\r\n                if ( this.mustProcessNextLine( tokens ) && ( ( lineNumber + 1 ) < this.code.lines.length ) )\r\n                {\r\n                    this.processLine( lineNumber + 1, false, true );\r\n                }\r\n                else\r\n                {\r\n                    delete this.mustProcessNextLine;\r\n                }\r\n            }\r\n\r\n            if ( this.mustProcessPreviousLine )\r\n            {\r\n                if ( this.mustProcessPreviousLine( tokens ) && ( ( lineNumber - 1 ) >= 0 ) )\r\n                {\r\n                    this.processLine( lineNumber - 1, false, true );\r\n                }\r\n                else\r\n                {\r\n                    delete this.mustProcessPreviousLine;\r\n                }\r\n            }\r\n\r\n            if ( CodeEditor.debugProcessedLines )\r\n            {\r\n                this.code.childNodes[lineNumber]?.classList.add( 'debug' );\r\n            }\r\n\r\n            this._setActiveLine( lineNumber );\r\n            this._clearTmpVariables();\r\n        }\r\n\r\n        this.code.lineSignatures[lineNumber] = this._getLineSignatureFromTokens( tokens );\r\n\r\n        // Update all lines at once\r\n        return force ? `<pre>${( gutterLineHtml + html + debugString )}</pre>` : undefined;\r\n    }\r\n\r\n    /**\r\n     * Parses a single line of code and extract declared symbols\r\n     */\r\n    _parseLineForSymbols( lineNumber: number, lineString: string, tokens: string[], pushedScope: boolean = false )\r\n    {\r\n        const scope = this._scopeStack.at( pushedScope ? -2 : -1 );\r\n\r\n        if ( !scope || this._inBlockCommentSection( lineNumber ) )\r\n        {\r\n            return [];\r\n        }\r\n\r\n        const scopeName = scope.name;\r\n        const scopeType = scope.type;\r\n        const symbols: any[] = [];\r\n        const symbolsMap = new Map();\r\n        const text = lineString.trim();\r\n        const previousLineScope = this.code.lineScopes[lineNumber - 1];\r\n\r\n        const _pushSymbol = ( s: any ) => {\r\n            const signature = `${s.name}_${s.kind}_${s.scope}_${s.line}`;\r\n            if ( symbolsMap.has( signature ) )\r\n            {\r\n                return;\r\n            }\r\n            symbolsMap.set( signature, s );\r\n            symbols.push( s );\r\n        };\r\n\r\n        // Don't make symbols from preprocessor lines\r\n        if ( text.startsWith( '#' ) )\r\n        {\r\n            return [];\r\n        }\r\n\r\n        const nativeTypes = CodeEditor.nativeTypes[this.highlight];\r\n\r\n        const topLevelRegexes: any = [\r\n            [ /^class\\s+([A-Za-z0-9_]+)/, 'class' ],\r\n            [ /^struct\\s+([A-Za-z0-9_]+)/, 'struct' ],\r\n            [ /^enum\\s+([A-Za-z0-9_]+)/, 'enum' ],\r\n            [ /^interface\\s+([A-Za-z0-9_]+)/, 'interface' ],\r\n            [ /^type\\s+([A-Za-z0-9_]+)/, 'type' ],\r\n            [ /^function\\s+([A-Za-z0-9_]+)/, 'method' ],\r\n            [ /^fn\\s+([A-Za-z0-9_]+)/, 'method' ],\r\n            [ /^def\\s+([A-Za-z0-9_]+)/, 'method' ],\r\n            [ /^([A-Za-z0-9_]+)\\s*=\\s*\\(?.*\\)?\\s*=>/, 'method' ] // arrow functions\r\n        ];\r\n\r\n        // Add regexes to detect methods, variables ( including \"id : nativeType\" )\r\n        {\r\n            if ( nativeTypes )\r\n            {\r\n                topLevelRegexes.push( [ new RegExp( `^(?:${nativeTypes.join( '|' )})\\\\s+([A-Za-z0-9_]+)\\s*[\\(]+` ), 'method' ] );\r\n\r\n                if ( this.highlight === 'WGSL' )\r\n                {\r\n                    topLevelRegexes.push( [ new RegExp( `[A-Za-z0-9]+(\\\\s*)+:(\\\\s*)+(${nativeTypes.join( '|' )})` ), 'variable', ( m: string[] ) =>\r\n                        m[0].split( ':' )[0].trim() ] );\r\n                }\r\n            }\r\n\r\n            const declarationKeywords = CodeEditor.declarationKeywords[this.highlight] ?? [ 'const', 'let', 'var' ];\r\n            topLevelRegexes.push( [ new RegExp( `^(?:${declarationKeywords.join( '|' )})\\\\s+([A-Za-z0-9_]+)` ), 'variable' ] );\r\n        }\r\n\r\n        for ( let [ regex, kind, fn ] of topLevelRegexes )\r\n        {\r\n            const m = text.match( regex );\r\n            if ( m )\r\n            {\r\n                _pushSymbol( { name: fn ? fn( m ) : m[1], kind, scope: scopeName, line: lineNumber } );\r\n            }\r\n        }\r\n\r\n        const usageRegexes: any = [\r\n            [ /new\\s+([A-Za-z0-9_]+)\\s*\\(/, 'constructor-call' ],\r\n            [ /this.([A-Za-z_][A-Za-z0-9_]*)\\s*\\=/, 'class-property' ]\r\n        ];\r\n\r\n        for ( let [ regex, kind, fn ] of usageRegexes )\r\n        {\r\n            const m = text.match( regex );\r\n            if ( m )\r\n            {\r\n                _pushSymbol( { name: fn ? fn( m ) : m[1], kind, scope: scopeName, line: lineNumber } );\r\n            }\r\n        }\r\n\r\n        // Detect method calls\r\n        const regex = /([A-Za-z0-9_]+)\\s*\\(/g;\r\n        let match;\r\n        while ( match = regex.exec( text ) )\r\n        {\r\n            const name = match[1];\r\n            const before = text.slice( 0, match.index );\r\n            if ( /(new|function|fn|def)\\s+$/.test( before ) ) continue; // skip constructor calls\r\n            if ( [ 'constructor', 'location', ...( nativeTypes ?? [] ) ].indexOf( name ) > -1 ) continue; // skip hardcoded non method symbol\r\n            if ( previousLineScope && previousLineScope.at( -1 )?.type === 'class' ) continue; // skip class methods\r\n            _pushSymbol( { name, kind: 'method-call', scope: scopeName, line: lineNumber } );\r\n        }\r\n\r\n        // Stop after matches for top-level declarations and usage symbols\r\n        if ( symbols.length )\r\n        {\r\n            return symbols;\r\n        }\r\n\r\n        const nonWhiteSpaceTokens = tokens.filter( ( t ) => t.trim().length );\r\n\r\n        for ( let i = 0; i < nonWhiteSpaceTokens.length; i++ )\r\n        {\r\n            const prev = nonWhiteSpaceTokens[i - 1];\r\n            const token = nonWhiteSpaceTokens[i];\r\n            const next = nonWhiteSpaceTokens[i + 1];\r\n\r\n            if ( scopeType.startsWith( 'class' ) )\r\n            {\r\n                if ( next === '(' && /^[a-zA-Z_]\\w*$/.test( token ) && prev === undefined )\r\n                {\r\n                    if ( token === 'constructor' ) continue; // skip constructor symbol\r\n                    _pushSymbol( { name: token, kind: 'method', scope: scopeName, line: lineNumber } );\r\n                }\r\n            }\r\n            else if ( scopeType.startsWith( 'enum' ) )\r\n            {\r\n                if ( !isSymbol( token ) && !this._isNumber( token )\r\n                    && !this._mustHightlightWord( token, CodeEditor.statements ) )\r\n                {\r\n                    _pushSymbol( { name: token, kind: 'enum_value', scope: scopeName, line: lineNumber } );\r\n                }\r\n            }\r\n        }\r\n\r\n        return symbols;\r\n    }\r\n\r\n    /**\r\n     * Updates the symbol table for a single line\r\n     * - Removes old symbols from that line\r\n     * - Inserts the new symbols\r\n     */\r\n    _updateLineSymbols( lineNumber: number, newSymbols: any[] )\r\n    {\r\n        this.code.lineSymbols[lineNumber] = this.code.lineSymbols[lineNumber] ?? [];\r\n        const oldSymbols = LX.deepCopy( this.code.lineSymbols[lineNumber] );\r\n\r\n        // Clean old symbols from current line\r\n        for ( let sym of this.code.lineSymbols[lineNumber] )\r\n        {\r\n            let array = this.code.symbolsTable.get( sym.name );\r\n            if ( !array )\r\n            {\r\n                continue;\r\n            }\r\n\r\n            array = array.filter( ( s: any ) => s.line !== lineNumber );\r\n\r\n            if ( array.length )\r\n            {\r\n                this.code.symbolsTable.set( sym.name, array );\r\n            }\r\n            else\r\n            {\r\n                this.code.symbolsTable.delete( sym.name );\r\n            }\r\n        }\r\n\r\n        // Add new symbols to table\r\n        for ( let sym of newSymbols )\r\n        {\r\n            let arr = this.code.symbolsTable.get( sym.name ) ?? [];\r\n            arr.push( sym );\r\n            this.code.symbolsTable.set( sym.name, arr );\r\n        }\r\n\r\n        // Keep lineSymbols in sync\r\n        this.code.lineSymbols[lineNumber] = newSymbols;\r\n\r\n        return oldSymbols;\r\n    }\r\n\r\n    _lineHasComment( lineString: string )\r\n    {\r\n        const lang = CodeEditor.languages[this.highlight];\r\n\r\n        if ( !( lang.singleLineComments ?? true ) )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const singleLineCommentToken = lang.singleLineCommentToken ?? this.defaultSingleLineCommentToken;\r\n        const idx = lineString.indexOf( singleLineCommentToken );\r\n\r\n        if ( idx > -1 )\r\n        {\r\n            const stringKeys = Object.values( this.stringKeys );\r\n            // Count times we started a string BEFORE the comment\r\n            var err = false;\r\n            err = err || ( stringKeys.some( function( v )\r\n            {\r\n                var re = new RegExp( v, 'g' );\r\n                var matches = lineString.substring( 0, idx ).match( re ) || [];\r\n                return ( matches.length % 2 ) !== 0;\r\n            } ) );\r\n            return err ? undefined : idx;\r\n        }\r\n    }\r\n\r\n    _getTokensFromLine( lineString: string, skipNonWords: boolean = false )\r\n    {\r\n        if ( !lineString || !lineString.length )\r\n        {\r\n            return [];\r\n        }\r\n\r\n        // Check if line comment\r\n        const ogLine = lineString;\r\n        const hasCommentIdx = this._lineHasComment( lineString );\r\n\r\n        if ( hasCommentIdx != undefined )\r\n        {\r\n            lineString = ogLine.substring( 0, hasCommentIdx );\r\n        }\r\n\r\n        let tokensToEvaluate: string[] = []; // store in a temp array so we know prev and next tokens...\r\n        let charCounterList: number[] = [];\r\n        let charCounter = 0;\r\n\r\n        const pushToken = function( t: string )\r\n        {\r\n            if ( ( skipNonWords && ( t.includes( '\"' ) || t.length < 3 ) ) )\r\n            {\r\n                return;\r\n            }\r\n            tokensToEvaluate.push( t );\r\n            charCounterList.push( charCounter );\r\n            // Update positions\r\n            charCounter += t.length;\r\n        };\r\n\r\n        let iter = lineString.matchAll( /(<!--|-->|\\*\\/|\\/\\*|::|[\\[\\](){}<>.,;:*\"'`%@$!/= ])/g );\r\n        let subtokens = iter.next();\r\n        if ( subtokens.value )\r\n        {\r\n            let idx = 0;\r\n            while ( subtokens.value != undefined )\r\n            {\r\n                const _pt = lineString.substring( idx, subtokens.value.index );\r\n                if ( _pt.length ) pushToken( _pt );\r\n                pushToken( subtokens.value[0] );\r\n                idx = subtokens.value.index + subtokens.value[0].length;\r\n                subtokens = iter.next();\r\n                if ( !subtokens.value )\r\n                {\r\n                    const _at = lineString.substring( idx );\r\n                    if ( _at.length ) pushToken( _at );\r\n                }\r\n            }\r\n        }\r\n        else pushToken( lineString );\r\n\r\n        if ( hasCommentIdx != undefined )\r\n        {\r\n            pushToken( ogLine.substring( hasCommentIdx ) );\r\n        }\r\n\r\n        this._currentTokenPositions = charCounterList;\r\n\r\n        return this._processTokens( tokensToEvaluate );\r\n    }\r\n\r\n    _processTokens( tokens: string[], offset: number = 0 ): string[]\r\n    {\r\n        if ( this.highlight == 'C++' || this.highlight == 'CSS' )\r\n        {\r\n            var idx = tokens.slice( offset ).findIndex( ( value, index ) => this._isNumber( value ) );\r\n            if ( idx > -1 )\r\n            {\r\n                idx += offset; // Add offset to compute within the whole array of tokens\r\n                let data = tokens[idx] + tokens[++idx];\r\n                while ( this._isNumber( data ) )\r\n                {\r\n                    tokens[idx - 1] += tokens[idx];\r\n                    tokens.splice( idx, 1 );\r\n                    data += tokens[idx];\r\n                }\r\n                // Scan for numbers again\r\n                return this._processTokens( tokens, idx );\r\n            }\r\n\r\n            const importantIdx = tokens.indexOf( 'important' );\r\n            if ( this.highlight == 'CSS' && importantIdx > -1 && tokens[importantIdx - 1] === '!' )\r\n            {\r\n                tokens[importantIdx - 1] = '!important';\r\n                tokens.splice( importantIdx, 1 );\r\n            }\r\n        }\r\n        else if ( this.highlight == 'PHP' )\r\n        {\r\n            let offset = 0;\r\n            let dollarIdx = tokens.indexOf( '$' );\r\n\r\n            while ( dollarIdx > -1 )\r\n            {\r\n                const offsetIdx = dollarIdx + offset;\r\n\r\n                if ( tokens[offsetIdx + 1] === 'this-' )\r\n                {\r\n                    tokens[offsetIdx] = '$this';\r\n                    tokens[offsetIdx + 1] = '-';\r\n                }\r\n                else\r\n                {\r\n                    tokens[offsetIdx] += tokens[offsetIdx + 1] ?? '';\r\n                    tokens.splice( offsetIdx + 1, 1 );\r\n                }\r\n\r\n                dollarIdx = tokens.slice( offsetIdx ).indexOf( '$' );\r\n                offset = offsetIdx;\r\n            }\r\n        }\r\n        else if ( this.highlight == 'WGSL' )\r\n        {\r\n            let offset = 0;\r\n            let atIdx = tokens.indexOf( '@' );\r\n\r\n            while ( atIdx > -1 )\r\n            {\r\n                const offsetIdx = atIdx + offset;\r\n\r\n                tokens[offsetIdx] += tokens[offsetIdx + 1] ?? '';\r\n                tokens.splice( offsetIdx + 1, 1 );\r\n\r\n                atIdx = tokens.slice( offsetIdx ).indexOf( '$' );\r\n                offset = offsetIdx;\r\n            }\r\n        }\r\n\r\n        return tokens;\r\n    }\r\n\r\n    _mustHightlightWord( token: string, wordCategory: any, lang?: any ): boolean\r\n    {\r\n        if ( !lang )\r\n        {\r\n            lang = CodeEditor.languages[this.highlight];\r\n        }\r\n\r\n        let t = token;\r\n\r\n        if ( lang.ignoreCase )\r\n        {\r\n            t = t.toLowerCase();\r\n        }\r\n\r\n        return wordCategory[this.highlight] && wordCategory[this.highlight].has( t );\r\n    }\r\n\r\n    _getTokenHighlighting( ctx: any, highlight: string )\r\n    {\r\n        const rules = [ ...HighlightRules.common, ...( HighlightRules[highlight] || [] ), ...HighlightRules.post_common ];\r\n\r\n        for ( const rule of rules )\r\n        {\r\n            if ( !rule.test( ctx, this ) )\r\n            {\r\n                continue;\r\n            }\r\n\r\n            const r = rule.action ? rule.action( ctx, this ) : undefined;\r\n            if ( rule.discard ) ctx.discardToken = r;\r\n            return rule.className;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    _evaluateToken( ctxData: any )\r\n    {\r\n        let { token, prev, next, tokenIndex, isFirstToken, isLastToken } = ctxData;\r\n\r\n        const lang = CodeEditor.languages[this.highlight];\r\n        const highlight = this.highlight.replace( /\\s/g, '' ).replaceAll( '+', 'p' ).toLowerCase();\r\n        const customStringKeys = Object.assign( {}, this.stringKeys );\r\n        const lineNumber = this._currentLineNumber;\r\n        const tokenStartIndex = this._currentTokenPositions[tokenIndex];\r\n        const inBlockComment = ( this._buildingBlockComment ?? this._inBlockCommentSection( lineNumber!, tokenStartIndex, token.length ) )\r\n            !== undefined;\r\n\r\n        var usePreviousTokenToCheckString = false;\r\n\r\n        if ( [ 'cpp', 'c' ].indexOf( highlight ) > -1 && prev && prev.includes( '#' ) )\r\n        { // preprocessor code..\r\n            customStringKeys['@<'] = '>';\r\n        }\r\n        else if ( highlight == 'markdown' && ( ctxData.prevWithSpaces == '[' || ctxData.nextWithSpaces == ']' ) )\r\n        {\r\n            // console.warn(prev, token, next)\r\n            usePreviousTokenToCheckString = true;\r\n            customStringKeys['@['] = ']';\r\n        }\r\n        else if ( highlight == 'javascript' || highlight == 'typescript' )\r\n        {\r\n            customStringKeys['@`'] = '`';\r\n        }\r\n\r\n        // Manage strings\r\n        this._stringEnded = false;\r\n\r\n        if ( usePreviousTokenToCheckString\r\n            || ( !inBlockComment\r\n                && ( lang.tags ?? false ? ( this._enclosedByTokens( token, tokenIndex, '<', '>' ) ) : true ) ) )\r\n        {\r\n            const _checkIfStringEnded = ( t: string ) => {\r\n                if ( this._stringInterpolation )\r\n                {\r\n                    if ( token == '$' && next == '{' )\r\n                    {\r\n                        delete this._stringInterpolation;\r\n                        this._stringInterpolationOpened = true;\r\n                        this._stringEnded = true;\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                const idx = Object.values( customStringKeys ).indexOf( t );\r\n                this._stringEnded = ( idx > -1 )\r\n                    && ( idx\r\n                        == Object.values( customStringKeys ).indexOf( customStringKeys['@' + this._buildingString] ) );\r\n            };\r\n\r\n            if ( this._buildingString != undefined )\r\n            {\r\n                _checkIfStringEnded( usePreviousTokenToCheckString ? ctxData.nextWithSpaces : token );\r\n            }\r\n            else if ( customStringKeys['@' + ( usePreviousTokenToCheckString ? ctxData.prevWithSpaces : token )] )\r\n            {\r\n                // Start new string\r\n                this._buildingString = usePreviousTokenToCheckString ? ctxData.prevWithSpaces : token;\r\n\r\n                if ( ( highlight == 'javascript' || highlight == 'typescript' ) && token == '`' )\r\n                {\r\n                    this._stringInterpolation = true;\r\n                }\r\n\r\n                // Check if string ended in same token using next...\r\n                if ( usePreviousTokenToCheckString )\r\n                {\r\n                    _checkIfStringEnded( ctxData.nextWithSpaces );\r\n                }\r\n            }\r\n            else if ( this._stringInterpolationOpened && prev == '}' )\r\n            {\r\n                delete this._stringInterpolationOpened;\r\n                this._stringInterpolation = true;\r\n                this._buildingString = '`';\r\n            }\r\n        }\r\n\r\n        // Update context data for next tests\r\n        ctxData.discardToken = false;\r\n        ctxData.inBlockComment = inBlockComment;\r\n        ctxData.markdownHeader = this._markdownHeader;\r\n        ctxData.inString = this._buildingString !== undefined;\r\n        ctxData.singleLineCommentToken = lang.singleLineCommentToken ?? this.defaultSingleLineCommentToken;\r\n        ctxData.lang = lang;\r\n        ctxData.scope = this._scopeStack.at( -1 );\r\n\r\n        // Add utils functions for the rules\r\n        ctxData.isVariableSymbol = ( token: string ) =>\r\n            this.code.symbolsTable.has( token ) && this.code.symbolsTable.get( token )[0].kind === 'variable';\r\n        ctxData.isEnumValueSymbol = ( token: string ) =>\r\n            this.code.symbolsTable.has( token ) && this.code.symbolsTable.get( token )[0].kind === 'enum_value';\r\n        ctxData.isClassSymbol = ( token: string ) => this.code.symbolsTable.has( token ) && this.code.symbolsTable.get( token )[0].kind === 'class';\r\n        ctxData.isStructSymbol = ( token: string ) => this.code.symbolsTable.has( token ) && this.code.symbolsTable.get( token )[0].kind === 'struct';\r\n        ctxData.isEnumSymbol = ( token: string ) => this.code.symbolsTable.has( token ) && this.code.symbolsTable.get( token )[0].kind === 'enum';\r\n\r\n        // Get highlighting class based on language common and specific rules\r\n        let tokenClass = this._getTokenHighlighting( ctxData, highlight );\r\n\r\n        if ( this._stringInterpolationOpened && this._pendingString )\r\n        {\r\n            this._pendingString = this._pendingString.substring( 0, this._pendingString.indexOf( '$' ) );\r\n\r\n            if ( ctxData.tokens[tokenIndex + 1] == '{' )\r\n            {\r\n                ctxData.tokens[tokenIndex + 1] = '${';\r\n            }\r\n        }\r\n\r\n        // We finished constructing a string\r\n        if ( this._buildingString && ( this._stringEnded || isLastToken ) && !inBlockComment )\r\n        {\r\n            token = this._getCurrentString();\r\n            tokenClass = 'cm-str';\r\n            ctxData.discardToken = false;\r\n        }\r\n\r\n        // Update state\r\n        this._buildingString = this._stringEnded ? undefined : this._buildingString;\r\n\r\n        if ( ctxData.discardToken )\r\n        {\r\n            return '';\r\n        }\r\n\r\n        // Replace html chars\r\n        token = token.replace( '<', '&lt;' ).replace( '>', '&gt;' );\r\n\r\n        // No highlighting, no need to put it inside another span..\r\n        if ( !tokenClass )\r\n        {\r\n            return token;\r\n        }\r\n\r\n        return `<span class=\"${highlight} ${tokenClass}\">${token}</span>`;\r\n    }\r\n\r\n    _appendStringToken( token: string ): boolean\r\n    {\r\n        if ( !this._pendingString )\r\n        {\r\n            this._pendingString = '';\r\n        }\r\n\r\n        this._pendingString += token;\r\n\r\n        return true;\r\n    }\r\n\r\n    _getCurrentString()\r\n    {\r\n        const chars = this._pendingString;\r\n        delete this._pendingString;\r\n        return chars;\r\n    }\r\n\r\n    _enclosedByTokens( token: string, tokenIndex: number, tagStart: string, tagEnd: string ): number[] | undefined\r\n    {\r\n        const tokenStartIndex = this._currentTokenPositions[tokenIndex];\r\n        const tagStartIndex = indexOfFrom( this._currentLineString!, tagStart, tokenStartIndex, true );\r\n        if ( tagStartIndex < 0 )\r\n        { // Not found..\r\n            return;\r\n        }\r\n        const tagStartIndexOpposite = indexOfFrom( this._currentLineString!, tagEnd, tokenStartIndex, true );\r\n        if ( tagStartIndexOpposite >= 0 && tagStartIndexOpposite > tagStartIndex )\r\n        { // Found the opposite first while reversing..\r\n            return;\r\n        }\r\n        const tagEndIndex = indexOfFrom( this._currentLineString!, tagEnd, tokenStartIndex );\r\n        if ( tagEndIndex < 0 )\r\n        { // Not found..\r\n            return;\r\n        }\r\n\r\n        if ( ( tagStartIndex < tokenStartIndex ) && ( tagEndIndex >= ( tokenStartIndex + token.length ) )\r\n            && !this._mustHightlightWord( token, CodeEditor.symbols ) )\r\n        {\r\n            return [ tagStartIndex, tagEndIndex ];\r\n        }\r\n    }\r\n\r\n    _inBlockCommentSection( lineNumber: number, tokenPosition: number = -1, tokenLength: number = -1 )\r\n    {\r\n        const lang = CodeEditor.languages[this.highlight];\r\n        const blockCommentsTokens = lang.blockCommentsTokens ?? this.defaultBlockCommentTokens;\r\n\r\n        for ( let section of this._blockCommentCache )\r\n        {\r\n            const lineRange = section[0];\r\n            const posRange = section[1];\r\n\r\n            // Outside the lines range\r\n            const meetsLineRange = lineNumber >= lineRange.x && lineNumber <= lineRange.y;\r\n            if ( !meetsLineRange )\r\n            {\r\n                continue;\r\n            }\r\n\r\n            if ( ( lineNumber != lineRange.x && lineNumber != lineRange.y ) // Inside the block, not first nor last line\r\n                || ( lineNumber == lineRange.x && tokenPosition >= posRange.x\r\n                    && ( ( lineNumber == lineRange.y\r\n                        && ( tokenPosition + tokenLength ) <= ( posRange.y + blockCommentsTokens[1].length ) )\r\n                        || lineNumber !== lineRange.y ) )\r\n                || ( lineNumber == lineRange.y\r\n                        && ( ( tokenPosition + tokenLength ) <= ( posRange.y + blockCommentsTokens[1].length ) ) )\r\n                    && ( ( lineNumber == lineRange.x && tokenPosition >= posRange.x ) || lineNumber !== lineRange.x ) )\r\n            {\r\n                return section;\r\n            }\r\n        }\r\n    }\r\n\r\n    _isKeyword( ctxData: any ): boolean\r\n    {\r\n        const { token, tokenIndex, tokens, lang } = ctxData;\r\n\r\n        let isKwd = this._mustHightlightWord( token, CodeEditor.keywords ) || this.highlight == 'XML';\r\n\r\n        if ( this.highlight == 'CMake' )\r\n        {\r\n            // Highlight $ symbol\r\n            if ( token == '$' && this._enclosedByTokens( tokens[tokenIndex + 2], tokenIndex + 2, '{', '}' ) )\r\n            {\r\n                isKwd = true;\r\n            }\r\n            // Highlight what is between the { }\r\n            else if ( this._enclosedByTokens( token, tokenIndex, '{', '}' ) )\r\n            {\r\n                isKwd = isKwd || ( ctxData.tokens[tokenIndex - 2] == '$' );\r\n            }\r\n        }\r\n        if ( this.highlight == 'Markdown' )\r\n        {\r\n            isKwd = this._markdownHeader !== undefined;\r\n        }\r\n        else if ( lang.tags )\r\n        {\r\n            isKwd = isKwd && ( this._enclosedByTokens( token, tokenIndex, '<', '>' ) != undefined );\r\n        }\r\n\r\n        return isKwd;\r\n    }\r\n\r\n    _isNumber( token: string ): boolean\r\n    {\r\n        const lang = CodeEditor.languages[this.highlight];\r\n        if ( !( lang.numbers ?? true ) )\r\n        {\r\n            return false;\r\n        }\r\n\r\n        const subToken = token.substring( 0, token.length - 1 );\r\n\r\n        if ( this.highlight == 'C++' )\r\n        {\r\n            if ( LX.lastChar( token ) == 'f' )\r\n            {\r\n                return this._isNumber( subToken );\r\n            }\r\n            else if ( LX.lastChar( token ) == 'u' )\r\n            {\r\n                return !( token.includes( '.' ) ) && this._isNumber( subToken );\r\n            }\r\n        }\r\n        else if ( this.highlight == 'WGSL' )\r\n        {\r\n            if ( LX.lastChar( token ) == 'u' )\r\n            {\r\n                return !( token.includes( '.' ) ) && this._isNumber( subToken );\r\n            }\r\n        }\r\n        else if ( this.highlight == 'CSS' )\r\n        {\r\n            if ( LX.lastChar( token ) == '%' )\r\n            {\r\n                return this._isNumber( subToken );\r\n            }\r\n        }\r\n\r\n        return ( token.length > 0 ) && token != ' ' && !Number.isNaN( +token );\r\n    }\r\n\r\n    _encloseSelectedWordWithKey( key: string, lidx: number, cursor: Cursor ): boolean\r\n    {\r\n        if ( !cursor.selection || ( cursor.selection.fromY != cursor.selection.toY ) )\r\n        {\r\n            return false;\r\n        }\r\n\r\n        cursor.selection.invertIfNecessary();\r\n\r\n        // Insert first..\r\n        this.code.lines[lidx] = [\r\n            this.code.lines[lidx].slice( 0, cursor.selection.fromX ),\r\n            key,\r\n            this.code.lines[lidx].slice( cursor.selection.fromX )\r\n        ].join( '' );\r\n\r\n        // Go to the end of the word\r\n        this.cursorToPosition( cursor, cursor.selection.toX + 1 );\r\n\r\n        // Change next key?\r\n        switch ( key )\r\n        {\r\n            case \"'\":\r\n            case '\"':\r\n                break;\r\n            case '(':\r\n                key = ')';\r\n                break;\r\n            case '{':\r\n                key = '}';\r\n                break;\r\n        }\r\n\r\n        // Insert the other\r\n        this.code.lines[lidx] = [\r\n            this.code.lines[lidx].slice( 0, cursor.position ),\r\n            key,\r\n            this.code.lines[lidx].slice( cursor.position )\r\n        ].join( '' );\r\n\r\n        // Recompute and reposition current selection\r\n\r\n        cursor.selection.fromX++;\r\n        cursor.selection.toX++;\r\n\r\n        this._processSelection( cursor );\r\n        this.processLine( lidx );\r\n\r\n        // Stop propagation\r\n        return true;\r\n    }\r\n\r\n    _detectLanguage( text: string ): string | undefined\r\n    {\r\n        const tokenSet = new Set( this._getTokensFromLine( text, true ) );\r\n        const scores: any = {};\r\n\r\n        // Check strong indicators first\r\n        const strongIndicators = {\r\n            'JavaScript': [ 'import ', 'export default', 'console.', '=>', 'document.', 'window.' ],\r\n            'TypeScript': [ 'import ', 'export default', 'console.', '=>', 'document.', 'window.' ],\r\n            'C++': [ '#include', '::', 'std::', 'template <', 'using namespace' ],\r\n            'Python': [ 'def ', 'import ', 'print(', 'self', 'None', 'True', 'False' ],\r\n            'HTML': [ '<html', '<div', '<body', '<script', '<style' ],\r\n            'CSS': [ '@media' ],\r\n            'Markdown': [ '#', '##', '###', '](', '![', '**' ]\r\n        };\r\n\r\n        for ( const [ lang, indicators ] of Object.entries( strongIndicators ) )\r\n        {\r\n            scores[lang] = scores[lang] ?? 0;\r\n            for ( const key of indicators )\r\n            {\r\n                if ( text.includes( key ) ) scores[lang] += 20;\r\n            }\r\n        }\r\n\r\n        // Check groups' words now with less importance score\r\n        const groups = [\r\n            CodeEditor.keywords,\r\n            CodeEditor.statements,\r\n            CodeEditor.utils,\r\n            CodeEditor.types,\r\n            CodeEditor.builtIn\r\n        ];\r\n\r\n        for ( const group of groups )\r\n        {\r\n            for ( let [ lang, wordList ] of Object.entries( group ) )\r\n            {\r\n                scores[lang] = scores[lang] ?? 0;\r\n                for ( let kw of ( wordList as any ) )\r\n                {\r\n                    if ( tokenSet.has( kw ) ) scores[lang]++;\r\n                }\r\n            }\r\n        }\r\n\r\n        const sorted = ( Object.entries( scores ) as any ).sort( ( a: any[], b: any[] ) => b[1] - a[1] );\r\n        return sorted[0][1] > 0 ? sorted[0][0] : undefined;\r\n    }\r\n\r\n    lineUp( cursor: Cursor, resetLeft: boolean = false )\r\n    {\r\n        if ( this.code.lines[cursor.line - 1] == undefined )\r\n        {\r\n            return false;\r\n        }\r\n\r\n        cursor.line--;\r\n        cursor.line = Math.max( 0, cursor.line );\r\n        this.cursorToTop( cursor, resetLeft );\r\n\r\n        return true;\r\n    }\r\n\r\n    lineDown( cursor: Cursor, resetLeft: boolean = false )\r\n    {\r\n        if ( this.code.lines[cursor.line + 1] == undefined )\r\n        {\r\n            return false;\r\n        }\r\n\r\n        cursor.line++;\r\n\r\n        this.cursorToBottom( cursor, resetLeft );\r\n\r\n        return true;\r\n    }\r\n\r\n    swapLines( lidx: number, offset: number, cursor: Cursor )\r\n    {\r\n        if ( this.code.lines[lidx + offset] == undefined )\r\n        {\r\n            return;\r\n        }\r\n\r\n        this._addUndoStep( cursor, true );\r\n\r\n        swapArrayElements( this.code.lines, lidx + offset, lidx );\r\n\r\n        // Process both lines\r\n        this.processLine( lidx + offset );\r\n        this.processLine( lidx );\r\n\r\n        if ( offset > 0 )\r\n        {\r\n            this.lineDown( cursor );\r\n        }\r\n        else\r\n        {\r\n            this.lineUp( cursor );\r\n        }\r\n\r\n        this.hideAutoCompleteBox();\r\n    }\r\n\r\n    restartBlink()\r\n    {\r\n        if ( !this.code ) return;\r\n\r\n        clearInterval( this.blinker );\r\n        LX.addClass( this.cursorsDOM, 'show' );\r\n\r\n        if ( this.cursorBlinkRate > 0 )\r\n        {\r\n            this.blinker = setInterval( () => {\r\n                LX.toggleClass( this.cursorsDOM, 'show' );\r\n            }, this.cursorBlinkRate );\r\n        }\r\n        else if ( this.cursorBlinkRate < 0 )\r\n        {\r\n            LX.removeClass( this.cursorsDOM, 'show' );\r\n        }\r\n    }\r\n\r\n    startSelection( cursor: Cursor )\r\n    {\r\n        // Show elements\r\n        let selectionContainer = document.createElement( 'div' );\r\n        selectionContainer.className = 'selections';\r\n        selectionContainer.classList.add( 'show' );\r\n\r\n        LX.insertChildAtIndex( this.codeSizer, selectionContainer, 2 );\r\n        this.selections[cursor.name] = selectionContainer;\r\n\r\n        // Create new selection instance\r\n        cursor.selection = new CodeSelection( this, cursor );\r\n    }\r\n\r\n    deleteSelection( cursor: Cursor )\r\n    {\r\n        // I think it's not necessary but...\r\n        if ( this.disableEdition || !cursor.selection )\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Some selections don't depend on mouse up..\r\n        cursor.selection.invertIfNecessary();\r\n\r\n        const selection = cursor.selection;\r\n        const separator = '_NEWLINE_';\r\n        let code = this.code.lines.join( separator );\r\n\r\n        // Get linear start index\r\n        let index = 0;\r\n        for ( let i = 0; i <= selection.fromY; i++ )\r\n        {\r\n            index += i == selection.fromY ? selection.fromX : this.code.lines[i].length;\r\n        }\r\n\r\n        index += selection.fromY * separator.length;\r\n\r\n        const num_chars = selection.chars + ( selection.toY - selection.fromY ) * separator.length;\r\n        const pre = code.slice( 0, index );\r\n        const post = code.slice( index + num_chars );\r\n\r\n        this.code.lines = ( pre + post ).split( separator );\r\n\r\n        this.cursorToLine( cursor, selection.fromY, true );\r\n        this.cursorToPosition( cursor, selection.fromX );\r\n\r\n        this.endSelection( cursor );\r\n        this.processLines();\r\n    }\r\n\r\n    endSelection( cursor?: Cursor )\r\n    {\r\n        delete this._tripleClickSelection;\r\n        delete this._lastSelectionKeyDir;\r\n        delete this._currentOcurrences;\r\n        delete this._lastResult;\r\n\r\n        if ( cursor )\r\n        {\r\n            LX.deleteElement( this.selections[cursor.name] );\r\n            delete this.selections[cursor.name];\r\n            cursor.selection = null;\r\n            cursor.line = cursor.line; // Update current line\r\n        }\r\n        else\r\n        {\r\n            for ( let cursor of this.cursors )\r\n            {\r\n                cursor.line = cursor.line; // Update current line\r\n                LX.deleteElement( this.selections[cursor.name] );\r\n                delete this.selections[cursor.name];\r\n                cursor.selection = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    selectAll()\r\n    {\r\n        this.endSelection();\r\n\r\n        // Use main cursor\r\n        this._removeSecondaryCursors();\r\n\r\n        var cursor = this.getCurrentCursor();\r\n        this.resetCursorPos( CodeEditor.CURSOR_LEFT_TOP, cursor, true );\r\n\r\n        this.startSelection( cursor );\r\n\r\n        const selection = cursor.selection!;\r\n        const nlines = this.code.lines.length - 1;\r\n        selection.toX = this.code.lines[nlines].length;\r\n        selection.toY = nlines;\r\n\r\n        this.cursorToPosition( cursor, selection.toX );\r\n        this.cursorToLine( cursor, selection.toY );\r\n\r\n        this._processSelection( cursor, null, true );\r\n\r\n        this.hideAutoCompleteBox();\r\n    }\r\n\r\n    cursorToRight( text: string, cursor: Cursor )\r\n    {\r\n        if ( !text || !text.length ) return;\r\n\r\n        const chars = text.length;\r\n        const offset = chars * this.charWidth;\r\n\r\n        cursor.left += offset;\r\n        cursor.root.style.left = `calc( ${cursor.left}px + ${this.xPadding} )`;\r\n        cursor.position += chars;\r\n\r\n        this.restartBlink();\r\n\r\n        this.updateScrollLeft( cursor );\r\n    }\r\n\r\n    cursorToLeft( text: string, cursor: Cursor )\r\n    {\r\n        if ( !text || !text.length ) return;\r\n\r\n        const chars = text.length;\r\n        const offset = chars * this.charWidth;\r\n\r\n        cursor.left -= offset;\r\n        cursor.left = Math.max( cursor.left, 0 );\r\n        cursor.root.style.left = `calc( ${cursor.left}px + ${this.xPadding} )`;\r\n        cursor.position -= chars;\r\n        cursor.position = Math.max( cursor.position, 0 );\r\n\r\n        this.restartBlink();\r\n\r\n        // Check if we need to add scroll; if not then we might have to reduce it\r\n        if ( !this.updateScrollLeft( cursor ) )\r\n        {\r\n            const leftMargin = this.charWidth;\r\n            const cursorX = cursor.position * this.charWidth;\r\n            const currentScrollLeft = this.getScrollLeft();\r\n            if ( cursorX < ( currentScrollLeft + leftMargin ) )\r\n            {\r\n                const scroll = Math.max( cursorX - leftMargin, 0 );\r\n                this.setScrollLeft( scroll );\r\n            }\r\n        }\r\n    }\r\n\r\n    cursorToTop( cursor: Cursor, resetLeft = false )\r\n    {\r\n        cursor.top -= this.lineHeight;\r\n        cursor.top = Math.max( cursor.top, 0 );\r\n        cursor.root.style.top = `calc(${cursor.top}px)`;\r\n        this.restartBlink();\r\n\r\n        if ( resetLeft )\r\n        {\r\n            this.resetCursorPos( CodeEditor.CURSOR_LEFT, cursor, true );\r\n        }\r\n\r\n        const currentScrollTop = this.getScrollTop();\r\n        var firstLine = ( currentScrollTop / this.lineHeight ) | 0;\r\n        if ( ( cursor.line - 1 ) < firstLine )\r\n        {\r\n            this.setScrollTop( currentScrollTop - this.lineHeight );\r\n        }\r\n    }\r\n\r\n    cursorToBottom( cursor: Cursor, resetLeft = false )\r\n    {\r\n        cursor.top += this.lineHeight;\r\n        cursor.root.style.top = `calc(${cursor.top}px)`;\r\n\r\n        this.restartBlink();\r\n\r\n        if ( resetLeft )\r\n        {\r\n            this.resetCursorPos( CodeEditor.CURSOR_LEFT, cursor, true );\r\n        }\r\n\r\n        const currentScrollTop = this.getScrollTop();\r\n        const scrollerHeight = this.codeScroller.offsetHeight - this._fullVerticalOffset;\r\n        const lastLine = ( ( scrollerHeight + currentScrollTop ) / this.lineHeight ) | 0;\r\n        if ( cursor.line >= lastLine )\r\n        {\r\n            this.setScrollTop( currentScrollTop + this.lineHeight );\r\n        }\r\n    }\r\n\r\n    cursorToString( cursor: Cursor, text: string, reverse: boolean = false )\r\n    {\r\n        if ( !text.length )\r\n        {\r\n            return;\r\n        }\r\n\r\n        if ( reverse )\r\n        {\r\n            this.cursorToLeft( text, cursor );\r\n        }\r\n        else\r\n        {\r\n            this.cursorToRight( text, cursor );\r\n        }\r\n    }\r\n\r\n    cursorToPosition( cursor: Cursor, position: number, updateScroll = false )\r\n    {\r\n        cursor.position = position;\r\n        cursor.left = position * this.charWidth;\r\n        cursor.root.style.left = `calc( ${cursor.left}px + ${this.xPadding} )`;\r\n\r\n        if ( updateScroll )\r\n        {\r\n            this.updateScrollLeft( cursor );\r\n        }\r\n    }\r\n\r\n    cursorToLine( cursor: Cursor, line: number, resetLeft: boolean = false )\r\n    {\r\n        cursor.line = line;\r\n        cursor.top = this.lineHeight * line;\r\n        cursor.root.style.top = cursor.top + 'px';\r\n        if ( resetLeft ) this.resetCursorPos( CodeEditor.CURSOR_LEFT, cursor );\r\n    }\r\n\r\n    saveCursor( cursor: Cursor, state: any = {} )\r\n    {\r\n        state.position = cursor.position;\r\n        state.line = cursor.line;\r\n        state.selection = cursor.selection ? cursor.selection.save() : undefined;\r\n        return state;\r\n    }\r\n\r\n    saveCursors()\r\n    {\r\n        var cursors = [];\r\n\r\n        for ( let cursor of this.cursors )\r\n        {\r\n            cursors.push( this.saveCursor( cursor ) );\r\n        }\r\n\r\n        return cursors;\r\n    }\r\n\r\n    getCurrentCursor( removeOthers: boolean = false ): Cursor\r\n    {\r\n        if ( removeOthers )\r\n        {\r\n            this._removeSecondaryCursors();\r\n        }\r\n\r\n        return this.cursors[0];\r\n    }\r\n\r\n    relocateCursors()\r\n    {\r\n        for ( let cursor of this.cursors )\r\n        {\r\n            cursor.set( cursor.position, cursor.line, false );\r\n        }\r\n    }\r\n\r\n    mergeCursors( line: number )\r\n    {\r\n        console.assert( line >= 0 );\r\n        const cursorsInLine = this.cursors.filter( ( v: any ) => v.line == line );\r\n\r\n        while ( cursorsInLine.length > 1 )\r\n        {\r\n            this.removeCursor( cursorsInLine.pop() );\r\n        }\r\n    }\r\n\r\n    restoreCursor( cursor: Cursor, state: any )\r\n    {\r\n        cursor.set( state.position, state.line );\r\n\r\n        if ( state.selection )\r\n        {\r\n            this.endSelection();\r\n\r\n            this.startSelection( cursor );\r\n\r\n            cursor.selection?.load( state.selection );\r\n\r\n            this._processSelection( cursor, null, true );\r\n        }\r\n    }\r\n\r\n    removeCursor( cursor: Cursor | undefined )\r\n    {\r\n        if ( !cursor )\r\n        {\r\n            return;\r\n        }\r\n\r\n        LX.deleteElement( this.selections[cursor.name] );\r\n        delete this.selections[cursor.name];\r\n        cursor.destroy();\r\n    }\r\n\r\n    resetCursorPos( flag: number, cursor?: Cursor, resetScroll = false )\r\n    {\r\n        cursor = cursor ?? this.getCurrentCursor();\r\n\r\n        if ( flag & CodeEditor.CURSOR_LEFT )\r\n        {\r\n            cursor.left = 0;\r\n            cursor.root.style.left = 'calc(' + this.xPadding + ')';\r\n            cursor.position = 0;\r\n\r\n            if ( resetScroll )\r\n            {\r\n                this.setScrollLeft( 0 );\r\n            }\r\n        }\r\n\r\n        if ( flag & CodeEditor.CURSOR_TOP )\r\n        {\r\n            cursor.top = 0;\r\n            cursor.root.style.top = '0px';\r\n            cursor.line = 0;\r\n\r\n            if ( resetScroll )\r\n            {\r\n                this.setScrollTop( 0 );\r\n            }\r\n        }\r\n    }\r\n\r\n    _addCursor( line: number = 0, position: number = 0, force: boolean = false, isMain: boolean = false )\r\n    {\r\n        // If cursor in that position exists, remove it instead..\r\n        const exists: any = this.cursors.find( ( v: any ) => v.position == position && v.line == line );\r\n        if ( exists && !force )\r\n        {\r\n            if ( !exists.isMain )\r\n            {\r\n                exists.remove();\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        let cursor: Cursor = new Cursor(\r\n            'cursor' + this.cursors.length,\r\n            position,\r\n            line,\r\n            isMain,\r\n            this\r\n        );\r\n\r\n        this.cursors.push( cursor );\r\n        this.cursorsDOM.appendChild( cursor.root );\r\n\r\n        return cursor;\r\n    }\r\n\r\n    _removeSecondaryCursors()\r\n    {\r\n        while ( this.cursors.length > 1 )\r\n        {\r\n            const r = this.cursors.pop();\r\n            r?.root.remove();\r\n        }\r\n    }\r\n\r\n    _getLastCursor()\r\n    {\r\n        return this.cursors.at( -1 );\r\n    }\r\n\r\n    _isLastCursor( cursor: Cursor )\r\n    {\r\n        return cursor === this._getLastCursor();\r\n    }\r\n\r\n    _logCursors()\r\n    {\r\n        for ( let cursor of this.cursors )\r\n        {\r\n            cursor.print();\r\n        }\r\n    }\r\n\r\n    _addSpaceTabs( cursor: Cursor, n: number )\r\n    {\r\n        for ( var i = 0; i < n; ++i )\r\n        {\r\n            this.actions['Tab'].callback( cursor.line, cursor, null );\r\n        }\r\n    }\r\n\r\n    _addSpaces( cursor: Cursor, n: number )\r\n    {\r\n        if ( cursor.selection && !cursor.selection.sameLine() )\r\n        {\r\n            cursor.selection.invertIfNecessary();\r\n\r\n            for ( let lidx = cursor.selection.fromY; lidx <= cursor.selection.toY; ++lidx )\r\n            {\r\n                const lineString: string = this.code.lines[lidx];\r\n                if ( !lineString.length )\r\n                {\r\n                    continue;\r\n                }\r\n\r\n                // Remove indentation\r\n                let lineStart = firstNonspaceIndex( lineString );\r\n\r\n                // Only tabs/spaces in the line...\r\n                if ( lineStart == -1 )\r\n                {\r\n                    lineStart = lineString.length;\r\n                }\r\n\r\n                let indentSpaces = lineStart % this.tabSpaces;\r\n                indentSpaces = indentSpaces == 0 ? this.tabSpaces : this.tabSpaces - indentSpaces;\r\n\r\n                const spacesString = ' '.repeat( indentSpaces );\r\n\r\n                this.code.lines[lidx] = [\r\n                    lineString.slice( 0, lineStart ),\r\n                    spacesString,\r\n                    lineString.slice( lineStart )\r\n                ].join( '' );\r\n\r\n                this.processLine( lidx );\r\n\r\n                if ( cursor.line === lidx )\r\n                {\r\n                    this.cursorToString( cursor, spacesString );\r\n                }\r\n\r\n                if ( cursor.selection.fromY === lidx )\r\n                {\r\n                    cursor.selection.fromX = Math.max( cursor.selection.fromX + indentSpaces, 0 );\r\n                }\r\n                if ( cursor.selection.toY === lidx )\r\n                {\r\n                    cursor.selection.toX = Math.max( cursor.selection.toX + indentSpaces, 0 );\r\n                }\r\n\r\n                this._processSelection( cursor, undefined, true );\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        for ( var i = 0; i < n; ++i )\r\n        {\r\n            this.root.dispatchEvent( new CustomEvent( 'keydown', { 'detail': {\r\n                skipUndo: true,\r\n                key: ' ',\r\n                targetCursor: this._lastProcessedCursorIndex\r\n            } } ) );\r\n        }\r\n    }\r\n\r\n    _removeSpaces( cursor: Cursor )\r\n    {\r\n        if ( cursor.selection )\r\n        {\r\n            cursor.selection.invertIfNecessary();\r\n        }\r\n\r\n        const lCount = cursor.selection ? 1 + ( cursor.selection.toY - cursor.selection.fromY ) : 1;\r\n\r\n        for ( let i = 0; i < lCount; ++i )\r\n        {\r\n            const lidx = ( cursor.selection ? cursor.selection.fromY : cursor.line ) + i;\r\n            const lineString: string = this.code.lines[lidx];\r\n\r\n            // Remove indentation\r\n            let lineStart = firstNonspaceIndex( lineString );\r\n\r\n            // Nothing to remove... we are at the start of the line\r\n            if ( lineStart == 0 )\r\n            {\r\n                continue;\r\n            }\r\n\r\n            // Only tabs/spaces in the line...\r\n            if ( lineStart == -1 )\r\n            {\r\n                lineStart = lineString.length;\r\n            }\r\n\r\n            let indentSpaces = lineStart % this.tabSpaces;\r\n            indentSpaces = indentSpaces == 0 ? this.tabSpaces : indentSpaces;\r\n            const newStart = Math.max( lineStart - indentSpaces, 0 );\r\n\r\n            this.code.lines[lidx] = [\r\n                lineString.slice( 0, newStart ),\r\n                lineString.slice( lineStart )\r\n            ].join( '' );\r\n\r\n            this.processLine( lidx );\r\n\r\n            if ( cursor.line === lidx )\r\n            {\r\n                this.cursorToString( cursor, ' '.repeat( indentSpaces ), true );\r\n            }\r\n\r\n            if ( cursor.selection )\r\n            {\r\n                if ( cursor.selection.fromY === lidx )\r\n                {\r\n                    cursor.selection.fromX = Math.max( cursor.selection.fromX - indentSpaces, 0 );\r\n                }\r\n                if ( cursor.selection.toY === lidx )\r\n                {\r\n                    cursor.selection.toX = Math.max( cursor.selection.toX - indentSpaces, 0 );\r\n                }\r\n\r\n                this._processSelection( cursor, undefined, true );\r\n            }\r\n        }\r\n    }\r\n\r\n    updateScrollLeft( cursor: Cursor )\r\n    {\r\n        cursor = cursor ?? this.getCurrentCursor();\r\n\r\n        const rightMargin = this.charWidth;\r\n        const cursorX = cursor.position * this.charWidth;\r\n        const currentScrollLeft = this.getScrollLeft();\r\n        const viewportSizeX = this.codeScroller.clientWidth - CodeEditor.LINE_GUTTER_WIDTH; // Gutter offset\r\n        const viewportX = viewportSizeX + currentScrollLeft;\r\n\r\n        if ( cursorX >= ( viewportX - rightMargin ) )\r\n        {\r\n            const scroll = Math.max( cursorX - ( viewportSizeX - rightMargin ), 0 );\r\n            this.setScrollLeft( scroll );\r\n            return true;\r\n        }\r\n    }\r\n\r\n    getScrollLeft()\r\n    {\r\n        if ( !this.codeScroller ) return 0;\r\n        return this.codeScroller.scrollLeft;\r\n    }\r\n\r\n    getScrollTop()\r\n    {\r\n        if ( !this.codeScroller ) return 0;\r\n        return this.codeScroller.scrollTop;\r\n    }\r\n\r\n    setScrollLeft( value: number )\r\n    {\r\n        if ( !this.codeScroller ) return;\r\n        LX.doAsync( () => {\r\n            this.codeScroller.scrollLeft = value;\r\n            this.setScrollBarValue( 'horizontal', 0 );\r\n        }, 10 );\r\n    }\r\n\r\n    setScrollTop( value: number )\r\n    {\r\n        if ( !this.codeScroller ) return;\r\n        LX.doAsync( () => {\r\n            this.codeScroller.scrollTop = value;\r\n            this.setScrollBarValue( 'vertical' );\r\n        }, 10 );\r\n    }\r\n\r\n    resize( flag: number = CodeEditor.RESIZE_SCROLLBAR_H_V, pMaxLength?: number, onResize?: any )\r\n    {\r\n        setTimeout( () => {\r\n            let scrollWidth, scrollHeight;\r\n\r\n            if ( flag & CodeEditor.RESIZE_SCROLLBAR_H )\r\n            {\r\n                // Update max viewport\r\n                const maxLineLength = pMaxLength ?? this.getMaxLineLength();\r\n                this._lastMaxLineLength = maxLineLength;\r\n                scrollWidth = maxLineLength * this.charWidth + CodeEditor.LINE_GUTTER_WIDTH;\r\n                this.codeSizer.style.minWidth = scrollWidth + 'px';\r\n            }\r\n\r\n            if ( flag & CodeEditor.RESIZE_SCROLLBAR_V )\r\n            {\r\n                scrollHeight = this.code.lines.length * this.lineHeight;\r\n                this.codeSizer.style.minHeight = scrollHeight + 'px';\r\n            }\r\n\r\n            this.resizeScrollBars( flag );\r\n\r\n            if ( onResize )\r\n            {\r\n                onResize( scrollWidth, scrollHeight );\r\n            }\r\n        }, 10 );\r\n    }\r\n\r\n    resizeIfNecessary( cursor: Cursor, force: boolean = false )\r\n    {\r\n        const maxLineLength = this.getMaxLineLength();\r\n        const numViewportChars = Math.floor(\r\n            ( this.codeScroller.clientWidth - CodeEditor.LINE_GUTTER_WIDTH ) / this.charWidth\r\n        );\r\n        if ( force || ( maxLineLength >= numViewportChars && maxLineLength != this._lastMaxLineLength ) )\r\n        {\r\n            this.resize( CodeEditor.RESIZE_SCROLLBAR_H, maxLineLength, () => {\r\n                if ( cursor.position > numViewportChars )\r\n                {\r\n                    this.setScrollLeft( cursor.position * this.charWidth );\r\n                }\r\n            } );\r\n        }\r\n    }\r\n\r\n    resizeScrollBars( flag = CodeEditor.RESIZE_SCROLLBAR_H_V )\r\n    {\r\n        if ( flag & CodeEditor.RESIZE_SCROLLBAR_V )\r\n        {\r\n            const totalLinesInViewport = ( ( this.codeScroller.offsetHeight ) / this.lineHeight ) | 0;\r\n            const needsVerticalScrollbar = this.code.lines.length >= totalLinesInViewport;\r\n            if ( needsVerticalScrollbar )\r\n            {\r\n                this.vScrollbar.thumb.size = totalLinesInViewport / this.code.lines.length;\r\n                this.vScrollbar.thumb.style.height = ( this.vScrollbar.thumb.size * 100.0 ) + '%';\r\n            }\r\n\r\n            this.vScrollbar.root.classList.toggle( 'hidden', !needsVerticalScrollbar );\r\n            this.hScrollbar.root.style.width = `calc(100% - ${48 + ( needsVerticalScrollbar ? ScrollBar.SCROLLBAR_VERTICAL_WIDTH : 0 )}px)`; // 48 is the line gutter\r\n            this.codeArea.root.style.width = `calc(100% - ${needsVerticalScrollbar ? ScrollBar.SCROLLBAR_VERTICAL_WIDTH : 0}px)`;\r\n        }\r\n\r\n        if ( flag & CodeEditor.RESIZE_SCROLLBAR_H )\r\n        {\r\n            const numViewportChars = Math.floor(\r\n                ( this.codeScroller.clientWidth - CodeEditor.LINE_GUTTER_WIDTH ) / this.charWidth\r\n            );\r\n            const maxLineLength = this._lastMaxLineLength!;\r\n            const needsHorizontalScrollbar = maxLineLength >= numViewportChars;\r\n\r\n            if ( needsHorizontalScrollbar )\r\n            {\r\n                this.hScrollbar.thumb.size = numViewportChars / maxLineLength;\r\n                this.hScrollbar.thumb.style.width = ( this.hScrollbar.thumb.size * 100.0 ) + '%';\r\n            }\r\n\r\n            this.hScrollbar.root.classList.toggle( 'hidden', !needsHorizontalScrollbar );\r\n            this.codeArea.root.style.height = `calc(100% - ${\r\n                this._fullVerticalOffset + ( needsHorizontalScrollbar ? ScrollBar.SCROLLBAR_HORIZONTAL_HEIGHT : 0 )\r\n            }px)`;\r\n        }\r\n    }\r\n\r\n    setScrollBarValue( type: string = 'vertical', value?: number )\r\n    {\r\n        if ( type == 'vertical' )\r\n        {\r\n            const scrollHeight = this.codeScroller.scrollHeight - this.codeScroller.clientHeight;\r\n\r\n            if ( scrollHeight > 0 )\r\n            {\r\n                const scrollBarHeight = this.vScrollbar.thumb.parentElement.offsetHeight;\r\n                const scrollThumbHeight = this.vScrollbar.thumb.offsetHeight;\r\n                const currentScroll = this.codeScroller.scrollTop;\r\n                this.vScrollbar.thumb._top = ( currentScroll / scrollHeight ) * ( scrollBarHeight - scrollThumbHeight );\r\n                this.vScrollbar.thumb.style.top = this.vScrollbar.thumb._top + 'px';\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if ( value !== undefined )\r\n            {\r\n                this.codeScroller.scrollLeft += value;\r\n            }\r\n\r\n            // Only when scroll is needed\r\n            const scrollWidth = this.codeScroller.scrollWidth - this.codeScroller.clientWidth;\r\n            if ( scrollWidth > 0 )\r\n            {\r\n                const scrollBarWidth = this.hScrollbar.thumb.parentElement.offsetWidth;\r\n                const scrollThumbWidth = this.hScrollbar.thumb.offsetWidth;\r\n                const currentScroll = this.codeScroller.scrollLeft;\r\n                this.hScrollbar.thumb._left = ( currentScroll / scrollWidth ) * ( scrollBarWidth - scrollThumbWidth );\r\n                this.hScrollbar.thumb.style.left = this.hScrollbar.thumb._left + 'px';\r\n            }\r\n        }\r\n    }\r\n\r\n    updateHorizontalScrollFromScrollBar( value: number )\r\n    {\r\n        value = this.hScrollbar.thumb._left - value;\r\n\r\n        // Move scrollbar thumb\r\n\r\n        const scrollBarWidth = this.hScrollbar.thumb.parentElement.offsetWidth;\r\n        const scrollThumbWidth = this.hScrollbar.thumb.offsetWidth;\r\n\r\n        this.hScrollbar.thumb._left = LX.clamp( value, 0, scrollBarWidth - scrollThumbWidth );\r\n        this.hScrollbar.thumb.style.left = this.hScrollbar.thumb._left + 'px';\r\n\r\n        // Scroll code\r\n\r\n        const scrollWidth = this.codeScroller.scrollWidth - this.codeScroller.clientWidth;\r\n        const currentScroll = ( this.hScrollbar.thumb._left * scrollWidth ) / ( scrollBarWidth - scrollThumbWidth );\r\n        this.codeScroller.scrollLeft = currentScroll;\r\n\r\n        this._discardScroll = true;\r\n    }\r\n\r\n    updateVerticalScrollFromScrollBar( value: number ): void\r\n    {\r\n        value = this.vScrollbar.thumb._top - value;\r\n\r\n        // Move scrollbar thumb\r\n\r\n        const scrollBarHeight = this.vScrollbar.thumb.parentElement.offsetHeight;\r\n        const scrollThumbHeight = this.vScrollbar.thumb.offsetHeight;\r\n\r\n        this.vScrollbar.thumb._top = LX.clamp( value, 0, scrollBarHeight - scrollThumbHeight );\r\n        this.vScrollbar.thumb.style.top = this.vScrollbar.thumb._top + 'px';\r\n\r\n        // Scroll code\r\n\r\n        const scrollHeight = this.codeScroller.scrollHeight - this.codeScroller.clientHeight;\r\n        const currentScroll = ( this.vScrollbar.thumb._top * scrollHeight ) / ( scrollBarHeight - scrollThumbHeight );\r\n        this.codeScroller.scrollTop = currentScroll;\r\n    }\r\n\r\n    getCharAtPos( cursor: Cursor, offset: number = 0 )\r\n    {\r\n        return this.code.lines[cursor.line][cursor.position + offset];\r\n    }\r\n\r\n    getWordAtPos( cursor: Cursor, offset: number = 0 )\r\n    {\r\n        const col = cursor.line;\r\n        const words = this.code.lines[col];\r\n\r\n        const isChar = ( char: string ) => {\r\n            const exceptions = [ '_', '#', '!' ];\r\n            const code = char.charCodeAt( 0 );\r\n            return ( exceptions.indexOf( char ) > -1 ) || ( code > 47 && code < 58 ) || ( code > 64 && code < 91 )\r\n                || ( code > 96 && code < 123 );\r\n        };\r\n\r\n        let from = cursor.position + offset;\r\n        let to = cursor.position + offset;\r\n\r\n        // Check left ...\r\n\r\n        while ( words[from] && isChar( words[from] ) )\r\n        {\r\n            from--;\r\n        }\r\n\r\n        from++;\r\n\r\n        // Check right ...\r\n\r\n        while ( words[to] && isChar( words[to] ) )\r\n        {\r\n            to++;\r\n        }\r\n\r\n        // Skip spaces ...\r\n\r\n        let word = words.substring( from, to );\r\n        if ( word == ' ' )\r\n        {\r\n            if ( offset < 0 )\r\n            {\r\n                while ( words[from - 1] != undefined && words[from - 1] == ' ' )\r\n                {\r\n                    from--;\r\n                }\r\n                to++;\r\n                word = words.substring( from, to + 1 );\r\n            }\r\n            else\r\n            {\r\n                while ( words[to] != undefined && words[to] == ' ' )\r\n                {\r\n                    to++;\r\n                }\r\n                from--;\r\n                word = words.substring( from, to );\r\n            }\r\n        }\r\n\r\n        return [ word, from, to ];\r\n    }\r\n\r\n    _measureChar( char: string = 'M', useFloating: boolean = true, getBB: boolean = false )\r\n    {\r\n        const parentContainer = LX.makeContainer( null, 'lexcodeeditor', '', document.body );\r\n        const container = LX.makeContainer( null, 'code', '', parentContainer );\r\n        const line = document.createElement( 'pre' );\r\n        container.appendChild( line );\r\n        const text = document.createElement( 'span' );\r\n        line.appendChild( text );\r\n        text.innerText = char;\r\n        var rect = text.getBoundingClientRect();\r\n        LX.deleteElement( parentContainer );\r\n        const bb = [ useFloating ? rect.width : Math.floor( rect.width ), useFloating ? rect.height : Math.floor( rect.height ) ];\r\n        return getBB ? bb : bb[0];\r\n    }\r\n\r\n    measureString( str: string )\r\n    {\r\n        return str.length * this.charWidth;\r\n    }\r\n\r\n    runScript( code: string )\r\n    {\r\n        const script = document.createElement( 'script' );\r\n        script.type = 'module';\r\n        script.innerHTML = code;\r\n        // script.src = url[ i ] + ( version ? \"?version=\" + version : \"\" );\r\n        script.async = false;\r\n        // script.onload = function(e) { };\r\n        document.getElementsByTagName( 'head' )[0].appendChild( script );\r\n    }\r\n\r\n    toJSONFormat( text: string )\r\n    {\r\n        let params = text.split( ':' );\r\n\r\n        for ( let i = 0; i < params.length; i++ )\r\n        {\r\n            let key: any = params[i].split( ',' );\r\n            if ( key.length > 1 )\r\n            {\r\n                if ( key[key.length - 1].includes( ']' ) )\r\n                {\r\n                    continue;\r\n                }\r\n                key = key[key.length - 1];\r\n            }\r\n            else if ( key[0].includes( '}' ) )\r\n            {\r\n                continue;\r\n            }\r\n            else\r\n            {\r\n                key = key[0];\r\n            }\r\n            key = key.replaceAll( /[{}\\n\\r]/g, '' ).replaceAll( ' ', '' );\r\n            if ( key[0] != '\"' && key[key.length - 1] != '\"' )\r\n            {\r\n                params[i] = params[i].replace( key, '\"' + key + '\"' );\r\n            }\r\n        }\r\n\r\n        text = params.join( ':' );\r\n\r\n        try\r\n        {\r\n            let json = JSON.parse( text );\r\n            return JSON.stringify( json, undefined, 4 );\r\n        }\r\n        catch ( e )\r\n        {\r\n            alert( 'Invalid JSON format' );\r\n            return;\r\n        }\r\n    }\r\n\r\n    showAutoCompleteBox( key: string, cursor: Cursor )\r\n    {\r\n        if ( !cursor.isMain )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const [ word, start, end ] = this.getWordAtPos( cursor, -1 );\r\n        if ( key == ' ' || !word.length )\r\n        {\r\n            this.hideAutoCompleteBox();\r\n            return;\r\n        }\r\n\r\n        this.autocomplete.innerHTML = ''; // Clear all suggestions\r\n\r\n        // Add language special keys...\r\n        let suggestions = [\r\n            ...Array.from( CodeEditor.keywords[this.highlight] ?? [] ),\r\n            ...Array.from( CodeEditor.builtIn[this.highlight] ?? [] ),\r\n            ...Array.from( CodeEditor.statements[this.highlight] ?? [] ),\r\n            ...Array.from( CodeEditor.types[this.highlight] ?? [] ),\r\n            ...Array.from( CodeEditor.utils[this.highlight] ?? [] )\r\n        ];\r\n\r\n        const scopeStack = [ ...this.code.lineScopes[cursor.line] ];\r\n        const scope = scopeStack.at( -1 );\r\n        if ( scope.type.startsWith( 'enum' ) )\r\n        {\r\n            const enumValues = Array.from( this.code.symbolsTable ).filter( ( s: any ) =>\r\n                s[1][0].kind === 'enum_value' && s[1][0].scope === scope.name\r\n            ).map( ( s: any ) => s[0] );\r\n            suggestions = suggestions.concat( enumValues.slice( 0, -1 ) );\r\n        }\r\n        else\r\n        {\r\n            const otherValues = Array.from( this.code.symbolsTable ).map( ( s: any ) => s[0] );\r\n            suggestions = suggestions.concat( otherValues.slice( 0, -1 ) );\r\n        }\r\n\r\n        // Add custom suggestions...\r\n        suggestions = suggestions.concat( this.customSuggestions );\r\n\r\n        // Remove 1/2 char words and duplicates...\r\n        suggestions = ( Array.from( new Set( suggestions ) ) as string[] ).filter( ( s: string ) =>\r\n            s.length > 2 && s.toLowerCase().includes( word.toLowerCase() )\r\n        );\r\n\r\n        // Order...\r\n\r\n        function scoreSuggestion( s: string, prefix: string )\r\n        {\r\n            if ( s.startsWith( prefix ) ) return 0; // best option\r\n            if ( s.includes( prefix ) ) return 1;\r\n            return 2; // worst\r\n        }\r\n\r\n        suggestions = ( suggestions as string[] ).sort( ( a, b ) =>\r\n            ( scoreSuggestion( a, word ) - scoreSuggestion( b, word ) ) || a.localeCompare( b )\r\n        );\r\n\r\n        for ( let s of suggestions )\r\n        {\r\n            const currSuggestion = s as string;\r\n            const pre = document.createElement( 'pre' );\r\n            this.autocomplete.appendChild( pre );\r\n\r\n            const symbol = this.code.symbolsTable.get( s );\r\n\r\n            let iconName = 'CaseLower';\r\n            let iconClass = 'foo';\r\n\r\n            if ( symbol )\r\n            {\r\n                switch ( symbol[0].kind )\r\n                // Get first occurrence\r\n                {\r\n                    case 'variable':\r\n                        iconName = 'Cuboid';\r\n                        iconClass = 'text-blue-400';\r\n                        break;\r\n                    case 'method':\r\n                        iconName = 'Box';\r\n                        iconClass = 'text-fuchsia-500';\r\n                        break;\r\n                    case 'class':\r\n                        iconName = 'CircleNodes';\r\n                        iconClass = 'text-orange-500';\r\n                        break;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if ( this._mustHightlightWord( currSuggestion, CodeEditor.utils ) )\r\n                {\r\n                    iconName = 'ToolCase';\r\n                }\r\n                else if ( this._mustHightlightWord( currSuggestion, CodeEditor.types ) )\r\n                {\r\n                    iconName = 'Type';\r\n                    iconClass = 'text-blue-400';\r\n                }\r\n            }\r\n\r\n            pre.appendChild( LX.makeIcon( iconName, { iconClass: 'mr-1', svgClass: 'sm ' + iconClass } ) );\r\n            pre.addEventListener( 'click', () => {\r\n                this.autoCompleteWord( currSuggestion );\r\n            } );\r\n\r\n            // Highlight the written part\r\n            const index = currSuggestion.toLowerCase().indexOf( word.toLowerCase() );\r\n\r\n            var preWord = document.createElement( 'span' );\r\n            preWord.innerHTML = currSuggestion.substring( 0, index );\r\n            pre.appendChild( preWord );\r\n\r\n            var actualWord = document.createElement( 'span' );\r\n            actualWord.innerHTML = currSuggestion.substr( index, word.length );\r\n            actualWord.classList.add( 'word-highlight' );\r\n            pre.appendChild( actualWord );\r\n\r\n            var postWord = document.createElement( 'span' );\r\n            postWord.innerHTML = currSuggestion.substring( index + word.length );\r\n            pre.appendChild( postWord );\r\n        }\r\n\r\n        if ( !this.autocomplete.childElementCount )\r\n        {\r\n            this.hideAutoCompleteBox();\r\n            return;\r\n        }\r\n\r\n        const maxX = this.codeScroller.clientWidth - 256; // Viewport - box width\r\n\r\n        // Select always first option\r\n        ( this.autocomplete.firstChild as any ).classList.add( 'selected' );\r\n\r\n        // Show box\r\n        this.autocomplete.classList.toggle( 'show', true );\r\n        this.autocomplete.classList.toggle( 'no-scrollbar', !( this.autocomplete.scrollHeight > this.autocomplete.offsetHeight ) );\r\n        this.autocomplete.style.left = `${Math.min( cursor.left + CodeEditor.LINE_GUTTER_WIDTH - this.getScrollLeft(), maxX )}px`;\r\n        this.autocomplete.style.top = `${( cursor.top + this._verticalTopOffset + this.lineHeight - this.getScrollTop() )}px`;\r\n\r\n        this.isAutoCompleteActive = true;\r\n    }\r\n\r\n    hideAutoCompleteBox()\r\n    {\r\n        if ( !this.autocomplete )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const isActive = this.isAutoCompleteActive;\r\n        this.isAutoCompleteActive = false;\r\n        this.autocomplete.classList.remove( 'show' );\r\n        this.autocomplete.innerHTML = ''; // Clear all suggestions\r\n\r\n        return isActive != this.isAutoCompleteActive;\r\n    }\r\n\r\n    autoCompleteWord( suggestion?: string )\r\n    {\r\n        if ( !this.isAutoCompleteActive )\r\n        {\r\n            return;\r\n        }\r\n\r\n        let [ suggestedWord, idx ] = this._getSelectedAutoComplete();\r\n        suggestedWord = suggestion ?? suggestedWord;\r\n\r\n        for ( let cursor of this.cursors )\r\n        {\r\n            const [ word, start, end ] = this.getWordAtPos( cursor, -1 );\r\n\r\n            const lineString = this.code.lines[cursor.line];\r\n            this.code.lines[cursor.line] = lineString.slice( 0, start ) + suggestedWord + lineString.slice( end );\r\n\r\n            // Process lines and remove suggestion box\r\n            this.cursorToPosition( cursor, start + suggestedWord.length );\r\n            this.processLine( cursor.line );\r\n        }\r\n\r\n        // Only the main cursor autocompletes, skip the \"Tab\" event for the rest\r\n        this._skipTabs = this.cursors.length - 1;\r\n\r\n        this.hideAutoCompleteBox();\r\n    }\r\n\r\n    _getSelectedAutoComplete(): any[]\r\n    {\r\n        for ( let i = 0; i < this.autocomplete.childElementCount; ++i )\r\n        {\r\n            const child: any = this.autocomplete.childNodes[i];\r\n            if ( child.classList.contains( 'selected' ) )\r\n            {\r\n                var word = '';\r\n                for ( let childSpan of child.childNodes )\r\n                {\r\n                    if ( childSpan.constructor != HTMLSpanElement )\r\n                    {\r\n                        continue;\r\n                    }\r\n                    word += childSpan.innerHTML;\r\n                }\r\n\r\n                return [ word, i ]; // Get text of the span inside the 'pre' element\r\n            }\r\n        }\r\n\r\n        return [ null, -1 ];\r\n    }\r\n\r\n    _moveArrowSelectedAutoComplete( dir: string )\r\n    {\r\n        if ( !this.isAutoCompleteActive )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const [ word, idx ] = this._getSelectedAutoComplete();\r\n        const offset = dir == 'down' ? 1 : -1;\r\n        const fIdx = idx + offset;\r\n\r\n        const autocompleteRowHeight = 22;\r\n        const autocompleteHeight = 132;\r\n\r\n        if ( dir == 'down' )\r\n        {\r\n            if ( fIdx >= this.autocomplete.childElementCount ) return;\r\n\r\n            if ( ( ( idx + offset * 2 ) * autocompleteRowHeight ) - this.autocomplete.scrollTop > autocompleteHeight )\r\n            {\r\n                this.autocomplete.scrollTop += autocompleteRowHeight;\r\n            }\r\n        }\r\n        else if ( dir == 'up' )\r\n        {\r\n            if ( fIdx < 0 ) return;\r\n\r\n            if ( ( fIdx * autocompleteRowHeight ) < this.autocomplete.scrollTop )\r\n            {\r\n                this.autocomplete.scrollTop -= autocompleteRowHeight;\r\n            }\r\n        }\r\n\r\n        // Remove selected from the current word and add it to the next one\r\n        LX.removeClass( this.autocomplete.childNodes[idx], 'selected' );\r\n        LX.addClass( this.autocomplete.childNodes[idx + offset], 'selected' );\r\n    }\r\n\r\n    showSearchBox( clear: boolean = false )\r\n    {\r\n        this.hideSearchLineBox();\r\n\r\n        LX.addClass( this.searchbox, 'opened' );\r\n        this.isSearchboxActive = true;\r\n\r\n        const input: any = this.searchbox.querySelector( 'input' );\r\n\r\n        if ( clear )\r\n        {\r\n            input.value = '';\r\n        }\r\n        else\r\n        {\r\n            const cursor = this.getCurrentCursor();\r\n\r\n            if ( cursor.selection )\r\n            {\r\n                input.value = cursor.selection.getText() ?? input.value;\r\n            }\r\n        }\r\n\r\n        input.selectionStart = 0;\r\n        input.selectionEnd = input.value.length;\r\n\r\n        input.focus();\r\n    }\r\n\r\n    hideSearchBox()\r\n    {\r\n        const active = this.isSearchboxActive;\r\n\r\n        if ( this.isSearchboxActive )\r\n        {\r\n            this.searchbox.classList.remove( 'opened' );\r\n            this.isSearchboxActive = false;\r\n        }\r\n        else if ( this._lastResult )\r\n        {\r\n            LX.deleteElement( this._lastResult.dom );\r\n            delete this._lastResult;\r\n        }\r\n\r\n        this.searchResultSelections.classList.remove( 'show' );\r\n\r\n        return ( active != this.isSearchboxActive );\r\n    }\r\n\r\n    search( text?: string | null, reverse: boolean = false, callback?: any, skipAlert: boolean = false, forceFocus: boolean = true )\r\n    {\r\n        text = text ?? this._lastTextFound;\r\n\r\n        if ( !text )\r\n        {\r\n            return;\r\n        }\r\n\r\n        let cursor = this.getCurrentCursor();\r\n        let cursorData = new LX.vec2( cursor.position, cursor.line );\r\n        let line = null;\r\n        let char = -1;\r\n\r\n        if ( this._lastResult )\r\n        {\r\n            LX.deleteElement( this._lastResult.dom );\r\n            cursorData = this._lastResult.pos;\r\n            cursorData.x += text.length * ( reverse ? -1 : 1 );\r\n            delete this._lastResult;\r\n        }\r\n\r\n        const getIndex = ( l: number ) => {\r\n            var string = this.code.lines[l];\r\n\r\n            if ( reverse )\r\n            {\r\n                string = string.substr( 0, l == cursorData.y ? cursorData.x : string.length );\r\n                var reversed = strReverse( string );\r\n                var reversedIdx = reversed.indexOf( strReverse( text ) );\r\n                return reversedIdx == -1 ? -1 : string.length - reversedIdx - text.length;\r\n            }\r\n            else\r\n            {\r\n                return string.substr( l == cursorData.y ? cursorData.x : 0 ).indexOf( text );\r\n            }\r\n        };\r\n\r\n        if ( reverse )\r\n        {\r\n            for ( var j = cursorData.y; j >= 0; --j )\r\n            {\r\n                char = getIndex( j );\r\n                if ( char > -1 )\r\n                {\r\n                    line = j;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            for ( var j = cursorData.y; j < this.code.lines.length; ++j )\r\n            {\r\n                char = getIndex( j );\r\n                if ( char > -1 )\r\n                {\r\n                    line = j;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if ( line == null )\r\n        {\r\n            if ( !skipAlert )\r\n            {\r\n                alert( 'No results!' );\r\n            }\r\n\r\n            const lastLine = this.code.lines.length - 1;\r\n\r\n            this._lastResult = {\r\n                'dom': this.searchResultSelections.lastChild,\r\n                'pos': reverse ? new LX.vec2( this.code.lines[lastLine].length, lastLine ) : new LX.vec2( 0, 0 )\r\n            };\r\n\r\n            return;\r\n        }\r\n\r\n        /*\r\n            Position idx is computed from last pos, which could be in same line,\r\n            so we search in the substring (first_ocurrence, end). That's why we\r\n            have to add the length of the substring (0, first_ocurrence)\r\n        */\r\n\r\n        if ( !reverse )\r\n        {\r\n            char += line == cursorData.y ? cursorData.x : 0;\r\n        }\r\n\r\n        // Text found..\r\n\r\n        this._lastTextFound = text;\r\n\r\n        this.codeScroller.scrollTo(\r\n            Math.max( char * this.charWidth - this.codeScroller.clientWidth, 0 ),\r\n            Math.max( line - 10, 0 ) * this.lineHeight\r\n        );\r\n\r\n        if ( callback )\r\n        {\r\n            callback( char, line );\r\n        }\r\n        else\r\n        {\r\n            // Show elements\r\n            this.searchResultSelections.classList.add( 'show' );\r\n\r\n            // Create new selection instance\r\n            cursor.selection = new CodeSelection( this, cursor, 'lexcodesearchresult' );\r\n            cursor.selection.selectInline( cursor, char, line, this.measureString( text ), true );\r\n        }\r\n\r\n        this._lastResult = {\r\n            'dom': this.searchResultSelections.lastChild,\r\n            'pos': new LX.vec2( char, line ),\r\n            reverse\r\n        };\r\n\r\n        // Force focus back to search box\r\n        if ( forceFocus )\r\n        {\r\n            const input: any = this.searchbox.querySelector( 'input' );\r\n            input.focus();\r\n        }\r\n    }\r\n\r\n    showSearchLineBox()\r\n    {\r\n        this.hideSearchBox();\r\n\r\n        this.searchlinebox.classList.add( 'opened' );\r\n        this.isSearchlineboxActive = true;\r\n\r\n        const input: any = this.searchlinebox.querySelector( 'input' );\r\n        input.value = ':';\r\n        input.focus();\r\n    }\r\n\r\n    hideSearchLineBox()\r\n    {\r\n        if ( this.isSearchlineboxActive )\r\n        {\r\n            this.searchlinebox.classList.remove( 'opened' );\r\n            this.isSearchlineboxActive = false;\r\n        }\r\n    }\r\n\r\n    goToLine( line: any )\r\n    {\r\n        if ( !this._isNumber( line ) )\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.codeScroller.scrollTo( 0, Math.max( line - 15 ) * this.lineHeight );\r\n\r\n        // Select line ?\r\n        var cursor = this.getCurrentCursor( true );\r\n        this.cursorToLine( cursor, line - 1, true );\r\n    }\r\n\r\n    selectNextOcurrence( cursor: Cursor )\r\n    {\r\n        if ( !cursor.selection )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const text = cursor.selection.getText();\r\n        if ( !text )\r\n        {\r\n            return;\r\n        }\r\n\r\n        if ( !this._currentOcurrences )\r\n        {\r\n            const currentKey = [ cursor.position - text.length, cursor.line ].join( '_' );\r\n            this._currentOcurrences = {};\r\n            this._currentOcurrences[currentKey] = true;\r\n        }\r\n\r\n        this.search( text, false, ( col: number, ln: number ) => {\r\n            const key = [ col, ln ].join( '_' );\r\n\r\n            if ( this._currentOcurrences[key] )\r\n            {\r\n                return;\r\n            }\r\n\r\n            var newCursor = this._addCursor( ln, col, true );\r\n            if ( newCursor )\r\n            {\r\n                this.startSelection( newCursor );\r\n                if ( newCursor.selection )\r\n                {\r\n                    newCursor.selection.selectInline( newCursor, col, ln, this.measureString( text ) );\r\n                    this.cursorToString( newCursor, text );\r\n                }\r\n            }\r\n\r\n            this._currentOcurrences[key] = true;\r\n        }, true, false );\r\n    }\r\n\r\n    _updateDataInfoPanel( signal: string, value: any )\r\n    {\r\n        if ( !this.skipInfo )\r\n        {\r\n            if ( this.cursors.length > 1 )\r\n            {\r\n                value = '';\r\n            }\r\n\r\n            LX.emitSignal( signal, value );\r\n        }\r\n    }\r\n\r\n    _setActiveLine( n?: number )\r\n    {\r\n        n = n ?? this.state.activeLine;\r\n        if ( n === undefined )\r\n        {\r\n            return;\r\n        }\r\n\r\n        const cursor = this.getCurrentCursor();\r\n        this._updateDataInfoPanel( '@cursor-data', `Ln ${n + 1}, Col ${cursor.position + 1}` );\r\n\r\n        const oldLocal = this.toLocalLine( this.state.activeLine );\r\n        let line = this.code.childNodes[oldLocal];\r\n\r\n        if ( !line )\r\n        {\r\n            return;\r\n        }\r\n\r\n        line.classList.remove( 'active-line' );\r\n\r\n        // Set new active\r\n        {\r\n            this.state.activeLine = n;\r\n\r\n            const newLocal = this.toLocalLine( n );\r\n            line = this.code.childNodes[newLocal];\r\n            if ( line ) line.classList.add( 'active-line' );\r\n        }\r\n    }\r\n\r\n    _hideActiveLine()\r\n    {\r\n        this.code.querySelectorAll( '.active-line' ).forEach( ( e: HTMLElement ) => e.classList.remove( 'active-line' ) );\r\n    }\r\n\r\n    _setFontSize( size: number )\r\n    {\r\n        // Change font size\r\n        this.fontSize = size;\r\n        const r: any = document.querySelector( ':root' );\r\n        r.style.setProperty( '--code-editor-font-size', `${this.fontSize}px` );\r\n        this.charWidth = this._measureChar() as number;\r\n\r\n        window.localStorage.setItem( 'lexcodeeditor-font-size', `${this.fontSize}` );\r\n\r\n        // Change row size\r\n        const rowPixels = this.fontSize + 6;\r\n        r.style.setProperty( '--code-editor-row-height', `${rowPixels}px` );\r\n        this.lineHeight = rowPixels;\r\n\r\n        // Relocate cursors\r\n        this.relocateCursors();\r\n\r\n        // Resize the code area\r\n        this.processLines();\r\n\r\n        // Emit event\r\n        LX.emitSignal( '@font-size', this.fontSize );\r\n    }\r\n\r\n    _applyFontSizeOffset( offset = 0 )\r\n    {\r\n        const newFontSize = LX.clamp( this.fontSize + offset, CodeEditor.CODE_MIN_FONT_SIZE, CodeEditor.CODE_MAX_FONT_SIZE );\r\n        this._setFontSize( newFontSize );\r\n    }\r\n\r\n    _increaseFontSize()\r\n    {\r\n        this._applyFontSizeOffset( 1 );\r\n    }\r\n\r\n    _decreaseFontSize()\r\n    {\r\n        this._applyFontSizeOffset( -1 );\r\n    }\r\n\r\n    _clearTmpVariables()\r\n    {\r\n        delete this._currentLineString;\r\n        delete this._currentLineNumber;\r\n        delete this._buildingString;\r\n        delete this._pendingString;\r\n        delete this._buildingBlockComment;\r\n        delete this._markdownHeader;\r\n        delete this._lastResult;\r\n        delete this._scopeStack;\r\n    }\r\n\r\n    async _requestFileAsync( url: string, dataType?: string, nocache: boolean = false )\r\n    {\r\n        return new Promise( ( resolve, reject ) => {\r\n            dataType = dataType ?? 'arraybuffer';\r\n            const mimeType = dataType === 'arraybuffer' ? 'application/octet-stream' : undefined;\r\n            var xhr: any = new XMLHttpRequest();\r\n            xhr.open( 'GET', url, true );\r\n            xhr.responseType = dataType;\r\n            if ( mimeType )\r\n            {\r\n                xhr.overrideMimeType( mimeType );\r\n            }\r\n            if ( nocache )\r\n            {\r\n                xhr.setRequestHeader( 'Cache-Control', 'no-cache' );\r\n            }\r\n            xhr.onload = function()\r\n            {\r\n                var response = this.response;\r\n                if ( this.status != 200 )\r\n                {\r\n                    var err = 'Error ' + this.status;\r\n                    reject( err );\r\n                    return;\r\n                }\r\n                resolve( response );\r\n            };\r\n            xhr.onerror = function( err: any )\r\n            {\r\n                reject( err );\r\n            };\r\n            xhr.send();\r\n            return xhr;\r\n        } );\r\n    }\r\n}\r\n\r\nconst CE = CodeEditor as any;\r\n\r\nCE.languages = {\r\n    'Plain Text': { ext: 'txt', blockComments: false, singleLineComments: false, numbers: false, icon: 'AlignLeft text-neutral-500' },\r\n    'JavaScript': { ext: 'js', icon: 'Js text-yellow-500' },\r\n    'TypeScript': { ext: 'ts', icon: 'Ts text-blue-600' },\r\n    'C': { ext: [ 'c', 'h' ], usePreprocessor: true, icon: { 'c': 'C text-sky-400', 'h': 'C text-fuchsia-500' } },\r\n    'C++': { ext: [ 'cpp', 'hpp' ], usePreprocessor: true, icon: { 'cpp': 'CPlusPlus text-sky-400', 'hpp': 'CPlusPlus text-fuchsia-500' } },\r\n    'CSS': { ext: 'css', icon: 'Hash text-blue-700' },\r\n    'CMake': { ext: 'cmake', singleLineCommentToken: '#', blockComments: false, ignoreCase: true },\r\n    'GLSL': { ext: 'glsl', usePreprocessor: true },\r\n    'WGSL': { ext: 'wgsl', usePreprocessor: true },\r\n    'JSON': { ext: 'json', blockComments: false, singleLineComments: false, icon: 'Json text-yellow-400' },\r\n    'XML': { ext: 'xml', tags: true, icon: 'Rss text-orange-500' },\r\n    'Rust': { ext: 'rs', icon: 'Rust text-foreground' },\r\n    'Python': { ext: 'py', singleLineCommentToken: '#', icon: 'Python text-cyan-600' },\r\n    'HTML': { ext: 'html', tags: true, singleLineComments: false, blockCommentsTokens: [ '<!--', '-->' ], numbers: false,\r\n        icon: 'Code text-orange-500' },\r\n    'Batch': { ext: 'bat', blockComments: false, singleLineCommentToken: '::', ignoreCase: true, icon: 'Windows text-blue-400' },\r\n    'Markdown': { ext: 'md', blockComments: false, singleLineCommentToken: '::', tags: true, numbers: false, icon: 'Markdown text-foreground' },\r\n    'PHP': { ext: 'php', icon: 'Php text-purple-700' }\r\n};\r\n\r\nCE.nativeTypes = {\r\n    'C++': [ 'int', 'float', 'double', 'bool', 'long', 'short', 'char', 'wchar_t', 'void' ],\r\n    'WGSL': [ 'bool', 'u32', 'i32', 'f16', 'f32', 'vec2', 'vec3', 'vec4', 'vec2f', 'vec3f', 'vec4f', 'mat2x2f', 'mat3x3f', 'mat4x4f', 'array',\r\n        'vec2u', 'vec3u', 'vec4u', 'ptr', 'sampler' ]\r\n};\r\n\r\nCE.declarationKeywords = {\r\n    'JavaScript': [ 'var', 'let', 'const', 'this', 'static', 'class' ],\r\n    'C++': [ ...CE.nativeTypes['C++'], 'const', 'auto', 'class', 'struct', 'namespace', 'enum', 'extern' ]\r\n};\r\n\r\nCE.keywords = {\r\n    'JavaScript': [ 'var', 'let', 'const', 'this', 'in', 'of', 'true', 'false', 'new', 'function', 'NaN', 'static', 'class', 'constructor', 'null',\r\n        'typeof', 'debugger', 'abstract', 'arguments', 'extends', 'instanceof', 'Infinity', 'get' ],\r\n    'TypeScript': [ 'var', 'let', 'const', 'this', 'in', 'of', 'true', 'false', 'new', 'function', 'class', 'extends', 'instanceof', 'Infinity',\r\n        'private', 'public', 'protected', 'interface', 'enum', 'type', 'get' ],\r\n    'C': [ 'int', 'float', 'double', 'long', 'short', 'char', 'const', 'void', 'true', 'false', 'auto', 'struct', 'typedef', 'signed', 'volatile',\r\n        'unsigned', 'static', 'extern', 'enum', 'register', 'union' ],\r\n    'C++': [ ...CE.nativeTypes['C++'], 'const', 'static_cast', 'dynamic_cast', 'new', 'delete', 'true', 'false', 'auto', 'class', 'struct', 'typedef',\r\n        'nullptr', 'NULL', 'signed', 'unsigned', 'namespace', 'enum', 'extern', 'union', 'sizeof', 'static', 'private', 'public' ],\r\n    'CMake': [ 'cmake_minimum_required', 'set', 'not', 'if', 'endif', 'exists', 'string', 'strequal', 'add_definitions', 'macro', 'endmacro', 'file',\r\n        'list', 'source_group', 'add_executable', 'target_include_directories', 'set_target_properties', 'set_property', 'add_compile_options',\r\n        'add_link_options', 'include_directories', 'add_library', 'target_link_libraries', 'target_link_options', 'add_subdirectory',\r\n        'add_compile_definitions', 'project', 'cache' ],\r\n    'JSON': [ 'true', 'false' ],\r\n    'GLSL': [ 'true', 'false', 'function', 'int', 'float', 'vec2', 'vec3', 'vec4', 'mat2x2', 'mat3x3', 'mat4x4', 'struct' ],\r\n    'CSS': [ 'body', 'html', 'canvas', 'div', 'input', 'span', '.', 'table', 'tr', 'td', 'th', 'label', 'video', 'img', 'code', 'button', 'select',\r\n        'option', 'svg', 'media', 'all', 'i', 'a', 'li', 'h1', 'h2', 'h3', 'h4', 'h5', 'last-child', 'tbody', 'pre', 'monospace', 'font-face' ],\r\n    'WGSL': [ ...CE.nativeTypes['WGSL'], 'var', 'let', 'true', 'false', 'fn', 'atomic', 'struct', 'sampler_comparison', 'texture_depth_2d',\r\n        'texture_depth_2d_array', 'texture_depth_cube', 'texture_depth_cube_array', 'texture_depth_multisampled_2d', 'texture_external', 'texture_1d',\r\n        'texture_2d', 'texture_2d_array', 'texture_3d', 'texture_cube', 'texture_cube_array', 'texture_storage_1d', 'texture_storage_2d',\r\n        'texture_storage_2d_array', 'texture_storage_3d' ],\r\n    'Rust': [ 'as', 'const', 'crate', 'enum', 'extern', 'false', 'fn', 'impl', 'in', 'let', 'mod', 'move', 'mut', 'pub', 'ref', 'self', 'Self',\r\n        'static', 'struct', 'super', 'trait', 'true', 'type', 'unsafe', 'use', 'where', 'abstract', 'become', 'box', 'final', 'macro', 'override',\r\n        'priv', 'typeof', 'unsized', 'virtual' ],\r\n    'Python': [ 'False', 'def', 'None', 'True', 'in', 'is', 'and', 'lambda', 'nonlocal', 'not', 'or' ],\r\n    'Batch': [ 'set', 'echo', 'off', 'del', 'defined', 'setlocal', 'enabledelayedexpansion', 'driverquery', 'print' ],\r\n    'HTML': [ 'html', 'meta', 'title', 'link', 'script', 'body', 'DOCTYPE', 'head', 'br', 'i', 'a', 'li', 'img', 'tr', 'td', 'h1', 'h2', 'h3', 'h4',\r\n        'h5' ],\r\n    'Markdown': [ 'br', 'i', 'a', 'li', 'img', 'table', 'title', 'tr', 'td', 'h1', 'h2', 'h3', 'h4', 'h5' ],\r\n    'PHP': [ 'const', 'function', 'array', 'new', 'int', 'string', '$this', 'public', 'null', 'private', 'protected', 'implements', 'class', 'use',\r\n        'namespace', 'abstract', 'clone', 'final', 'enum' ]\r\n};\r\n\r\n// These ones don't have hightlight, used as suggestions to autocomplete only...\r\nCE.utils = {\r\n    'JavaScript': [ 'querySelector', 'body', 'addEventListener', 'removeEventListener', 'remove', 'sort', 'keys', 'filter', 'isNaN', 'parseFloat',\r\n        'parseInt', 'EPSILON', 'isFinite', 'bind', 'prototype', 'length', 'assign', 'entries', 'values', 'concat', 'substring', 'substr', 'splice',\r\n        'slice', 'buffer', 'appendChild', 'createElement', 'prompt', 'alert' ],\r\n    'WGSL': [ 'textureSample' ],\r\n    'Python': [ 'abs', 'all', 'any', 'ascii', 'bin', 'bool', 'bytearray', 'bytes', 'callable', 'chr', 'classmethod', 'compile', 'complex', 'delattr',\r\n        'dict', 'dir', 'divmod', 'enumerate', 'eval', 'exec', 'filter', 'float', 'format', 'frozenset', 'getattr', 'globals', 'hasattr', 'hash',\r\n        'help', 'hex', 'id', 'input', 'int', 'isinstance', 'issubclass', 'iter', 'len', 'list', 'locals', 'map', 'max', 'memoryview', 'min', 'next',\r\n        'object', 'oct', 'open', 'ord', 'pow', 'print', 'property', 'range', 'repr', 'reversed', 'round', 'set', 'setattr', 'slice', 'sorted',\r\n        'staticmethod', 'str', 'sum', 'super', 'tuple', 'type', 'vars', 'zip' ],\r\n    'CSS': [ ...Object.keys( document.body.style ).map( LX.toKebabCase ), 'block', 'inline', 'inline-block', 'flex', 'grid', 'none', 'inherit',\r\n        'initial', 'unset', 'revert', 'sticky', 'relative', 'absolute', 'fixed', 'static', 'auto', 'visible', 'hidden', 'scroll', 'clip', 'ellipsis',\r\n        'nowrap', 'wrap', 'break-word', 'solid', 'dashed', 'dotted', 'double', 'groove', 'ridge', 'inset', 'outset', 'left', 'right', 'center', 'top',\r\n        'bottom', 'start', 'end', 'justify', 'stretch', 'space-between', 'space-around', 'space-evenly', 'baseline', 'middle', 'normal', 'bold',\r\n        'lighter', 'bolder', 'italic', 'blur', 'uppercase', 'lowercase', 'capitalize', 'transparent', 'currentColor', 'pointer', 'default', 'move',\r\n        'grab', 'grabbing', 'not-allowed', 'none', 'cover', 'contain', 'repeat', 'no-repeat', 'repeat-x', 'repeat-y', 'round', 'space',\r\n        'linear-gradient', 'radial-gradient', 'conic-gradient', 'url', 'calc', 'min', 'max', 'clamp', 'red', 'blue', 'green', 'black', 'white',\r\n        'gray', 'silver', 'yellow', 'orange', 'purple', 'pink', 'cyan', 'magenta', 'lime', 'teal', 'navy', 'transparent', 'currentcolor', 'inherit',\r\n        'initial', 'unset', 'revert', 'none', 'auto', 'fit-content', 'min-content', 'max-content' ]\r\n};\r\n\r\nCE.types = {\r\n    'JavaScript': [ 'Object', 'String', 'Function', 'Boolean', 'Symbol', 'Error', 'Number', 'TextEncoder', 'TextDecoder', 'Array', 'ArrayBuffer',\r\n        'InputEvent', 'MouseEvent', 'Int8Array', 'Int16Array', 'Int32Array', 'Float32Array', 'Float64Array', 'Element' ],\r\n    'TypeScript': [ 'arguments', 'constructor', 'null', 'typeof', 'debugger', 'abstract', 'Object', 'string', 'String', 'Function', 'Boolean',\r\n        'boolean', 'Error', 'Number', 'number', 'TextEncoder', 'TextDecoder', 'Array', 'ArrayBuffer', 'InputEvent', 'MouseEvent', 'Int8Array',\r\n        'Int16Array', 'Int32Array', 'Float32Array', 'Float64Array', 'Element', 'bigint', 'unknown', 'any', 'Record' ],\r\n    'Rust': [ 'u128' ],\r\n    'Python': [ 'int', 'type', 'float', 'map', 'list', 'ArithmeticError', 'AssertionError', 'AttributeError', 'Exception', 'EOFError',\r\n        'FloatingPointError', 'GeneratorExit', 'ImportError', 'IndentationError', 'IndexError', 'KeyError', 'KeyboardInterrupt', 'LookupError',\r\n        'MemoryError', 'NameError', 'NotImplementedError', 'OSError', 'OverflowError', 'ReferenceError', 'RuntimeError', 'StopIteration',\r\n        'SyntaxError', 'TabError', 'SystemError', 'SystemExit', 'TypeError', 'UnboundLocalError', 'UnicodeError', 'UnicodeEncodeError',\r\n        'UnicodeDecodeError', 'UnicodeTranslateError', 'ValueError', 'ZeroDivisionError' ],\r\n    'C++': [ 'uint8_t', 'uint16_t', 'uint32_t' ],\r\n    'PHP': [ 'Exception', 'DateTime', 'JsonSerializable' ]\r\n};\r\n\r\nCE.builtIn = {\r\n    'JavaScript': [ 'document', 'console', 'window', 'navigator', 'performance' ],\r\n    'CSS': [ '*', '!important' ],\r\n    'C++': [ 'vector', 'list', 'map' ],\r\n    'WGSL': [ '@vertex', '@fragment' ],\r\n    'HTML': [ 'type', 'xmlns', 'PUBLIC', 'http-equiv', 'src', 'style', 'lang', 'href', 'rel', 'content', 'xml', 'alt' ], // attributes\r\n    'Markdown': [ 'type', 'src', 'style', 'lang', 'href', 'rel', 'content', 'valign', 'alt' ], // attributes\r\n    'PHP': [ 'echo', 'print' ]\r\n};\r\n\r\nCE.statements = {\r\n    'JavaScript': [ 'for', 'if', 'else', 'case', 'switch', 'return', 'while', 'continue', 'break', 'do', 'import', 'default', 'export', 'from',\r\n        'throw', 'async', 'try', 'catch', 'await', 'as' ],\r\n    'TypeScript': [ 'for', 'if', 'else', 'case', 'switch', 'return', 'while', 'continue', 'break', 'do', 'import', 'default', 'export', 'from',\r\n        'throw', 'async', 'try', 'catch', 'await', 'as' ],\r\n    'CSS': [ '@', 'import' ],\r\n    'C': [ 'for', 'if', 'else', 'return', 'continue', 'break', 'case', 'switch', 'while', 'using', 'default', 'goto', 'do' ],\r\n    'C++': [ 'std', 'for', 'if', 'else', 'return', 'continue', 'break', 'case', 'switch', 'while', 'using', 'glm', 'spdlog', 'default' ],\r\n    'GLSL': [ 'for', 'if', 'else', 'return', 'continue', 'break' ],\r\n    'WGSL': [ 'const', 'for', 'if', 'else', 'return', 'continue', 'break', 'storage', 'read', 'read_write', 'uniform', 'function', 'workgroup',\r\n        'bitcast' ],\r\n    'Rust': [ 'break', 'else', 'continue', 'for', 'if', 'loop', 'match', 'return', 'while', 'do', 'yield' ],\r\n    'Python': [ 'if', 'raise', 'del', 'import', 'return', 'elif', 'try', 'else', 'while', 'as', 'except', 'with', 'assert', 'finally', 'yield',\r\n        'break', 'for', 'class', 'continue', 'global', 'pass', 'from' ],\r\n    'Batch': [ 'if', 'IF', 'for', 'FOR', 'in', 'IN', 'do', 'DO', 'call', 'CALL', 'goto', 'GOTO', 'exit', 'EXIT' ],\r\n    'PHP': [ 'declare', 'enddeclare', 'foreach', 'endforeach', 'if', 'else', 'elseif', 'endif', 'for', 'endfor', 'while', 'endwhile', 'switch',\r\n        'case', 'default', 'endswitch', 'return', 'break', 'continue', 'try', 'catch', 'die', 'do', 'exit', 'finally' ]\r\n};\r\n\r\nCE.symbols = {\r\n    'JavaScript': [ '<', '>', '[', ']', '{', '}', '(', ')', ';', '=', '|', '||', '&', '&&', '?', '??' ],\r\n    'TypeScript': [ '<', '>', '[', ']', '{', '}', '(', ')', ';', '=', '|', '||', '&', '&&', '?', '??' ],\r\n    'C': [ '<', '>', '[', ']', '{', '}', '(', ')', ';', '=', '|', '||', '&', '&&', '?', '*', '-', '+' ],\r\n    'C++': [ '<', '>', '[', ']', '{', '}', '(', ')', ';', '=', '|', '||', '&', '&&', '?', '::', '*', '-', '+' ],\r\n    'CMake': [ '{', '}' ],\r\n    'JSON': [ '[', ']', '{', '}', '(', ')' ],\r\n    'GLSL': [ '[', ']', '{', '}', '(', ')' ],\r\n    'WGSL': [ '[', ']', '{', '}', '(', ')', '->' ],\r\n    'CSS': [ '{', '}', '(', ')', '*' ],\r\n    'Rust': [ '<', '>', '[', ']', '(', ')', '=' ],\r\n    'Python': [ '<', '>', '[', ']', '(', ')', '=' ],\r\n    'Batch': [ '[', ']', '(', ')', '%' ],\r\n    'HTML': [ '<', '>', '/' ],\r\n    'XML': [ '<', '>', '/' ],\r\n    'PHP': [ '[', ']', '{', '}', '(', ')' ]\r\n};\r\n\r\nCE.REGISTER_LANGUAGE = function( name: string, options: any = {}, def: any, rules?: any[] )\r\n{\r\n    CE.languages[name] = options;\r\n\r\n    if ( def?.keywords ) CE.keywords[name] = new Set( def.keywords );\r\n    if ( def?.utils ) CE.utils[name] = new Set( def.utils );\r\n    if ( def?.types ) CE.types[name] = new Set( def.types );\r\n    if ( def?.builtIn ) CE.builtIn[name] = new Set( def.builtIn );\r\n    if ( def?.statements ) CE.statements[name] = new Set( def.statements );\r\n    if ( def?.symbols ) CE.symbols[name] = new Set( def.symbols );\r\n\r\n    if ( rules ) HighlightRules[name] = rules;\r\n};\r\n\r\nLX.CodeEditor = CodeEditor;\r\n"],"names":[],"mappings":"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"}