<script type="module">
    import { LX } from 'lexgui';

    const content = document.getElementById('content');
    const componentName = "Table";

    docMaker.header(componentName + ".", "h1", componentName.toLowerCase());
    docMaker.paragraph(`Represents a dynamic table with user-input data.`, false, "fg-tertiary");


    {
        window.__addInteractiveCodeExample( content, componentName, panel => {
            window.t = panel.addTable(null, {
                head: ["Name", "Status", "Priority", "HiddenByDefault"],
                body: [
                    ["Alice", "In Progress", "High", 0],
                    ["Bob", "Backlog", "Medium", 1],
                    ["Prince", "Canceled", "Low", 2],
                    ["Sean", "Done", "High", 3],
                    ["Carter", "In Progress", "Medium", 4],
                    ["James", "Backlog", "Low", 5],
                    ["Mickey", "Todo", "Low", 6],
                    ["Charlie", "Canceled", "Low", 7],
                    ["Chris", "Todo", "High", 8],
                    ["Jonas", "Todo", "Low", 9]
                ]
            }, {
                pagination: true,
                rowsPerPage: 5,
                selectable: true,
                showSelectedNumber: true,
                sortable: true,
                toggleColumns: true,
                hiddenColumns: [ "HiddenByDefault" ],
                filter: "Name",
                centered: [ "Name" ],
                customFilters: [
                    { name: "Status", options: ["Backlog", "Todo", "In Progress", "Done", "Canceled"] },
                    { name: "Priority", options: ["Low", "Medium", "High"] },
                ],
                columnActions: [
                    { name: "Delete", icon: "Trash2", className: "fg-error", callback: () => {} },
                ],
                rowActions: [
                    { icon: "Edit", title: "Edit Row" },
                    "delete",
                    "menu"
                ],
                onMenuAction: (index, tableData) => {
                    return [
                        { name: "Export" },
                        { name: "Make a copy" },
                        { name: "Favourite" }
                    ]
                }
            });
        });
    }

    docMaker.header("Usage", "h2");
    docMaker.paragraph( `Call ${docMaker.iCode("Panel.addTable(name, data, options)")} to add a ${ componentName } Component to your panel or
    create it anywhere using ${docMaker.iCode(`new LX.${ componentName.replace( /\s/g, '' ) }`)} to append its root to any container.` );
    docMaker.note( `You can use default row actions as String such as 'delete' or 'menu', which have predefined icons and callbacks.
        For the 'menu' action, you must fill the possible menus inside the created Dropdown using ${docMaker.iCode("options.onMenuAction")}.` );

    docMaker.header("API Reference", "h2");

    {
        const area = new LX.Area( { skipAppend: true, height: "auto", className: "mb-6" } );
        const panel = area.addPanel();
        content.appendChild( area.root );

        panel.addTable( null, {
            head: [ "Parameter", "Type", "Description", "Default" ],
            body: [
                ["name", "String", "Component name", "—"],
                ["data", "Object", "Table data", "—"],
                ["options", "Object", "Basic options for a component", "—"]
            ].map( v => {
                return [ docMaker.iCode( v[ 0 ], "table" ), docMaker.iCode( v[ 1 ], "table desc" ), v[ 2 ], v[ 3 ] != "—" ? docMaker.iCode( v[ 3 ], "table desc" ) : v[ 3 ] ];
            } )
        }, {});
        docMaker.lineBreak( panel.root );
        panel.addTable( null, {
            head: [ "Option", "Type", "Description", "Default" ],
            body: [
                ["body", "Array", "Table body (data per row for each column)", "—"],
                ["centered", "Boolean|Array", `Center text within columns. ${docMaker.iCode("true")} for all, array (name or idx) to center specific`, "—"],
                ["columnActions", "Array", `Allow to add actions per column ${docMaker.iCode("action: { name, icon, callback }")}`, "—"],
                ["customFilters", "Array", "Add selectors to filter by specific option values", "false"],
                ["filter", "String", "Name of the column to filter by text input (if any)", "false"],
                ["filterValue", "String", "Initial filter value", "—"],
                ["head", "Array", "Table headers (each of the headers per column)", "—"],
                ["hiddenColumns", "Array", `If ${docMaker.iCode("toggleColumns")} enabled, array containing Cols (name or idx) hidden by default`, "—"],
                ["onMenuAction", "Function", `Function callback to fill the "menu" context`, "—"],
                ["pagination", "Boolean", `Enables table pagination`, "false"],
                ["rowActions", "Array", `Allow to add actions per row ${docMaker.iCode("action: { icon, callback }")}`, "—"],
                ["rowsPerPage", "Number", `If using pagination, number of table rows per page`, "12"],
                ["selectable", "Boolean", "Each row can be selected", "false"],
                ["showSelectedNumber", "Boolean", `If ${docMaker.iCode("selectable")}, display the current number of selected rows`, "true"],
                ["sortable", "Boolean", "Rows can be sorted by the user manually", "false"],
                ["sortColumns", "Boolean", "Columns can be sorted", "true"],
                ["tableClass", "String", "Extra table dom class names", "—"],
                ["toggleColumns", "Boolean", "Columns visibility can be toggled", "false"],
            ].map( v => {
                return [ docMaker.iCode( v[ 0 ], "table" ), docMaker.iCode( v[ 1 ], "table desc" ), v[ 2 ], v[ 3 ] != "—" ? docMaker.iCode( v[ 3 ], "table desc" ) : v[ 3 ] ];
            } )
        }, {});
    }

    docMaker.note( `The return value in the ${docMaker.iCode("rowActions")} item callbacks are used to refresh (true) or not (false) the table DOM.`, true );

    docMaker.header( "Properties", "h3", "properties" );
    docMaker.codeBulletList( [
        [".centered", "Boolean|Array", "Center row data for all (true) or more columns"],
        [".data", "Object", "Table data including check and column visibility data"],
    ] );

    docMaker.header( "Methods", "h3", "methods" );

    docMaker.classMethod( ".getSelectedRows", `Returns selected table rows`, [], "Array" );
    docMaker.classMethod( ".refresh", `Rebuilds the table DOM based on settings.`, [] );

</script>