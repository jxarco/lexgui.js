<script type="module">
    import { LX } from 'lexgui';

    const content = document.getElementById( 'content' );

    MAKE_HEADER( "Sidebar.", "h1", "sidebar" );
    MAKE_PARAGRAPH( `A composable, themeable and customizable sidebar component.` );
    MAKE_LINE_BREAK();

    {
        const area = new LX.Area( { skipAppend: true, height: "auto" } );
        content.appendChild( area.root );

        const sidebar = area.addSidebar( m => {
            m.group( "Projects", { icon: "Plus" } );
            m.add( "Getting Started", { icon: "Box" /*,collapsable: false*/ } );
            m.add( "Getting Started/Installation", { icon: "Box" } );
            m.add( "Getting Started/Project Structure", { icon: "Box", action: { name: "ShowMenu", icon: null } } );
            m.add( "Building Your Application", { icon: "Code", action: { name: "ShowMenu", icon: null } } );
            m.add( "Search Blocks", { icon: "Search" } );
            m.add( "Very loooooooooooooooooooooooong sun", { icon: "Sun", action: { name: "ShowMenu", icon: null } } );
            m.separator();
            m.group( "API Reference" );
            m.add( "Components", { icon: "Box" } );
            m.add( "File Conventions", { icon: "Code" } );
            m.add( "Functions", { icon: "Search" } );
            m.add( "CLI", { icon: "Sun", } );
            m.separator();
            m.group( "Architecture" );
            m.add( "Accessibility ", { icon: "Box" } );
            m.add( "Fast Refresh", { icon: "Code",  } );
            m.add( "Supported Browsers", { icon: "Search", } );
            m.separator();
            m.add( "Calendar ", { icon: "Calendar", collapsable: 3 } );
            m.add( "Personal ", { type: "checkbox" } );
            m.add( "Work", { type: "checkbox", value: true } );
            m.add( "Family", { type: "checkbox" } );
        }, { /* collapseToIcons: false, skipFooter: true, skipHeader: true,*/
            // side: "right",
            filter: true,
            headerTitle: "LexGUI",
            headerSubtitle: LX.version,
            headerImage: "../images/favicon.png",
            footerTitle: "jxarco",
            footerSubtitle: "alexroco.30@gmail.com",
            footerImage: "https://avatars.githubusercontent.com/u/25059187?s=400&u=ad8907b748c13e4e1a7cdd3882826acb6a2928b5&v=4",
            onHeaderPressed: (e) => { console.log( "onHeaderPressed" ) },
            onFooterPressed: (e, element) => {
                new LX.DropdownMenu( element, [
                    "My Account",
                    null,
                    { name: "Profile", kbd: ["Meta", "P"], icon: "User" },
                    { name: "Billing", disabled: true, icon: "CreditCard" },
                    { name: "Settings", kbd: "S" },
                    null,
                    { name: "Team" },
                    { name: "Invite users", icon: "Search" },
                    null,
                    { name: "Github", icon: "Github" },
                    { name: "Support", submenu: [
                        { name: "Email", icon: "Mail" },
                        { name: "Message", submenu: [
                            { name: "Whatsapp", kbd: "W" },
                            { name: "iMessage", kbd: "M" },
                        ]},
                    ]  }
                ], { side: "right", align: "end" });
            }
        });
        area.root.className += " border rounded-lg shadow-lg bg-secondary overflow-hidden";
    }
    
    MAKE_HEADER("Quick Usage", "h2");

    MAKE_PARAGRAPH( `Build a Sidebar element directly into any Area using ${INLINE_CODE("Area.addSidebar(callback, options)")}. 
    To specify each of the entries, you should pass a <em>callback function</em> to be called when the Sidebar is constructed. Callbacks will have a Sidebar instance as parameter, 
    so use ${INLINE_CODE("Sidebar.add(entryName, options)")} on that instance inside your callback to add each of the entries.` );

    MAKE_PARAGRAPH( `The different options to be set when adding entries to the Sidebar are the following:` );
    MAKE_CODE_BULLET_LIST( [
        ["callback", "Function", "To be called when interacting with the entry"],
        ["className", "String", "Extra classes to customize style"],
        ["collapsable", "Boolean", "Add entry as a collapsable section"],
        ["icon", "String", "Entry icon"],
    ] );

    MAKE_NOTE( `Subentries are collapsed by default. To disable this behaviour, set ${INLINE_CODE("options.collapsable: false")} in the parent entry.` );

    MAKE_HEADER("API Reference", "h2");
    MAKE_CLASS_CONSTRUCTOR( "Sidebar", [
        [ "options", "Object = {}" ]
    ] );

    MAKE_LINE_BREAK();
    MAKE_PARAGRAPH( `Use ${INLINE_CODE(`Area.addSidebar`)} with the following options to build a Sidebar inside an area:` );
    MAKE_CODE_BULLET_LIST( [
        ["className", "String", " Extra class to customize root element"],
        ["side", "String", "Side to attach the sidebar (left|right) [left]"],
        ["filter", "Boolean", "Add search bar to filter entries [false]"],
        ["displaySelected", "Boolean", "Indicate if an entry is displayed as selected [false]"],
        ["skipHeader", "Boolean", "Do not use sidebar header [false]"],
        ["headerImg", "String", "Image to be shown as avatar"],
        ["headerIcon", "String", "Icon to be shown as avatar (from LX.ICONS)"],
        ["headerTitle", "String", "Header title"],
        ["headerSubtitle", "String", "Header subtitle"],
        ["header", "HTMLElement", "HTMLElement to add a custom header"],
        ["skipFooter", "Boolean", "Do not use sidebar footer [false]"],
        ["footerImg", "String", "Image to be shown as avatar"],
        ["footerIcon", "String", "Icon to be shown as avatar (from LX.ICONS)"],
        ["footerTitle", "String", "Footer title"],
        ["footerSubtitle", "String", "Footer subtitle"],
        ["footer", "HTMLElement", "HTMLElement to add a custom footer"],
        ["collapsable", "Boolean", "Sidebar can toggle between collapsed/expanded [true]"],
        ["collapseToIcons", "Boolean", "When Sidebar collapses, icons remains visible [true]"],
        ["onHeaderPressed", "Function", "Function to call when header is pressed"],
        ["onFooterPressed", "Function", "Function to call when footer is pressed"],
        ["width", "String", "Width of the sidebar [16rem]"],
    ] );

    MAKE_HEADER( "Properties", "h3", "properties" );

    {
        const area = new LX.Area( { skipAppend: true, height: "auto", className: "mb-6" } );
        const panel = area.addPanel();
        content.appendChild( area.root );

        panel.addTable( null, {
            head: [ "Name", "Type", "Description", "Default" ],
            body: [
                ["collapsable", "Boolean", "Indicates whether the sidebar can be collapsed", "true"],
                ["collapsed", "Boolean", "Indicates whether the sidebar is collapsed", "false"],
                ["content", "HTMLElement", "Scrollable content element", "—"],
                ["footer", "HTMLElement", "Footer element", "—"],
                ["groups", "Object", "Map containing group data", "—"],
                ["header", "HTMLElement", "Header element", "—"],
                ["icons", "Array", "List of the sidebar items with the data: name, DOM element and callback", "—"],
                ["items", "Object", "Map containing the icons for each entry", "—"],
                ["root", "HTMLElement", "Container element of the sidebar", "—"]
            ].map( v => {
                return [ INLINE_CODE( v[ 0 ], "table" ), INLINE_CODE( v[ 1 ], "table desc" ), v[ 2 ], v[ 3 ] != "—" ? INLINE_CODE( v[ 3 ], "table desc" ) : v[ 3 ] ];
            } )
        }, {});
    }

    MAKE_HEADER( "Methods", "h3", "methods" );

    MAKE_CLASS_METHOD( ".add", `Creates a Sidebar entry/subentry.`, [
        ["key", "String"],
        ["options", "Object"]
    ] );

    MAKE_CLASS_METHOD( ".group", `Start a new group of entries.`, [
        ["groupName", "String"],
        ["action", "Object"]
    ] );

    MAKE_CLASS_METHOD( ".select", `Select an item of the sidebar.`, [
        ["name", "String"]
    ] );

    MAKE_CLASS_METHOD( ".separator", `Creates a line separator.`, [] );

    MAKE_CLASS_METHOD( ".toggleCollapsed", `Toggles ${ INLINE_CODE( "collapsed" ) } property (collapsed/expanded).`, [
        ["force", "Boolean"]
    ] );

    MAKE_CLASS_METHOD( ".update", `Builds the sidebar elements using current items.`, [] );

    MAKE_LINE_BREAK();
    MAKE_LINE_BREAK();

</script>