<script type="module">

    const content = document.querySelector( '.lexdocs-content' );
    const componentName = "Asset View";
    docMaker.header(componentName + ".", "h1", componentName.toLowerCase());
    docMaker.paragraph( `Displays assets by type with optional folder hierarchy and tree navigation, in a file-explorer-style layout.`, false, "text-muted-foreground");

    {
        window.__addInteractiveCodeExample( content, componentName, panel => {
            const area = new LX.Area( { skipAppend: true, height: "700px" } );
            panel.attach( area.root );

            const assetView = new LX.AssetView({
                skipPreview: false,
                skipBrowser: false,
                allowedTypes: {
                    "Mesh": { color: "rose-800" },
                    "Script": { color: "orange-500" },
                    "Clip": { color: "fuchsia-600" },
                    "SIGML": { color: "emerald-300" },
                },
                itemContextMenuOptions: [
                    { name: "Like", callback: ( item ) => { console.log(item) } }
                ]
            });
            area.attach(assetView);

            const assetData = [
                { id: "dog.png", type: "image", src: "https://pngfre.com/wp-content/uploads/1653714420512-1-904x1024.png" },
                { id: "teacher-video-Ψ.mp4", type: "video", src: "https://catsl.eelvex.net/static/vid/teacher-video-Ψ.mp4", metadata: { preview: "https://godotengine.org/assets/press/logo_vertical_color_dark.png" } },
                { id: "sigml_test.sigml", type: "sigml", src: "../data/sigml_test.sigml", metadata: { lastModified: 1740588312813 } },
                { id: "test.json", type: "JSON", src: "../data/test.json", metadata: { lastModified: 1740581312813 } },
                { id: "godot", type: "folder", children: [
                        { id: "color.png", type: "image", src: "https://godotengine.org/assets/press/icon_color.png" },
                        { id: "monochrome_light.png", type: "image", src: "https://godotengine.org/assets/press/icon_monochrome_light.png" },
                        { id: "example.png", type: "image", src: "../data/godot_pixelart.png" },
                        { id: "vertical_color.png", type: "image", src: "https://godotengine.org/assets/press/logo_vertical_color_dark.png" },
                        { id: "doggies", type: "folder",
                            children: [
                                { id: "pepe.png", type: "image", src: "https://pngfre.com/wp-content/uploads/1653714420512-1-904x1024.png" }
                            ]
                        }
                    ]
                },
                { id: "blacky.png", type: "image", src: "https://www.pngall.com/wp-content/uploads/5/Black-Dog-PNG.png" },
                { id: "german.png", type: "image", src: "https://static.vecteezy.com/system/resources/previews/017/420/504/original/portrait-of-a-dog-png.png" },
                { id: "unreal", type: "folder",
                    children: [
                        { id: "color.png", type: "image", src: "https://cdn2.unrealengine.com/ue-logotype-2023-vertical-white-1686x2048-bbfded26daa7.png" },
                        { id: "js_sample.js", type: "script", src: "../data/js_sample.js" },
                        { id: "empty_folder", type: "folder", children: [
                            { id: "another_empty_folder", type: "folder" }
                        ] }
                    ]
                },
                { id: "brow_lowerer.png", type: "clip", src: "../data/brow_lowerer.png", metadata: { lastModified: 1740181312813 } },
            ];

            assetView.load( assetData );
        }, "p-0" );
    }

    docMaker.header("Usage", "h2");

    docMaker.paragraph( `Load your data using ${ docMaker.iCode( "LX.AssetView.load( data )" ) }.
        Use ${ docMaker.iCode( "LX.AssetView.on( eventName: string, callback: AssetViewEventCallback )" ) } to add an AssetViewEventCallback for the following UI action events, where AssetViewEventCallback has the following
        parameters: ${ docMaker.iCode("event") } (AssetViewEvent) and ${ docMaker.iCode("resolve") } (Function). Users must call resolve to perform the action for cancellable events. ` );

    docMaker.note( `The ${ docMaker.iCode("event") } in the AssetViewEventCallback function contains common parameters as ${ docMaker.iCode("type") } and ${ docMaker.iCode("userInitiated") } and can contains more information
    depending on the event.` );

    docMaker.classMethod( "select", `Asset has been selected.`, [
        [ "event", "{ type, userInitiated, items }" ]
    ] );

    docMaker.classMethod( "delete", `Asset has been deleted.`, [
        [ "event", "{ type, userInitiated, items }" ]
    ] );

    docMaker.classMethod( "rename", `Asset has been renamed.`, [
        [ "event", "{ type, userInitiated, items, oldName, newName }" ]
    ] );

    docMaker.classMethod( "clone", `Asset has been cloned.`, [
        [ "event", "{ type, userInitiated, items, result }" ]
    ] );

    docMaker.classMethod( "dblClick", `Asset has been double clicked.`, [
        [ "event", "{ type, userInitiated, items }" ]
    ] );

    docMaker.classMethod( "check", `Asset has been checked.`, [
        [ "event", "{ type, userInitiated, items }" ]
    ] );

    docMaker.classMethod( "move", `Asset has been moved.`, [
        [ "event", "{ type, userInitiated, items, from, to }" ]
    ] );

    docMaker.classMethod( "enterFolder", `Folder has been entered.`, [
        [ "event", "{ type, userInitiated, to }" ]
    ] );

    docMaker.classMethod( "createFolder", `Folder has been created.`, [
        [ "event", "{ type, userInitiated, where, result }" ]
    ] );

    docMaker.classMethod( "refreshContent", `Content has been refreshed.`, [
        [ "event", "{ type, userInitiated, items, search }" ]
    ] );

    docMaker.classMethod( "beforeDelete", `Called before deleting assets.`, [
        [ "event", "{ type, userInitiated, items }" ],
        [ "resolve", "Function" ]
    ] );

    docMaker.classMethod( "beforeRename", `Called before renaming assets.`, [
        [ "event", "{ type, userInitiated, items, oldName, newName }" ],
        [ "resolve", "Function" ]
    ] );

    docMaker.classMethod( "beforeClone", `Called before cloning assets.`, [
        [ "event", "{ type, userInitiated, items }" ],
        [ "resolve", "Function" ]
    ] );

    docMaker.classMethod( "beforeMove", `Called before moving assets.`, [
        [ "event", "{ type, userInitiated, items, from, to }" ],
        [ "resolve", "Function" ]
    ] );

    docMaker.classMethod( "beforeCreateFolder", `Called before creating a folder. 1st resolve param can be used as a custom folder name.`, [
        [ "event", "{ type, userInitiated, where }" ],
        [ "resolve", "Function" ]
    ] );

    docMaker.classMethod( "beforeRefreshContent", `Called before refreshing items content.`, [
        [ "event", "{ type, userInitiated, search }" ],
        [ "resolve", "Function" ]
    ] );

    docMaker.header("API Reference", "h2");
    docMaker.classCtor("class LX.AssetView", [ [ "options", "Object = {}" ] ]);
    docMaker.lineBreak();
    docMaker.paragraph(`Where ${ docMaker.iCode( "options" ) } can include the following:`);
    docMaker.lineBreak();

    {
        const area = new LX.Area( { skipAppend: true, height: "auto", className: "mb-6" } );
        const panel = area.addPanel();
        content.appendChild( area.root );
        panel.addTable( null, {
            head: [ "Option", "Type", "Description", "Default" ],
            body: [
                ["allowedTypes", "Array", "Asset allowed types (strings)"],
                ["allowMultipleSelection", "Boolean", "Allow multiple asset selection", "true"],
                ["gridScale", "Boolean", "Size of the items in the Grid View", "1"],
                ["itemContextMenuOptions", "Array", "Customize the asset context menu actions { name, callback }"],
                ["layout", `<span class='cursor-pointer' title='"LAYOUT_GRID" | "LAYOUT_COMPACT" | "LAYOUT_LIST"'>Enum</span>`, `Layout appearance of the assets`, "AssetView.LAYOUT_GRID"],
                ["onlyFolders", "Boolean", "Use onlyFolders option in TreeComponent", "true"],
                ["previewActions", "Array", "Customize asset preview actions { name, callback, type (opt.), path (opt.) }"],
                ["rootPath", "String", "Override default rootPath for internal data"],
                ["skipBrowser", "Boolean", "Skip creation of the file browser", "false"],
                ["skipPreview", "Boolean", "Skip creation of the preview section", "false"],
                ["useNativeTitle", "Boolean", "Use native element titles instead of custom Lexgui hover titles", "false"],
            ].map( v => {
                return [ docMaker.iCode( v[ 0 ], "table" ), docMaker.iCode( v[ 1 ], "table desc" ), v[ 2 ], v[ 3 ] ? v[ 3 ] != "—" ? docMaker.iCode( v[ 3 ], "table desc" ) : v[ 3 ] : "—" ];
            } )
        }, {});
    }

    docMaker.header( "Methods", "h3", "methods" );

    docMaker.classMethod( ".clear", `Clear all AssetView panels.`, [] );

    docMaker.classMethod( ".load", `Loads and creates all the data elements.`, [
        ["data", "Object|Array"]
    ] );

    docMaker.classMethod( ".on", `Stores an event callback for the desired action.`, [
        ["eventName", "String"],
        ["callback", "AssetViewEventCallback"],
    ] );

    

</script>